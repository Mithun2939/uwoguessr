(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))u(h);new MutationObserver(h=>{for(const p of h)if(p.type==="childList")for(const _ of p.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&u(_)}).observe(document,{childList:!0,subtree:!0});function s(h){const p={};return h.integrity&&(p.integrity=h.integrity),h.referrerPolicy&&(p.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?p.credentials="include":h.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function u(h){if(h.ep)return;h.ep=!0;const p=s(h);fetch(h.href,p)}})();function Uc(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var fc={exports:{}},qo={},pc={exports:{}},Pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ld;function vp(){if(Ld)return Pe;Ld=1;var a=Symbol.for("react.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),u=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),p=Symbol.for("react.provider"),_=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),S=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),R=Symbol.iterator;function N(C){return C===null||typeof C!="object"?null:(C=R&&C[R]||C["@@iterator"],typeof C=="function"?C:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,B={};function H(C,$,de){this.props=C,this.context=$,this.refs=B,this.updater=de||M}H.prototype.isReactComponent={},H.prototype.setState=function(C,$){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,$,"setState")},H.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function Q(){}Q.prototype=H.prototype;function Y(C,$,de){this.props=C,this.context=$,this.refs=B,this.updater=de||M}var G=Y.prototype=new Q;G.constructor=Y,U(G,H.prototype),G.isPureReactComponent=!0;var ie=Array.isArray,Oe=Object.prototype.hasOwnProperty,he={current:null},ke={key:!0,ref:!0,__self:!0,__source:!0};function Fe(C,$,de){var ue,oe={},te=null,Le=null;if($!=null)for(ue in $.ref!==void 0&&(Le=$.ref),$.key!==void 0&&(te=""+$.key),$)Oe.call($,ue)&&!ke.hasOwnProperty(ue)&&(oe[ue]=$[ue]);var Te=arguments.length-2;if(Te===1)oe.children=de;else if(1<Te){for(var We=Array(Te),vt=0;vt<Te;vt++)We[vt]=arguments[vt+2];oe.children=We}if(C&&C.defaultProps)for(ue in Te=C.defaultProps,Te)oe[ue]===void 0&&(oe[ue]=Te[ue]);return{$$typeof:a,type:C,key:te,ref:Le,props:oe,_owner:he.current}}function ze(C,$){return{$$typeof:a,type:C.type,key:$,ref:C.ref,props:C.props,_owner:C._owner}}function Re(C){return typeof C=="object"&&C!==null&&C.$$typeof===a}function Ie(C){var $={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(de){return $[de]})}var Je=/\/+/g;function Rt(C,$){return typeof C=="object"&&C!==null&&C.key!=null?Ie(""+C.key):$.toString(36)}function st(C,$,de,ue,oe){var te=typeof C;(te==="undefined"||te==="boolean")&&(C=null);var Le=!1;if(C===null)Le=!0;else switch(te){case"string":case"number":Le=!0;break;case"object":switch(C.$$typeof){case a:case r:Le=!0}}if(Le)return Le=C,oe=oe(Le),C=ue===""?"."+Rt(Le,0):ue,ie(oe)?(de="",C!=null&&(de=C.replace(Je,"$&/")+"/"),st(oe,$,de,"",function(vt){return vt})):oe!=null&&(Re(oe)&&(oe=ze(oe,de+(!oe.key||Le&&Le.key===oe.key?"":(""+oe.key).replace(Je,"$&/")+"/")+C)),$.push(oe)),1;if(Le=0,ue=ue===""?".":ue+":",ie(C))for(var Te=0;Te<C.length;Te++){te=C[Te];var We=ue+Rt(te,Te);Le+=st(te,$,de,We,oe)}else if(We=N(C),typeof We=="function")for(C=We.call(C),Te=0;!(te=C.next()).done;)te=te.value,We=ue+Rt(te,Te++),Le+=st(te,$,de,We,oe);else if(te==="object")throw $=String(C),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.");return Le}function on(C,$,de){if(C==null)return C;var ue=[],oe=0;return st(C,ue,"","",function(te){return $.call(de,te,oe++)}),ue}function De(C){if(C._status===-1){var $=C._result;$=$(),$.then(function(de){(C._status===0||C._status===-1)&&(C._status=1,C._result=de)},function(de){(C._status===0||C._status===-1)&&(C._status=2,C._result=de)}),C._status===-1&&(C._status=0,C._result=$)}if(C._status===1)return C._result.default;throw C._result}var Be={current:null},F={transition:null},me={ReactCurrentDispatcher:Be,ReactCurrentBatchConfig:F,ReactCurrentOwner:he};function W(){throw Error("act(...) is not supported in production builds of React.")}return Pe.Children={map:on,forEach:function(C,$,de){on(C,function(){$.apply(this,arguments)},de)},count:function(C){var $=0;return on(C,function(){$++}),$},toArray:function(C){return on(C,function($){return $})||[]},only:function(C){if(!Re(C))throw Error("React.Children.only expected to receive a single React element child.");return C}},Pe.Component=H,Pe.Fragment=s,Pe.Profiler=h,Pe.PureComponent=Y,Pe.StrictMode=u,Pe.Suspense=v,Pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=me,Pe.act=W,Pe.cloneElement=function(C,$,de){if(C==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+C+".");var ue=U({},C.props),oe=C.key,te=C.ref,Le=C._owner;if($!=null){if($.ref!==void 0&&(te=$.ref,Le=he.current),$.key!==void 0&&(oe=""+$.key),C.type&&C.type.defaultProps)var Te=C.type.defaultProps;for(We in $)Oe.call($,We)&&!ke.hasOwnProperty(We)&&(ue[We]=$[We]===void 0&&Te!==void 0?Te[We]:$[We])}var We=arguments.length-2;if(We===1)ue.children=de;else if(1<We){Te=Array(We);for(var vt=0;vt<We;vt++)Te[vt]=arguments[vt+2];ue.children=Te}return{$$typeof:a,type:C.type,key:oe,ref:te,props:ue,_owner:Le}},Pe.createContext=function(C){return C={$$typeof:_,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},C.Provider={$$typeof:p,_context:C},C.Consumer=C},Pe.createElement=Fe,Pe.createFactory=function(C){var $=Fe.bind(null,C);return $.type=C,$},Pe.createRef=function(){return{current:null}},Pe.forwardRef=function(C){return{$$typeof:w,render:C}},Pe.isValidElement=Re,Pe.lazy=function(C){return{$$typeof:P,_payload:{_status:-1,_result:C},_init:De}},Pe.memo=function(C,$){return{$$typeof:S,type:C,compare:$===void 0?null:$}},Pe.startTransition=function(C){var $=F.transition;F.transition={};try{C()}finally{F.transition=$}},Pe.unstable_act=W,Pe.useCallback=function(C,$){return Be.current.useCallback(C,$)},Pe.useContext=function(C){return Be.current.useContext(C)},Pe.useDebugValue=function(){},Pe.useDeferredValue=function(C){return Be.current.useDeferredValue(C)},Pe.useEffect=function(C,$){return Be.current.useEffect(C,$)},Pe.useId=function(){return Be.current.useId()},Pe.useImperativeHandle=function(C,$,de){return Be.current.useImperativeHandle(C,$,de)},Pe.useInsertionEffect=function(C,$){return Be.current.useInsertionEffect(C,$)},Pe.useLayoutEffect=function(C,$){return Be.current.useLayoutEffect(C,$)},Pe.useMemo=function(C,$){return Be.current.useMemo(C,$)},Pe.useReducer=function(C,$,de){return Be.current.useReducer(C,$,de)},Pe.useRef=function(C){return Be.current.useRef(C)},Pe.useState=function(C){return Be.current.useState(C)},Pe.useSyncExternalStore=function(C,$,de){return Be.current.useSyncExternalStore(C,$,de)},Pe.useTransition=function(){return Be.current.useTransition()},Pe.version="18.3.1",Pe}var Od;function $c(){return Od||(Od=1,pc.exports=vp()),pc.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rd;function yp(){if(Rd)return qo;Rd=1;var a=$c(),r=Symbol.for("react.element"),s=Symbol.for("react.fragment"),u=Object.prototype.hasOwnProperty,h=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};function _(w,v,S){var P,R={},N=null,M=null;S!==void 0&&(N=""+S),v.key!==void 0&&(N=""+v.key),v.ref!==void 0&&(M=v.ref);for(P in v)u.call(v,P)&&!p.hasOwnProperty(P)&&(R[P]=v[P]);if(w&&w.defaultProps)for(P in v=w.defaultProps,v)R[P]===void 0&&(R[P]=v[P]);return{$$typeof:r,type:w,key:N,ref:M,props:R,_owner:h.current}}return qo.Fragment=s,qo.jsx=_,qo.jsxs=_,qo}var Ad;function wp(){return Ad||(Ad=1,fc.exports=yp()),fc.exports}var T=wp(),fe=$c();const jl=Uc(fe);var Ol={},mc={exports:{}},Zt={},_c={exports:{}},gc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nd;function xp(){return Nd||(Nd=1,(function(a){function r(F,me){var W=F.length;F.push(me);e:for(;0<W;){var C=W-1>>>1,$=F[C];if(0<h($,me))F[C]=me,F[W]=$,W=C;else break e}}function s(F){return F.length===0?null:F[0]}function u(F){if(F.length===0)return null;var me=F[0],W=F.pop();if(W!==me){F[0]=W;e:for(var C=0,$=F.length,de=$>>>1;C<de;){var ue=2*(C+1)-1,oe=F[ue],te=ue+1,Le=F[te];if(0>h(oe,W))te<$&&0>h(Le,oe)?(F[C]=Le,F[te]=W,C=te):(F[C]=oe,F[ue]=W,C=ue);else if(te<$&&0>h(Le,W))F[C]=Le,F[te]=W,C=te;else break e}}return me}function h(F,me){var W=F.sortIndex-me.sortIndex;return W!==0?W:F.id-me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var p=performance;a.unstable_now=function(){return p.now()}}else{var _=Date,w=_.now();a.unstable_now=function(){return _.now()-w}}var v=[],S=[],P=1,R=null,N=3,M=!1,U=!1,B=!1,H=typeof setTimeout=="function"?setTimeout:null,Q=typeof clearTimeout=="function"?clearTimeout:null,Y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function G(F){for(var me=s(S);me!==null;){if(me.callback===null)u(S);else if(me.startTime<=F)u(S),me.sortIndex=me.expirationTime,r(v,me);else break;me=s(S)}}function ie(F){if(B=!1,G(F),!U)if(s(v)!==null)U=!0,De(Oe);else{var me=s(S);me!==null&&Be(ie,me.startTime-F)}}function Oe(F,me){U=!1,B&&(B=!1,Q(Fe),Fe=-1),M=!0;var W=N;try{for(G(me),R=s(v);R!==null&&(!(R.expirationTime>me)||F&&!Ie());){var C=R.callback;if(typeof C=="function"){R.callback=null,N=R.priorityLevel;var $=C(R.expirationTime<=me);me=a.unstable_now(),typeof $=="function"?R.callback=$:R===s(v)&&u(v),G(me)}else u(v);R=s(v)}if(R!==null)var de=!0;else{var ue=s(S);ue!==null&&Be(ie,ue.startTime-me),de=!1}return de}finally{R=null,N=W,M=!1}}var he=!1,ke=null,Fe=-1,ze=5,Re=-1;function Ie(){return!(a.unstable_now()-Re<ze)}function Je(){if(ke!==null){var F=a.unstable_now();Re=F;var me=!0;try{me=ke(!0,F)}finally{me?Rt():(he=!1,ke=null)}}else he=!1}var Rt;if(typeof Y=="function")Rt=function(){Y(Je)};else if(typeof MessageChannel<"u"){var st=new MessageChannel,on=st.port2;st.port1.onmessage=Je,Rt=function(){on.postMessage(null)}}else Rt=function(){H(Je,0)};function De(F){ke=F,he||(he=!0,Rt())}function Be(F,me){Fe=H(function(){F(a.unstable_now())},me)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(F){F.callback=null},a.unstable_continueExecution=function(){U||M||(U=!0,De(Oe))},a.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ze=0<F?Math.floor(1e3/F):5},a.unstable_getCurrentPriorityLevel=function(){return N},a.unstable_getFirstCallbackNode=function(){return s(v)},a.unstable_next=function(F){switch(N){case 1:case 2:case 3:var me=3;break;default:me=N}var W=N;N=me;try{return F()}finally{N=W}},a.unstable_pauseExecution=function(){},a.unstable_requestPaint=function(){},a.unstable_runWithPriority=function(F,me){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var W=N;N=F;try{return me()}finally{N=W}},a.unstable_scheduleCallback=function(F,me,W){var C=a.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?C+W:C):W=C,F){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=W+$,F={id:P++,callback:me,priorityLevel:F,startTime:W,expirationTime:$,sortIndex:-1},W>C?(F.sortIndex=W,r(S,F),s(v)===null&&F===s(S)&&(B?(Q(Fe),Fe=-1):B=!0,Be(ie,W-C))):(F.sortIndex=$,r(v,F),U||M||(U=!0,De(Oe))),F},a.unstable_shouldYield=Ie,a.unstable_wrapCallback=function(F){var me=N;return function(){var W=N;N=me;try{return F.apply(this,arguments)}finally{N=W}}}})(gc)),gc}var Id;function Sp(){return Id||(Id=1,_c.exports=xp()),_c.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jd;function kp(){if(jd)return Zt;jd=1;var a=$c(),r=Sp();function s(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,o=1;o<arguments.length;o++)n+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var u=new Set,h={};function p(e,n){_(e,n),_(e+"Capture",n)}function _(e,n){for(h[e]=n,e=0;e<n.length;e++)u.add(n[e])}var w=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),v=Object.prototype.hasOwnProperty,S=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,P={},R={};function N(e){return v.call(R,e)?!0:v.call(P,e)?!1:S.test(e)?R[e]=!0:(P[e]=!0,!1)}function M(e,n,o,c){if(o!==null&&o.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return c?!1:o!==null?!o.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function U(e,n,o,c){if(n===null||typeof n>"u"||M(e,n,o,c))return!0;if(c)return!1;if(o!==null)switch(o.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function B(e,n,o,c,f,m,y){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=c,this.attributeNamespace=f,this.mustUseProperty=o,this.propertyName=e,this.type=n,this.sanitizeURL=m,this.removeEmptyString=y}var H={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){H[e]=new B(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var n=e[0];H[n]=new B(n,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){H[e]=new B(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){H[e]=new B(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){H[e]=new B(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){H[e]=new B(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){H[e]=new B(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){H[e]=new B(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){H[e]=new B(e,5,!1,e.toLowerCase(),null,!1,!1)});var Q=/[\-:]([a-z])/g;function Y(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var n=e.replace(Q,Y);H[n]=new B(n,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var n=e.replace(Q,Y);H[n]=new B(n,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var n=e.replace(Q,Y);H[n]=new B(n,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){H[e]=new B(e,1,!1,e.toLowerCase(),null,!1,!1)}),H.xlinkHref=new B("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){H[e]=new B(e,1,!1,e.toLowerCase(),null,!0,!0)});function G(e,n,o,c){var f=H.hasOwnProperty(n)?H[n]:null;(f!==null?f.type!==0:c||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(U(n,o,f,c)&&(o=null),c||f===null?N(n)&&(o===null?e.removeAttribute(n):e.setAttribute(n,""+o)):f.mustUseProperty?e[f.propertyName]=o===null?f.type===3?!1:"":o:(n=f.attributeName,c=f.attributeNamespace,o===null?e.removeAttribute(n):(f=f.type,o=f===3||f===4&&o===!0?"":""+o,c?e.setAttributeNS(c,n,o):e.setAttribute(n,o))))}var ie=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Oe=Symbol.for("react.element"),he=Symbol.for("react.portal"),ke=Symbol.for("react.fragment"),Fe=Symbol.for("react.strict_mode"),ze=Symbol.for("react.profiler"),Re=Symbol.for("react.provider"),Ie=Symbol.for("react.context"),Je=Symbol.for("react.forward_ref"),Rt=Symbol.for("react.suspense"),st=Symbol.for("react.suspense_list"),on=Symbol.for("react.memo"),De=Symbol.for("react.lazy"),Be=Symbol.for("react.offscreen"),F=Symbol.iterator;function me(e){return e===null||typeof e!="object"?null:(e=F&&e[F]||e["@@iterator"],typeof e=="function"?e:null)}var W=Object.assign,C;function $(e){if(C===void 0)try{throw Error()}catch(o){var n=o.stack.trim().match(/\n( *(at )?)/);C=n&&n[1]||""}return`
`+C+e}var de=!1;function ue(e,n){if(!e||de)return"";de=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(D){var c=D}Reflect.construct(e,[],n)}else{try{n.call()}catch(D){c=D}e.call(n.prototype)}else{try{throw Error()}catch(D){c=D}e()}}catch(D){if(D&&c&&typeof D.stack=="string"){for(var f=D.stack.split(`
`),m=c.stack.split(`
`),y=f.length-1,k=m.length-1;1<=y&&0<=k&&f[y]!==m[k];)k--;for(;1<=y&&0<=k;y--,k--)if(f[y]!==m[k]){if(y!==1||k!==1)do if(y--,k--,0>k||f[y]!==m[k]){var E=`
`+f[y].replace(" at new "," at ");return e.displayName&&E.includes("<anonymous>")&&(E=E.replace("<anonymous>",e.displayName)),E}while(1<=y&&0<=k);break}}}finally{de=!1,Error.prepareStackTrace=o}return(e=e?e.displayName||e.name:"")?$(e):""}function oe(e){switch(e.tag){case 5:return $(e.type);case 16:return $("Lazy");case 13:return $("Suspense");case 19:return $("SuspenseList");case 0:case 2:case 15:return e=ue(e.type,!1),e;case 11:return e=ue(e.type.render,!1),e;case 1:return e=ue(e.type,!0),e;default:return""}}function te(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ke:return"Fragment";case he:return"Portal";case ze:return"Profiler";case Fe:return"StrictMode";case Rt:return"Suspense";case st:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ie:return(e.displayName||"Context")+".Consumer";case Re:return(e._context.displayName||"Context")+".Provider";case Je:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case on:return n=e.displayName||null,n!==null?n:te(e.type)||"Memo";case De:n=e._payload,e=e._init;try{return te(e(n))}catch{}}return null}function Le(e){var n=e.type;switch(e.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=n.render,e=e.displayName||e.name||"",n.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return te(n);case 8:return n===Fe?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function Te(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function We(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function vt(e){var n=We(e)?"checked":"value",o=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),c=""+e[n];if(!e.hasOwnProperty(n)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,m=o.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return f.call(this)},set:function(y){c=""+y,m.call(this,y)}}),Object.defineProperty(e,n,{enumerable:o.enumerable}),{getValue:function(){return c},setValue:function(y){c=""+y},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function vr(e){e._valueTracker||(e._valueTracker=vt(e))}function yr(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var o=n.getValue(),c="";return e&&(c=We(e)?e.checked?"true":"false":e.value),e=c,e!==o?(n.setValue(e),!0):!1}function wr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Vs(e,n){var o=n.checked;return W({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??e._wrapperState.initialChecked})}function qs(e,n){var o=n.defaultValue==null?"":n.defaultValue,c=n.checked!=null?n.checked:n.defaultChecked;o=Te(n.value!=null?n.value:o),e._wrapperState={initialChecked:c,initialValue:o,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function Ks(e,n){n=n.checked,n!=null&&G(e,"checked",n,!1)}function si(e,n){Ks(e,n);var o=Te(n.value),c=n.type;if(o!=null)c==="number"?(o===0&&e.value===""||e.value!=o)&&(e.value=""+o):e.value!==""+o&&(e.value=""+o);else if(c==="submit"||c==="reset"){e.removeAttribute("value");return}n.hasOwnProperty("value")?Gs(e,n.type,o):n.hasOwnProperty("defaultValue")&&Gs(e,n.type,Te(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(e.defaultChecked=!!n.defaultChecked)}function oi(e,n,o){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var c=n.type;if(!(c!=="submit"&&c!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+e._wrapperState.initialValue,o||n===e.value||(e.value=n),e.defaultValue=n}o=e.name,o!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,o!==""&&(e.name=o)}function Gs(e,n,o){(n!=="number"||wr(e.ownerDocument)!==e)&&(o==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+o&&(e.defaultValue=""+o))}var xr=Array.isArray;function In(e,n,o,c){if(e=e.options,n){n={};for(var f=0;f<o.length;f++)n["$"+o[f]]=!0;for(o=0;o<e.length;o++)f=n.hasOwnProperty("$"+e[o].value),e[o].selected!==f&&(e[o].selected=f),f&&c&&(e[o].defaultSelected=!0)}else{for(o=""+Te(o),n=null,f=0;f<e.length;f++){if(e[f].value===o){e[f].selected=!0,c&&(e[f].defaultSelected=!0);return}n!==null||e[f].disabled||(n=e[f])}n!==null&&(n.selected=!0)}}function Wi(e,n){if(n.dangerouslySetInnerHTML!=null)throw Error(s(91));return W({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Js(e,n){var o=n.value;if(o==null){if(o=n.children,n=n.defaultValue,o!=null){if(n!=null)throw Error(s(92));if(xr(o)){if(1<o.length)throw Error(s(93));o=o[0]}n=o}n==null&&(n=""),o=n}e._wrapperState={initialValue:Te(o)}}function la(e,n){var o=Te(n.value),c=Te(n.defaultValue);o!=null&&(o=""+o,o!==e.value&&(e.value=o),n.defaultValue==null&&e.defaultValue!==o&&(e.defaultValue=o)),c!=null&&(e.defaultValue=""+c)}function ua(e){var n=e.textContent;n===e._wrapperState.initialValue&&n!==""&&n!==null&&(e.value=n)}function Zi(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Hi(e,n){return e==null||e==="http://www.w3.org/1999/xhtml"?Zi(n):e==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ai,ca=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,o,c,f){MSApp.execUnsafeLocalFunction(function(){return e(n,o,c,f)})}:e})(function(e,n){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=n;else{for(ai=ai||document.createElement("div"),ai.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=ai.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}});function Sr(e,n){if(n){var o=e.firstChild;if(o&&o===e.lastChild&&o.nodeType===3){o.nodeValue=n;return}}e.textContent=n}var kr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Wl=["Webkit","ms","Moz","O"];Object.keys(kr).forEach(function(e){Wl.forEach(function(n){n=n+e.charAt(0).toUpperCase()+e.substring(1),kr[n]=kr[e]})});function Ys(e,n,o){return n==null||typeof n=="boolean"||n===""?"":o||typeof n!="number"||n===0||kr.hasOwnProperty(e)&&kr[e]?(""+n).trim():n+"px"}function Vi(e,n){e=e.style;for(var o in n)if(n.hasOwnProperty(o)){var c=o.indexOf("--")===0,f=Ys(o,n[o],c);o==="float"&&(o="cssFloat"),c?e.setProperty(o,f):e[o]=f}}var ha=W({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Qs(e,n){if(n){if(ha[e]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(s(137,e));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(s(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(s(61))}if(n.style!=null&&typeof n.style!="object")throw Error(s(62))}}function qn(e,n){if(e.indexOf("-")===-1)return typeof n.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xs=null;function eo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var qi=null,Kn=null,Gn=null;function da(e){if(e=ar(e)){if(typeof qi!="function")throw Error(s(280));var n=e.stateNode;n&&(n=ws(n),qi(e.stateNode,e.type,n))}}function fa(e){Kn?Gn?Gn.push(e):Gn=[e]:Kn=e}function pa(){if(Kn){var e=Kn,n=Gn;if(Gn=Kn=null,da(e),n)for(e=0;e<n.length;e++)da(n[e])}}function ma(e,n){return e(n)}function _a(){}var to=!1;function Ki(e,n,o){if(to)return e(n,o);to=!0;try{return ma(e,n,o)}finally{to=!1,(Kn!==null||Gn!==null)&&(_a(),pa())}}function li(e,n){var o=e.stateNode;if(o===null)return null;var c=ws(o);if(c===null)return null;o=c[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(e=e.type,c=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!c;break e;default:e=!1}if(e)return null;if(o&&typeof o!="function")throw Error(s(231,n,typeof o));return o}var no=!1;if(w)try{var ui={};Object.defineProperty(ui,"passive",{get:function(){no=!0}}),window.addEventListener("test",ui,ui),window.removeEventListener("test",ui,ui)}catch{no=!1}function Zl(e,n,o,c,f,m,y,k,E){var D=Array.prototype.slice.call(arguments,3);try{n.apply(o,D)}catch(q){this.onError(q)}}var kt=!1,ae=null,ci=!1,Gi=null,ga={onError:function(e){kt=!0,ae=e}};function va(e,n,o,c,f,m,y,k,E){kt=!1,ae=null,Zl.apply(ga,arguments)}function ro(e,n,o,c,f,m,y,k,E){if(va.apply(this,arguments),kt){if(kt){var D=ae;kt=!1,ae=null}else throw Error(s(198));ci||(ci=!0,Gi=D)}}function jn(e){var n=e,o=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(o=n.return),e=n.return;while(e)}return n.tag===3?o:null}function Jn(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function io(e){if(jn(e)!==e)throw Error(s(188))}function Hl(e){var n=e.alternate;if(!n){if(n=jn(e),n===null)throw Error(s(188));return n!==e?null:e}for(var o=e,c=n;;){var f=o.return;if(f===null)break;var m=f.alternate;if(m===null){if(c=f.return,c!==null){o=c;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===o)return io(f),e;if(m===c)return io(f),n;m=m.sibling}throw Error(s(188))}if(o.return!==c.return)o=f,c=m;else{for(var y=!1,k=f.child;k;){if(k===o){y=!0,o=f,c=m;break}if(k===c){y=!0,c=f,o=m;break}k=k.sibling}if(!y){for(k=m.child;k;){if(k===o){y=!0,o=m,c=f;break}if(k===c){y=!0,c=m,o=f;break}k=k.sibling}if(!y)throw Error(s(189))}}if(o.alternate!==c)throw Error(s(190))}if(o.tag!==3)throw Error(s(188));return o.stateNode.current===o?e:n}function ya(e){return e=Hl(e),e!==null?wa(e):null}function wa(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var n=wa(e);if(n!==null)return n;e=e.sibling}return null}var xa=r.unstable_scheduleCallback,so=r.unstable_cancelCallback,Vl=r.unstable_shouldYield,Ji=r.unstable_requestPaint,Ye=r.unstable_now,ql=r.unstable_getCurrentPriorityLevel,oo=r.unstable_ImmediatePriority,Sa=r.unstable_UserBlockingPriority,Yi=r.unstable_NormalPriority,ao=r.unstable_LowPriority,br=r.unstable_IdlePriority,hi=null,Ht=null;function di(e){if(Ht&&typeof Ht.onCommitFiberRoot=="function")try{Ht.onCommitFiberRoot(hi,e,void 0,(e.current.flags&128)===128)}catch{}}var be=Math.clz32?Math.clz32:Er,qe=Math.log,Qi=Math.LN2;function Er(e){return e>>>=0,e===0?32:31-(qe(e)/Qi|0)|0}var yn=64,Tr=4194304;function Se(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ze(e,n){var o=e.pendingLanes;if(o===0)return 0;var c=0,f=e.suspendedLanes,m=e.pingedLanes,y=o&268435455;if(y!==0){var k=y&~f;k!==0?c=Se(k):(m&=y,m!==0&&(c=Se(m)))}else y=o&~f,y!==0?c=Se(y):m!==0&&(c=Se(m));if(c===0)return 0;if(n!==0&&n!==c&&(n&f)===0&&(f=c&-c,m=n&-n,f>=m||f===16&&(m&4194240)!==0))return n;if((c&4)!==0&&(c|=o&16),n=e.entangledLanes,n!==0)for(e=e.entanglements,n&=c;0<n;)o=31-be(n),f=1<<o,c|=e[o],n&=~f;return c}function lo(e,n){switch(e){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xi(e,n){for(var o=e.suspendedLanes,c=e.pingedLanes,f=e.expirationTimes,m=e.pendingLanes;0<m;){var y=31-be(m),k=1<<y,E=f[y];E===-1?((k&o)===0||(k&c)!==0)&&(f[y]=lo(k,n)):E<=n&&(e.expiredLanes|=k),m&=~k}}function bt(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function ka(){var e=yn;return yn<<=1,(yn&4194240)===0&&(yn=64),e}function Pr(e){for(var n=[],o=0;31>o;o++)n.push(e);return n}function Vt(e,n,o){e.pendingLanes|=n,n!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,n=31-be(n),e[n]=o}function nt(e,n){var o=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;var c=e.eventTimes;for(e=e.expirationTimes;0<o;){var f=31-be(o),m=1<<f;n[f]=0,c[f]=-1,e[f]=-1,o&=~m}}function wn(e,n){var o=e.entangledLanes|=n;for(e=e.entanglements;o;){var c=31-be(o),f=1<<c;f&n|e[c]&n&&(e[c]|=n),o&=~f}}var Ae=0;function Cr(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var es,Yn,ts,ns,fi,pi=!1,Lr=[],qt=null,xn=null,an=null,mi=new Map,we=new Map,ct=[],Ue="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function uo(e,n){switch(e){case"focusin":case"focusout":qt=null;break;case"dragenter":case"dragleave":xn=null;break;case"mouseover":case"mouseout":an=null;break;case"pointerover":case"pointerout":mi.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":we.delete(n.pointerId)}}function Qn(e,n,o,c,f,m){return e===null||e.nativeEvent!==m?(e={blockedOn:n,domEventName:o,eventSystemFlags:c,nativeEvent:m,targetContainers:[f]},n!==null&&(n=ar(n),n!==null&&Yn(n)),e):(e.eventSystemFlags|=c,n=e.targetContainers,f!==null&&n.indexOf(f)===-1&&n.push(f),e)}function co(e,n,o,c,f){switch(n){case"focusin":return qt=Qn(qt,e,n,o,c,f),!0;case"dragenter":return xn=Qn(xn,e,n,o,c,f),!0;case"mouseover":return an=Qn(an,e,n,o,c,f),!0;case"pointerover":var m=f.pointerId;return mi.set(m,Qn(mi.get(m)||null,e,n,o,c,f)),!0;case"gotpointercapture":return m=f.pointerId,we.set(m,Qn(we.get(m)||null,e,n,o,c,f)),!0}return!1}function rs(e){var n=or(e.target);if(n!==null){var o=jn(n);if(o!==null){if(n=o.tag,n===13){if(n=Jn(o),n!==null){e.blockedOn=n,fi(e.priority,function(){ts(o)});return}}else if(n===3&&o.stateNode.current.memoizedState.isDehydrated){e.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ln(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var o=os(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(o===null){o=e.nativeEvent;var c=new o.constructor(o.type,o);Xs=c,o.target.dispatchEvent(c),Xs=null}else return n=ar(o),n!==null&&Yn(n),e.blockedOn=o,!1;n.shift()}return!0}function is(e,n,o){ln(e)&&o.delete(n)}function _i(){pi=!1,qt!==null&&ln(qt)&&(qt=null),xn!==null&&ln(xn)&&(xn=null),an!==null&&ln(an)&&(an=null),mi.forEach(is),we.forEach(is)}function Qe(e,n){e.blockedOn===n&&(e.blockedOn=null,pi||(pi=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,_i)))}function Kt(e){function n(f){return Qe(f,e)}if(0<Lr.length){Qe(Lr[0],e);for(var o=1;o<Lr.length;o++){var c=Lr[o];c.blockedOn===e&&(c.blockedOn=null)}}for(qt!==null&&Qe(qt,e),xn!==null&&Qe(xn,e),an!==null&&Qe(an,e),mi.forEach(n),we.forEach(n),o=0;o<ct.length;o++)c=ct[o],c.blockedOn===e&&(c.blockedOn=null);for(;0<ct.length&&(o=ct[0],o.blockedOn===null);)rs(o),o.blockedOn===null&&ct.shift()}var Xn=ie.ReactCurrentBatchConfig,gi=!0;function Kl(e,n,o,c){var f=Ae,m=Xn.transition;Xn.transition=null;try{Ae=1,vi(e,n,o,c)}finally{Ae=f,Xn.transition=m}}function ba(e,n,o,c){var f=Ae,m=Xn.transition;Xn.transition=null;try{Ae=4,vi(e,n,o,c)}finally{Ae=f,Xn.transition=m}}function vi(e,n,o,c){if(gi){var f=os(e,n,o,c);if(f===null)t(e,n,c,ss,o),uo(e,c);else if(co(f,e,n,o,c))c.stopPropagation();else if(uo(e,c),n&4&&-1<Ue.indexOf(e)){for(;f!==null;){var m=ar(f);if(m!==null&&es(m),m=os(e,n,o,c),m===null&&t(e,n,c,ss,o),m===f)break;f=m}f!==null&&c.stopPropagation()}else t(e,n,c,null,o)}}var ss=null;function os(e,n,o,c){if(ss=null,e=eo(c),e=or(e),e!==null)if(n=jn(e),n===null)e=null;else if(o=n.tag,o===13){if(e=Jn(n),e!==null)return e;e=null}else if(o===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null);return ss=e,null}function Ce(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ql()){case oo:return 1;case Sa:return 4;case Yi:case ao:return 16;case br:return 536870912;default:return 16}default:return 16}}var Mn=null,At=null,zn=null;function ho(){if(zn)return zn;var e,n=At,o=n.length,c,f="value"in Mn?Mn.value:Mn.textContent,m=f.length;for(e=0;e<o&&n[e]===f[e];e++);var y=o-e;for(c=1;c<=y&&n[o-c]===f[m-c];c++);return zn=f.slice(e,1<c?1-c:void 0)}function as(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Or(){return!0}function Ea(){return!1}function Et(e){function n(o,c,f,m,y){this._reactName=o,this._targetInst=f,this.type=c,this.nativeEvent=m,this.target=y,this.currentTarget=null;for(var k in e)e.hasOwnProperty(k)&&(o=e[k],this[k]=o?o(m):m[k]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Or:Ea,this.isPropagationStopped=Ea,this}return W(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Or)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Or)},persist:function(){},isPersistent:Or}),n}var Rr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fo=Et(Rr),er=W({},Rr,{view:0,detail:0}),Gl=Et(er),zt,po,Ar,Gt=W({},er,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nr,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ar&&(Ar&&e.type==="mousemove"?(zt=e.screenX-Ar.screenX,po=e.screenY-Ar.screenY):po=zt=0,Ar=e),zt)},movementY:function(e){return"movementY"in e?e.movementY:po}}),mo=Et(Gt),Ta=W({},Gt,{dataTransfer:0}),_o=Et(Ta),Jl=W({},er,{relatedTarget:0}),ls=Et(Jl),Pa=W({},Rr,{animationName:0,elapsedTime:0,pseudoElement:0}),Yl=Et(Pa),Ql=W({},Rr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),go=Et(Ql),Xl=W({},Rr,{data:0}),vo=Et(Xl),Ca={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},us={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function eu(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=tr[e])?!!n[e]:!1}function nr(){return eu}var Dt=W({},er,{key:function(e){if(e.key){var n=Ca[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=as(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?us[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nr,charCode:function(e){return e.type==="keypress"?as(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?as(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),La=Et(Dt),Oa=W({},Gt,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ra=Et(Oa),yo=W({},er,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nr}),wo=Et(yo),tu=W({},Rr,{propertyName:0,elapsedTime:0,pseudoElement:0}),nu=Et(tu),Aa=W({},Gt,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ru=Et(Aa),Jt=[9,13,27,32],Dn=w&&"CompositionEvent"in window,yi=null;w&&"documentMode"in document&&(yi=document.documentMode);var Sn=w&&"TextEvent"in window&&!yi,Na=w&&(!Dn||yi&&8<yi&&11>=yi),rr=" ",Ia=!1;function Nr(e,n){switch(e){case"keyup":return Jt.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xo(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var kn=!1;function iu(e,n){switch(e){case"compositionend":return xo(n);case"keypress":return n.which!==32?null:(Ia=!0,rr);case"textInput":return e=n.data,e===rr&&Ia?null:e;default:return null}}function Bn(e,n){if(kn)return e==="compositionend"||!Dn&&Nr(e,n)?(e=ho(),zn=At=Mn=null,kn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Na&&n.locale!=="ko"?null:n.data;default:return null}}var cs={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ja(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!cs[e.type]:n==="textarea"}function hs(e,n,o,c){fa(c),n=l(n,"onChange"),0<n.length&&(o=new fo("onChange","change",null,o,c),e.push({event:o,listeners:n}))}var wi=null,Nt=null;function su(e){Oo(e,0)}function bn(e){var n=lr(e);if(yr(n))return e}function ou(e,n){if(e==="change")return n}var un=!1;if(w){var Ir;if(w){var ds="oninput"in document;if(!ds){var fs=document.createElement("div");fs.setAttribute("oninput","return;"),ds=typeof fs.oninput=="function"}Ir=ds}else Ir=!1;un=Ir&&(!document.documentMode||9<document.documentMode)}function xi(){wi&&(wi.detachEvent("onpropertychange",ps),Nt=wi=null)}function ps(e){if(e.propertyName==="value"&&bn(Nt)){var n=[];hs(n,Nt,e,eo(e)),Ki(su,n)}}function ms(e,n,o){e==="focusin"?(xi(),wi=n,Nt=o,wi.attachEvent("onpropertychange",ps)):e==="focusout"&&xi()}function jr(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return bn(Nt)}function _s(e,n){if(e==="click")return bn(n)}function So(e,n){if(e==="input"||e==="change")return bn(n)}function Ma(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Yt=typeof Object.is=="function"?Object.is:Ma;function Un(e,n){if(Yt(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var o=Object.keys(e),c=Object.keys(n);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var f=o[c];if(!v.call(n,f)||!Yt(e[f],n[f]))return!1}return!0}function za(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ko(e,n){var o=za(e);e=0;for(var c;o;){if(o.nodeType===3){if(c=e+o.textContent.length,e<=n&&c>=n)return{node:o,offset:n-e};e=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=za(o)}}function Da(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?Da(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function bo(){for(var e=window,n=wr();n instanceof e.HTMLIFrameElement;){try{var o=typeof n.contentWindow.location.href=="string"}catch{o=!1}if(o)e=n.contentWindow;else break;n=wr(e.document)}return n}function Eo(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}function cn(e){var n=bo(),o=e.focusedElem,c=e.selectionRange;if(n!==o&&o&&o.ownerDocument&&Da(o.ownerDocument.documentElement,o)){if(c!==null&&Eo(o)){if(n=c.start,e=c.end,e===void 0&&(e=n),"selectionStart"in o)o.selectionStart=n,o.selectionEnd=Math.min(e,o.value.length);else if(e=(n=o.ownerDocument||document)&&n.defaultView||window,e.getSelection){e=e.getSelection();var f=o.textContent.length,m=Math.min(c.start,f);c=c.end===void 0?m:Math.min(c.end,f),!e.extend&&m>c&&(f=c,c=m,m=f),f=ko(o,m);var y=ko(o,c);f&&y&&(e.rangeCount!==1||e.anchorNode!==f.node||e.anchorOffset!==f.offset||e.focusNode!==y.node||e.focusOffset!==y.offset)&&(n=n.createRange(),n.setStart(f.node,f.offset),e.removeAllRanges(),m>c?(e.addRange(n),e.extend(y.node,y.offset)):(n.setEnd(y.node,y.offset),e.addRange(n)))}}for(n=[],e=o;e=e.parentNode;)e.nodeType===1&&n.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<n.length;o++)e=n[o],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gs=w&&"documentMode"in document&&11>=document.documentMode,Mr=null,zr=null,Si=null,vs=!1;function Ba(e,n,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;vs||Mr==null||Mr!==wr(c)||(c=Mr,"selectionStart"in c&&Eo(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Si&&Un(Si,c)||(Si=c,c=l(zr,"onSelect"),0<c.length&&(n=new fo("onSelect","select",null,n,o),e.push({event:n,listeners:c}),n.target=Mr)))}function $n(e,n){var o={};return o[e.toLowerCase()]=n.toLowerCase(),o["Webkit"+e]="webkit"+n,o["Moz"+e]="moz"+n,o}var Dr={animationend:$n("Animation","AnimationEnd"),animationiteration:$n("Animation","AnimationIteration"),animationstart:$n("Animation","AnimationStart"),transitionend:$n("Transition","TransitionEnd")},Fn={},To={};w&&(To=document.createElement("div").style,"AnimationEvent"in window||(delete Dr.animationend.animation,delete Dr.animationiteration.animation,delete Dr.animationstart.animation),"TransitionEvent"in window||delete Dr.transitionend.transition);function ki(e){if(Fn[e])return Fn[e];if(!Dr[e])return e;var n=Dr[e],o;for(o in n)if(n.hasOwnProperty(o)&&o in To)return Fn[e]=n[o];return e}var Ua=ki("animationend"),hn=ki("animationiteration"),Po=ki("animationstart"),Co=ki("transitionend"),Br=new Map,$a="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qt(e,n){Br.set(e,n),p(n,[e])}for(var ir=0;ir<$a.length;ir++){var ys=$a[ir],Fa=ys.toLowerCase(),au=ys[0].toUpperCase()+ys.slice(1);Qt(Fa,"on"+au)}Qt(Ua,"onAnimationEnd"),Qt(hn,"onAnimationIteration"),Qt(Po,"onAnimationStart"),Qt("dblclick","onDoubleClick"),Qt("focusin","onFocus"),Qt("focusout","onBlur"),Qt(Co,"onTransitionEnd"),_("onMouseEnter",["mouseout","mouseover"]),_("onMouseLeave",["mouseout","mouseover"]),_("onPointerEnter",["pointerout","pointerover"]),_("onPointerLeave",["pointerout","pointerover"]),p("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),p("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),p("onBeforeInput",["compositionend","keypress","textInput","paste"]),p("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),p("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),p("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ur="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Wa=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ur));function Lo(e,n,o){var c=e.type||"unknown-event";e.currentTarget=o,ro(c,n,void 0,e),e.currentTarget=null}function Oo(e,n){n=(n&4)!==0;for(var o=0;o<e.length;o++){var c=e[o],f=c.event;c=c.listeners;e:{var m=void 0;if(n)for(var y=c.length-1;0<=y;y--){var k=c[y],E=k.instance,D=k.currentTarget;if(k=k.listener,E!==m&&f.isPropagationStopped())break e;Lo(f,k,D),m=E}else for(y=0;y<c.length;y++){if(k=c[y],E=k.instance,D=k.currentTarget,k=k.listener,E!==m&&f.isPropagationStopped())break e;Lo(f,k,D),m=E}}}if(ci)throw e=Gi,ci=!1,Gi=null,e}function $e(e,n){var o=n[Zr];o===void 0&&(o=n[Zr]=new Set);var c=e+"__bubble";o.has(c)||(Za(n,e,2,!1),o.add(c))}function Ro(e,n,o){var c=0;n&&(c|=4),Za(o,e,c,n)}var bi="_reactListening"+Math.random().toString(36).slice(2);function $r(e){if(!e[bi]){e[bi]=!0,u.forEach(function(o){o!=="selectionchange"&&(Wa.has(o)||Ro(o,!1,e),Ro(o,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[bi]||(n[bi]=!0,Ro("selectionchange",!1,n))}}function Za(e,n,o,c){switch(Ce(n)){case 1:var f=Kl;break;case 4:f=ba;break;default:f=vi}o=f.bind(null,n,o,e),f=void 0,!no||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(f=!0),c?f!==void 0?e.addEventListener(n,o,{capture:!0,passive:f}):e.addEventListener(n,o,!0):f!==void 0?e.addEventListener(n,o,{passive:f}):e.addEventListener(n,o,!1)}function t(e,n,o,c,f){var m=c;if((n&1)===0&&(n&2)===0&&c!==null)e:for(;;){if(c===null)return;var y=c.tag;if(y===3||y===4){var k=c.stateNode.containerInfo;if(k===f||k.nodeType===8&&k.parentNode===f)break;if(y===4)for(y=c.return;y!==null;){var E=y.tag;if((E===3||E===4)&&(E=y.stateNode.containerInfo,E===f||E.nodeType===8&&E.parentNode===f))return;y=y.return}for(;k!==null;){if(y=or(k),y===null)return;if(E=y.tag,E===5||E===6){c=m=y;continue e}k=k.parentNode}}c=c.return}Ki(function(){var D=m,q=eo(o),K=[];e:{var V=Br.get(e);if(V!==void 0){var ee=fo,re=e;switch(e){case"keypress":if(as(o)===0)break e;case"keydown":case"keyup":ee=La;break;case"focusin":re="focus",ee=ls;break;case"focusout":re="blur",ee=ls;break;case"beforeblur":case"afterblur":ee=ls;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=mo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=_o;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=wo;break;case Ua:case hn:case Po:ee=Yl;break;case Co:ee=nu;break;case"scroll":ee=Gl;break;case"wheel":ee=ru;break;case"copy":case"cut":case"paste":ee=go;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=Ra}var se=(n&4)!==0,ot=!se&&e==="scroll",I=se?V!==null?V+"Capture":null:V;se=[];for(var O=D,j;O!==null;){j=O;var J=j.stateNode;if(j.tag===5&&J!==null&&(j=J,I!==null&&(J=li(O,I),J!=null&&se.push(i(O,J,j)))),ot)break;O=O.return}0<se.length&&(V=new ee(V,re,null,o,q),K.push({event:V,listeners:se}))}}if((n&7)===0){e:{if(V=e==="mouseover"||e==="pointerover",ee=e==="mouseout"||e==="pointerout",V&&o!==Xs&&(re=o.relatedTarget||o.fromElement)&&(or(re)||re[Me]))break e;if((ee||V)&&(V=q.window===q?q:(V=q.ownerDocument)?V.defaultView||V.parentWindow:window,ee?(re=o.relatedTarget||o.toElement,ee=D,re=re?or(re):null,re!==null&&(ot=jn(re),re!==ot||re.tag!==5&&re.tag!==6)&&(re=null)):(ee=null,re=D),ee!==re)){if(se=mo,J="onMouseLeave",I="onMouseEnter",O="mouse",(e==="pointerout"||e==="pointerover")&&(se=Ra,J="onPointerLeave",I="onPointerEnter",O="pointer"),ot=ee==null?V:lr(ee),j=re==null?V:lr(re),V=new se(J,O+"leave",ee,o,q),V.target=ot,V.relatedTarget=j,J=null,or(q)===D&&(se=new se(I,O+"enter",re,o,q),se.target=j,se.relatedTarget=ot,J=se),ot=J,ee&&re)t:{for(se=ee,I=re,O=0,j=se;j;j=d(j))O++;for(j=0,J=I;J;J=d(J))j++;for(;0<O-j;)se=d(se),O--;for(;0<j-O;)I=d(I),j--;for(;O--;){if(se===I||I!==null&&se===I.alternate)break t;se=d(se),I=d(I)}se=null}else se=null;ee!==null&&g(K,V,ee,se,!1),re!==null&&ot!==null&&g(K,ot,re,se,!0)}}e:{if(V=D?lr(D):window,ee=V.nodeName&&V.nodeName.toLowerCase(),ee==="select"||ee==="input"&&V.type==="file")var le=ou;else if(ja(V))if(un)le=So;else{le=jr;var _e=ms}else(ee=V.nodeName)&&ee.toLowerCase()==="input"&&(V.type==="checkbox"||V.type==="radio")&&(le=_s);if(le&&(le=le(e,D))){hs(K,le,o,q);break e}_e&&_e(e,V,D),e==="focusout"&&(_e=V._wrapperState)&&_e.controlled&&V.type==="number"&&Gs(V,"number",V.value)}switch(_e=D?lr(D):window,e){case"focusin":(ja(_e)||_e.contentEditable==="true")&&(Mr=_e,zr=D,Si=null);break;case"focusout":Si=zr=Mr=null;break;case"mousedown":vs=!0;break;case"contextmenu":case"mouseup":case"dragend":vs=!1,Ba(K,o,q);break;case"selectionchange":if(gs)break;case"keydown":case"keyup":Ba(K,o,q)}var ge;if(Dn)e:{switch(e){case"compositionstart":var xe="onCompositionStart";break e;case"compositionend":xe="onCompositionEnd";break e;case"compositionupdate":xe="onCompositionUpdate";break e}xe=void 0}else kn?Nr(e,o)&&(xe="onCompositionEnd"):e==="keydown"&&o.keyCode===229&&(xe="onCompositionStart");xe&&(Na&&o.locale!=="ko"&&(kn||xe!=="onCompositionStart"?xe==="onCompositionEnd"&&kn&&(ge=ho()):(Mn=q,At="value"in Mn?Mn.value:Mn.textContent,kn=!0)),_e=l(D,xe),0<_e.length&&(xe=new vo(xe,e,null,o,q),K.push({event:xe,listeners:_e}),ge?xe.data=ge:(ge=xo(o),ge!==null&&(xe.data=ge)))),(ge=Sn?iu(e,o):Bn(e,o))&&(D=l(D,"onBeforeInput"),0<D.length&&(q=new vo("onBeforeInput","beforeinput",null,o,q),K.push({event:q,listeners:D}),q.data=ge))}Oo(K,n)})}function i(e,n,o){return{instance:e,listener:n,currentTarget:o}}function l(e,n){for(var o=n+"Capture",c=[];e!==null;){var f=e,m=f.stateNode;f.tag===5&&m!==null&&(f=m,m=li(e,o),m!=null&&c.unshift(i(e,m,f)),m=li(e,n),m!=null&&c.push(i(e,m,f))),e=e.return}return c}function d(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function g(e,n,o,c,f){for(var m=n._reactName,y=[];o!==null&&o!==c;){var k=o,E=k.alternate,D=k.stateNode;if(E!==null&&E===c)break;k.tag===5&&D!==null&&(k=D,f?(E=li(o,m),E!=null&&y.unshift(i(o,E,k))):f||(E=li(o,m),E!=null&&y.push(i(o,E,k)))),o=o.return}y.length!==0&&e.push({event:n,listeners:y})}var x=/\r\n?/g,b=/\u0000|\uFFFD/g;function A(e){return(typeof e=="string"?e:""+e).replace(x,`
`).replace(b,"")}function z(e,n,o){if(n=A(n),A(e)!==n&&o)throw Error(s(425))}function Z(){}var X=null,pe=null;function Ee(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var ht=typeof setTimeout=="function"?setTimeout:void 0,at=typeof clearTimeout=="function"?clearTimeout:void 0,It=typeof Promise=="function"?Promise:void 0,Tt=typeof queueMicrotask=="function"?queueMicrotask:typeof It<"u"?function(e){return It.resolve(null).then(e).catch(Fr)}:ht;function Fr(e){setTimeout(function(){throw e})}function Ao(e,n){var o=n,c=0;do{var f=o.nextSibling;if(e.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"){if(c===0){e.removeChild(f),Kt(n);return}c--}else o!=="$"&&o!=="$?"&&o!=="$!"||c++;o=f}while(o);Kt(n)}function Wn(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return e}function Ha(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var o=e.data;if(o==="$"||o==="$!"||o==="$?"){if(n===0)return e;n--}else o==="/$"&&n++}e=e.previousSibling}return null}var sr=Math.random().toString(36).slice(2),dn="__reactFiber$"+sr,Wr="__reactProps$"+sr,Me="__reactContainer$"+sr,Zr="__reactEvents$"+sr,lu="__reactListeners$"+sr,uu="__reactHandles$"+sr;function or(e){var n=e[dn];if(n)return n;for(var o=e.parentNode;o;){if(n=o[Me]||o[dn]){if(o=n.alternate,n.child!==null||o!==null&&o.child!==null)for(e=Ha(e);e!==null;){if(o=e[dn])return o;e=Ha(e)}return n}e=o,o=e.parentNode}return null}function ar(e){return e=e[dn]||e[Me],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function lr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(s(33))}function ws(e){return e[Wr]||null}var cu=[],xs=-1;function Hr(e){return{current:e}}function Ke(e){0>xs||(e.current=cu[xs],cu[xs]=null,xs--)}function He(e,n){xs++,cu[xs]=e.current,e.current=n}var Vr={},Pt=Hr(Vr),Bt=Hr(!1),Ei=Vr;function Ss(e,n){var o=e.type.contextTypes;if(!o)return Vr;var c=e.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===n)return c.__reactInternalMemoizedMaskedChildContext;var f={},m;for(m in o)f[m]=n[m];return c&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=f),f}function Ut(e){return e=e.childContextTypes,e!=null}function Va(){Ke(Bt),Ke(Pt)}function Yc(e,n,o){if(Pt.current!==Vr)throw Error(s(168));He(Pt,n),He(Bt,o)}function Qc(e,n,o){var c=e.stateNode;if(n=n.childContextTypes,typeof c.getChildContext!="function")return o;c=c.getChildContext();for(var f in c)if(!(f in n))throw Error(s(108,Le(e)||"Unknown",f));return W({},o,c)}function qa(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Vr,Ei=Pt.current,He(Pt,e),He(Bt,Bt.current),!0}function Xc(e,n,o){var c=e.stateNode;if(!c)throw Error(s(169));o?(e=Qc(e,n,Ei),c.__reactInternalMemoizedMergedChildContext=e,Ke(Bt),Ke(Pt),He(Pt,e)):Ke(Bt),He(Bt,o)}var ur=null,Ka=!1,hu=!1;function eh(e){ur===null?ur=[e]:ur.push(e)}function zf(e){Ka=!0,eh(e)}function qr(){if(!hu&&ur!==null){hu=!0;var e=0,n=Ae;try{var o=ur;for(Ae=1;e<o.length;e++){var c=o[e];do c=c(!0);while(c!==null)}ur=null,Ka=!1}catch(f){throw ur!==null&&(ur=ur.slice(e+1)),xa(oo,qr),f}finally{Ae=n,hu=!1}}return null}var ks=[],bs=0,Ga=null,Ja=0,fn=[],pn=0,Ti=null,cr=1,hr="";function Pi(e,n){ks[bs++]=Ja,ks[bs++]=Ga,Ga=e,Ja=n}function th(e,n,o){fn[pn++]=cr,fn[pn++]=hr,fn[pn++]=Ti,Ti=e;var c=cr;e=hr;var f=32-be(c)-1;c&=~(1<<f),o+=1;var m=32-be(n)+f;if(30<m){var y=f-f%5;m=(c&(1<<y)-1).toString(32),c>>=y,f-=y,cr=1<<32-be(n)+f|o<<f|c,hr=m+e}else cr=1<<m|o<<f|c,hr=e}function du(e){e.return!==null&&(Pi(e,1),th(e,1,0))}function fu(e){for(;e===Ga;)Ga=ks[--bs],ks[bs]=null,Ja=ks[--bs],ks[bs]=null;for(;e===Ti;)Ti=fn[--pn],fn[pn]=null,hr=fn[--pn],fn[pn]=null,cr=fn[--pn],fn[pn]=null}var Xt=null,en=null,Ge=!1,En=null;function nh(e,n){var o=vn(5,null,null,0);o.elementType="DELETED",o.stateNode=n,o.return=e,n=e.deletions,n===null?(e.deletions=[o],e.flags|=16):n.push(o)}function rh(e,n){switch(e.tag){case 5:var o=e.type;return n=n.nodeType!==1||o.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(e.stateNode=n,Xt=e,en=Wn(n.firstChild),!0):!1;case 6:return n=e.pendingProps===""||n.nodeType!==3?null:n,n!==null?(e.stateNode=n,Xt=e,en=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(o=Ti!==null?{id:cr,overflow:hr}:null,e.memoizedState={dehydrated:n,treeContext:o,retryLane:1073741824},o=vn(18,null,null,0),o.stateNode=n,o.return=e,e.child=o,Xt=e,en=null,!0):!1;default:return!1}}function pu(e){return(e.mode&1)!==0&&(e.flags&128)===0}function mu(e){if(Ge){var n=en;if(n){var o=n;if(!rh(e,n)){if(pu(e))throw Error(s(418));n=Wn(o.nextSibling);var c=Xt;n&&rh(e,n)?nh(c,o):(e.flags=e.flags&-4097|2,Ge=!1,Xt=e)}}else{if(pu(e))throw Error(s(418));e.flags=e.flags&-4097|2,Ge=!1,Xt=e}}}function ih(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Xt=e}function Ya(e){if(e!==Xt)return!1;if(!Ge)return ih(e),Ge=!0,!1;var n;if((n=e.tag!==3)&&!(n=e.tag!==5)&&(n=e.type,n=n!=="head"&&n!=="body"&&!Ee(e.type,e.memoizedProps)),n&&(n=en)){if(pu(e))throw sh(),Error(s(418));for(;n;)nh(e,n),n=Wn(n.nextSibling)}if(ih(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));e:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8){var o=e.data;if(o==="/$"){if(n===0){en=Wn(e.nextSibling);break e}n--}else o!=="$"&&o!=="$!"&&o!=="$?"||n++}e=e.nextSibling}en=null}}else en=Xt?Wn(e.stateNode.nextSibling):null;return!0}function sh(){for(var e=en;e;)e=Wn(e.nextSibling)}function Es(){en=Xt=null,Ge=!1}function _u(e){En===null?En=[e]:En.push(e)}var Df=ie.ReactCurrentBatchConfig;function No(e,n,o){if(e=o.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(s(309));var c=o.stateNode}if(!c)throw Error(s(147,e));var f=c,m=""+e;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===m?n.ref:(n=function(y){var k=f.refs;y===null?delete k[m]:k[m]=y},n._stringRef=m,n)}if(typeof e!="string")throw Error(s(284));if(!o._owner)throw Error(s(290,e))}return e}function Qa(e,n){throw e=Object.prototype.toString.call(n),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e))}function oh(e){var n=e._init;return n(e._payload)}function ah(e){function n(I,O){if(e){var j=I.deletions;j===null?(I.deletions=[O],I.flags|=16):j.push(O)}}function o(I,O){if(!e)return null;for(;O!==null;)n(I,O),O=O.sibling;return null}function c(I,O){for(I=new Map;O!==null;)O.key!==null?I.set(O.key,O):I.set(O.index,O),O=O.sibling;return I}function f(I,O){return I=ti(I,O),I.index=0,I.sibling=null,I}function m(I,O,j){return I.index=j,e?(j=I.alternate,j!==null?(j=j.index,j<O?(I.flags|=2,O):j):(I.flags|=2,O)):(I.flags|=1048576,O)}function y(I){return e&&I.alternate===null&&(I.flags|=2),I}function k(I,O,j,J){return O===null||O.tag!==6?(O=ac(j,I.mode,J),O.return=I,O):(O=f(O,j),O.return=I,O)}function E(I,O,j,J){var le=j.type;return le===ke?q(I,O,j.props.children,J,j.key):O!==null&&(O.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===De&&oh(le)===O.type)?(J=f(O,j.props),J.ref=No(I,O,j),J.return=I,J):(J=Sl(j.type,j.key,j.props,null,I.mode,J),J.ref=No(I,O,j),J.return=I,J)}function D(I,O,j,J){return O===null||O.tag!==4||O.stateNode.containerInfo!==j.containerInfo||O.stateNode.implementation!==j.implementation?(O=lc(j,I.mode,J),O.return=I,O):(O=f(O,j.children||[]),O.return=I,O)}function q(I,O,j,J,le){return O===null||O.tag!==7?(O=ji(j,I.mode,J,le),O.return=I,O):(O=f(O,j),O.return=I,O)}function K(I,O,j){if(typeof O=="string"&&O!==""||typeof O=="number")return O=ac(""+O,I.mode,j),O.return=I,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case Oe:return j=Sl(O.type,O.key,O.props,null,I.mode,j),j.ref=No(I,null,O),j.return=I,j;case he:return O=lc(O,I.mode,j),O.return=I,O;case De:var J=O._init;return K(I,J(O._payload),j)}if(xr(O)||me(O))return O=ji(O,I.mode,j,null),O.return=I,O;Qa(I,O)}return null}function V(I,O,j,J){var le=O!==null?O.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return le!==null?null:k(I,O,""+j,J);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Oe:return j.key===le?E(I,O,j,J):null;case he:return j.key===le?D(I,O,j,J):null;case De:return le=j._init,V(I,O,le(j._payload),J)}if(xr(j)||me(j))return le!==null?null:q(I,O,j,J,null);Qa(I,j)}return null}function ee(I,O,j,J,le){if(typeof J=="string"&&J!==""||typeof J=="number")return I=I.get(j)||null,k(O,I,""+J,le);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case Oe:return I=I.get(J.key===null?j:J.key)||null,E(O,I,J,le);case he:return I=I.get(J.key===null?j:J.key)||null,D(O,I,J,le);case De:var _e=J._init;return ee(I,O,j,_e(J._payload),le)}if(xr(J)||me(J))return I=I.get(j)||null,q(O,I,J,le,null);Qa(O,J)}return null}function re(I,O,j,J){for(var le=null,_e=null,ge=O,xe=O=0,gt=null;ge!==null&&xe<j.length;xe++){ge.index>xe?(gt=ge,ge=null):gt=ge.sibling;var je=V(I,ge,j[xe],J);if(je===null){ge===null&&(ge=gt);break}e&&ge&&je.alternate===null&&n(I,ge),O=m(je,O,xe),_e===null?le=je:_e.sibling=je,_e=je,ge=gt}if(xe===j.length)return o(I,ge),Ge&&Pi(I,xe),le;if(ge===null){for(;xe<j.length;xe++)ge=K(I,j[xe],J),ge!==null&&(O=m(ge,O,xe),_e===null?le=ge:_e.sibling=ge,_e=ge);return Ge&&Pi(I,xe),le}for(ge=c(I,ge);xe<j.length;xe++)gt=ee(ge,I,xe,j[xe],J),gt!==null&&(e&&gt.alternate!==null&&ge.delete(gt.key===null?xe:gt.key),O=m(gt,O,xe),_e===null?le=gt:_e.sibling=gt,_e=gt);return e&&ge.forEach(function(ni){return n(I,ni)}),Ge&&Pi(I,xe),le}function se(I,O,j,J){var le=me(j);if(typeof le!="function")throw Error(s(150));if(j=le.call(j),j==null)throw Error(s(151));for(var _e=le=null,ge=O,xe=O=0,gt=null,je=j.next();ge!==null&&!je.done;xe++,je=j.next()){ge.index>xe?(gt=ge,ge=null):gt=ge.sibling;var ni=V(I,ge,je.value,J);if(ni===null){ge===null&&(ge=gt);break}e&&ge&&ni.alternate===null&&n(I,ge),O=m(ni,O,xe),_e===null?le=ni:_e.sibling=ni,_e=ni,ge=gt}if(je.done)return o(I,ge),Ge&&Pi(I,xe),le;if(ge===null){for(;!je.done;xe++,je=j.next())je=K(I,je.value,J),je!==null&&(O=m(je,O,xe),_e===null?le=je:_e.sibling=je,_e=je);return Ge&&Pi(I,xe),le}for(ge=c(I,ge);!je.done;xe++,je=j.next())je=ee(ge,I,xe,je.value,J),je!==null&&(e&&je.alternate!==null&&ge.delete(je.key===null?xe:je.key),O=m(je,O,xe),_e===null?le=je:_e.sibling=je,_e=je);return e&&ge.forEach(function(gp){return n(I,gp)}),Ge&&Pi(I,xe),le}function ot(I,O,j,J){if(typeof j=="object"&&j!==null&&j.type===ke&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case Oe:e:{for(var le=j.key,_e=O;_e!==null;){if(_e.key===le){if(le=j.type,le===ke){if(_e.tag===7){o(I,_e.sibling),O=f(_e,j.props.children),O.return=I,I=O;break e}}else if(_e.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===De&&oh(le)===_e.type){o(I,_e.sibling),O=f(_e,j.props),O.ref=No(I,_e,j),O.return=I,I=O;break e}o(I,_e);break}else n(I,_e);_e=_e.sibling}j.type===ke?(O=ji(j.props.children,I.mode,J,j.key),O.return=I,I=O):(J=Sl(j.type,j.key,j.props,null,I.mode,J),J.ref=No(I,O,j),J.return=I,I=J)}return y(I);case he:e:{for(_e=j.key;O!==null;){if(O.key===_e)if(O.tag===4&&O.stateNode.containerInfo===j.containerInfo&&O.stateNode.implementation===j.implementation){o(I,O.sibling),O=f(O,j.children||[]),O.return=I,I=O;break e}else{o(I,O);break}else n(I,O);O=O.sibling}O=lc(j,I.mode,J),O.return=I,I=O}return y(I);case De:return _e=j._init,ot(I,O,_e(j._payload),J)}if(xr(j))return re(I,O,j,J);if(me(j))return se(I,O,j,J);Qa(I,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,O!==null&&O.tag===6?(o(I,O.sibling),O=f(O,j),O.return=I,I=O):(o(I,O),O=ac(j,I.mode,J),O.return=I,I=O),y(I)):o(I,O)}return ot}var Ts=ah(!0),lh=ah(!1),Xa=Hr(null),el=null,Ps=null,gu=null;function vu(){gu=Ps=el=null}function yu(e){var n=Xa.current;Ke(Xa),e._currentValue=n}function wu(e,n,o){for(;e!==null;){var c=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,c!==null&&(c.childLanes|=n)):c!==null&&(c.childLanes&n)!==n&&(c.childLanes|=n),e===o)break;e=e.return}}function Cs(e,n){el=e,gu=Ps=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&n)!==0&&($t=!0),e.firstContext=null)}function mn(e){var n=e._currentValue;if(gu!==e)if(e={context:e,memoizedValue:n,next:null},Ps===null){if(el===null)throw Error(s(308));Ps=e,el.dependencies={lanes:0,firstContext:e}}else Ps=Ps.next=e;return n}var Ci=null;function xu(e){Ci===null?Ci=[e]:Ci.push(e)}function uh(e,n,o,c){var f=n.interleaved;return f===null?(o.next=o,xu(n)):(o.next=f.next,f.next=o),n.interleaved=o,dr(e,c)}function dr(e,n){e.lanes|=n;var o=e.alternate;for(o!==null&&(o.lanes|=n),o=e,e=e.return;e!==null;)e.childLanes|=n,o=e.alternate,o!==null&&(o.childLanes|=n),o=e,e=e.return;return o.tag===3?o.stateNode:null}var Kr=!1;function Su(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ch(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function fr(e,n){return{eventTime:e,lane:n,tag:0,payload:null,callback:null,next:null}}function Gr(e,n,o){var c=e.updateQueue;if(c===null)return null;if(c=c.shared,(Ne&2)!==0){var f=c.pending;return f===null?n.next=n:(n.next=f.next,f.next=n),c.pending=n,dr(e,o)}return f=c.interleaved,f===null?(n.next=n,xu(c)):(n.next=f.next,f.next=n),c.interleaved=n,dr(e,o)}function tl(e,n,o){if(n=n.updateQueue,n!==null&&(n=n.shared,(o&4194240)!==0)){var c=n.lanes;c&=e.pendingLanes,o|=c,n.lanes=o,wn(e,o)}}function hh(e,n){var o=e.updateQueue,c=e.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var f=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var y={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};m===null?f=m=y:m=m.next=y,o=o.next}while(o!==null);m===null?f=m=n:m=m.next=n}else f=m=n;o={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:c.shared,effects:c.effects},e.updateQueue=o;return}e=o.lastBaseUpdate,e===null?o.firstBaseUpdate=n:e.next=n,o.lastBaseUpdate=n}function nl(e,n,o,c){var f=e.updateQueue;Kr=!1;var m=f.firstBaseUpdate,y=f.lastBaseUpdate,k=f.shared.pending;if(k!==null){f.shared.pending=null;var E=k,D=E.next;E.next=null,y===null?m=D:y.next=D,y=E;var q=e.alternate;q!==null&&(q=q.updateQueue,k=q.lastBaseUpdate,k!==y&&(k===null?q.firstBaseUpdate=D:k.next=D,q.lastBaseUpdate=E))}if(m!==null){var K=f.baseState;y=0,q=D=E=null,k=m;do{var V=k.lane,ee=k.eventTime;if((c&V)===V){q!==null&&(q=q.next={eventTime:ee,lane:0,tag:k.tag,payload:k.payload,callback:k.callback,next:null});e:{var re=e,se=k;switch(V=n,ee=o,se.tag){case 1:if(re=se.payload,typeof re=="function"){K=re.call(ee,K,V);break e}K=re;break e;case 3:re.flags=re.flags&-65537|128;case 0:if(re=se.payload,V=typeof re=="function"?re.call(ee,K,V):re,V==null)break e;K=W({},K,V);break e;case 2:Kr=!0}}k.callback!==null&&k.lane!==0&&(e.flags|=64,V=f.effects,V===null?f.effects=[k]:V.push(k))}else ee={eventTime:ee,lane:V,tag:k.tag,payload:k.payload,callback:k.callback,next:null},q===null?(D=q=ee,E=K):q=q.next=ee,y|=V;if(k=k.next,k===null){if(k=f.shared.pending,k===null)break;V=k,k=V.next,V.next=null,f.lastBaseUpdate=V,f.shared.pending=null}}while(!0);if(q===null&&(E=K),f.baseState=E,f.firstBaseUpdate=D,f.lastBaseUpdate=q,n=f.shared.interleaved,n!==null){f=n;do y|=f.lane,f=f.next;while(f!==n)}else m===null&&(f.shared.lanes=0);Ri|=y,e.lanes=y,e.memoizedState=K}}function dh(e,n,o){if(e=n.effects,n.effects=null,e!==null)for(n=0;n<e.length;n++){var c=e[n],f=c.callback;if(f!==null){if(c.callback=null,c=o,typeof f!="function")throw Error(s(191,f));f.call(c)}}}var Io={},Zn=Hr(Io),jo=Hr(Io),Mo=Hr(Io);function Li(e){if(e===Io)throw Error(s(174));return e}function ku(e,n){switch(He(Mo,n),He(jo,e),He(Zn,Io),e=n.nodeType,e){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:Hi(null,"");break;default:e=e===8?n.parentNode:n,n=e.namespaceURI||null,e=e.tagName,n=Hi(n,e)}Ke(Zn),He(Zn,n)}function Ls(){Ke(Zn),Ke(jo),Ke(Mo)}function fh(e){Li(Mo.current);var n=Li(Zn.current),o=Hi(n,e.type);n!==o&&(He(jo,e),He(Zn,o))}function bu(e){jo.current===e&&(Ke(Zn),Ke(jo))}var Xe=Hr(0);function rl(e){for(var n=e;n!==null;){if(n.tag===13){var o=n.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Eu=[];function Tu(){for(var e=0;e<Eu.length;e++)Eu[e]._workInProgressVersionPrimary=null;Eu.length=0}var il=ie.ReactCurrentDispatcher,Pu=ie.ReactCurrentBatchConfig,Oi=0,et=null,dt=null,mt=null,sl=!1,zo=!1,Do=0,Bf=0;function Ct(){throw Error(s(321))}function Cu(e,n){if(n===null)return!1;for(var o=0;o<n.length&&o<e.length;o++)if(!Yt(e[o],n[o]))return!1;return!0}function Lu(e,n,o,c,f,m){if(Oi=m,et=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,il.current=e===null||e.memoizedState===null?Wf:Zf,e=o(c,f),zo){m=0;do{if(zo=!1,Do=0,25<=m)throw Error(s(301));m+=1,mt=dt=null,n.updateQueue=null,il.current=Hf,e=o(c,f)}while(zo)}if(il.current=ll,n=dt!==null&&dt.next!==null,Oi=0,mt=dt=et=null,sl=!1,n)throw Error(s(300));return e}function Ou(){var e=Do!==0;return Do=0,e}function Hn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mt===null?et.memoizedState=mt=e:mt=mt.next=e,mt}function _n(){if(dt===null){var e=et.alternate;e=e!==null?e.memoizedState:null}else e=dt.next;var n=mt===null?et.memoizedState:mt.next;if(n!==null)mt=n,dt=e;else{if(e===null)throw Error(s(310));dt=e,e={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},mt===null?et.memoizedState=mt=e:mt=mt.next=e}return mt}function Bo(e,n){return typeof n=="function"?n(e):n}function Ru(e){var n=_n(),o=n.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=e;var c=dt,f=c.baseQueue,m=o.pending;if(m!==null){if(f!==null){var y=f.next;f.next=m.next,m.next=y}c.baseQueue=f=m,o.pending=null}if(f!==null){m=f.next,c=c.baseState;var k=y=null,E=null,D=m;do{var q=D.lane;if((Oi&q)===q)E!==null&&(E=E.next={lane:0,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null}),c=D.hasEagerState?D.eagerState:e(c,D.action);else{var K={lane:q,action:D.action,hasEagerState:D.hasEagerState,eagerState:D.eagerState,next:null};E===null?(k=E=K,y=c):E=E.next=K,et.lanes|=q,Ri|=q}D=D.next}while(D!==null&&D!==m);E===null?y=c:E.next=k,Yt(c,n.memoizedState)||($t=!0),n.memoizedState=c,n.baseState=y,n.baseQueue=E,o.lastRenderedState=c}if(e=o.interleaved,e!==null){f=e;do m=f.lane,et.lanes|=m,Ri|=m,f=f.next;while(f!==e)}else f===null&&(o.lanes=0);return[n.memoizedState,o.dispatch]}function Au(e){var n=_n(),o=n.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=e;var c=o.dispatch,f=o.pending,m=n.memoizedState;if(f!==null){o.pending=null;var y=f=f.next;do m=e(m,y.action),y=y.next;while(y!==f);Yt(m,n.memoizedState)||($t=!0),n.memoizedState=m,n.baseQueue===null&&(n.baseState=m),o.lastRenderedState=m}return[m,c]}function ph(){}function mh(e,n){var o=et,c=_n(),f=n(),m=!Yt(c.memoizedState,f);if(m&&(c.memoizedState=f,$t=!0),c=c.queue,Nu(vh.bind(null,o,c,e),[e]),c.getSnapshot!==n||m||mt!==null&&mt.memoizedState.tag&1){if(o.flags|=2048,Uo(9,gh.bind(null,o,c,f,n),void 0,null),_t===null)throw Error(s(349));(Oi&30)!==0||_h(o,n,f)}return f}function _h(e,n,o){e.flags|=16384,e={getSnapshot:n,value:o},n=et.updateQueue,n===null?(n={lastEffect:null,stores:null},et.updateQueue=n,n.stores=[e]):(o=n.stores,o===null?n.stores=[e]:o.push(e))}function gh(e,n,o,c){n.value=o,n.getSnapshot=c,yh(n)&&wh(e)}function vh(e,n,o){return o(function(){yh(n)&&wh(e)})}function yh(e){var n=e.getSnapshot;e=e.value;try{var o=n();return!Yt(e,o)}catch{return!0}}function wh(e){var n=dr(e,1);n!==null&&Ln(n,e,1,-1)}function xh(e){var n=Hn();return typeof e=="function"&&(e=e()),n.memoizedState=n.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bo,lastRenderedState:e},n.queue=e,e=e.dispatch=Ff.bind(null,et,e),[n.memoizedState,e]}function Uo(e,n,o,c){return e={tag:e,create:n,destroy:o,deps:c,next:null},n=et.updateQueue,n===null?(n={lastEffect:null,stores:null},et.updateQueue=n,n.lastEffect=e.next=e):(o=n.lastEffect,o===null?n.lastEffect=e.next=e:(c=o.next,o.next=e,e.next=c,n.lastEffect=e)),e}function Sh(){return _n().memoizedState}function ol(e,n,o,c){var f=Hn();et.flags|=e,f.memoizedState=Uo(1|n,o,void 0,c===void 0?null:c)}function al(e,n,o,c){var f=_n();c=c===void 0?null:c;var m=void 0;if(dt!==null){var y=dt.memoizedState;if(m=y.destroy,c!==null&&Cu(c,y.deps)){f.memoizedState=Uo(n,o,m,c);return}}et.flags|=e,f.memoizedState=Uo(1|n,o,m,c)}function kh(e,n){return ol(8390656,8,e,n)}function Nu(e,n){return al(2048,8,e,n)}function bh(e,n){return al(4,2,e,n)}function Eh(e,n){return al(4,4,e,n)}function Th(e,n){if(typeof n=="function")return e=e(),n(e),function(){n(null)};if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function Ph(e,n,o){return o=o!=null?o.concat([e]):null,al(4,4,Th.bind(null,n,e),o)}function Iu(){}function Ch(e,n){var o=_n();n=n===void 0?null:n;var c=o.memoizedState;return c!==null&&n!==null&&Cu(n,c[1])?c[0]:(o.memoizedState=[e,n],e)}function Lh(e,n){var o=_n();n=n===void 0?null:n;var c=o.memoizedState;return c!==null&&n!==null&&Cu(n,c[1])?c[0]:(e=e(),o.memoizedState=[e,n],e)}function Oh(e,n,o){return(Oi&21)===0?(e.baseState&&(e.baseState=!1,$t=!0),e.memoizedState=o):(Yt(o,n)||(o=ka(),et.lanes|=o,Ri|=o,e.baseState=!0),n)}function Uf(e,n){var o=Ae;Ae=o!==0&&4>o?o:4,e(!0);var c=Pu.transition;Pu.transition={};try{e(!1),n()}finally{Ae=o,Pu.transition=c}}function Rh(){return _n().memoizedState}function $f(e,n,o){var c=Xr(e);if(o={lane:c,action:o,hasEagerState:!1,eagerState:null,next:null},Ah(e))Nh(n,o);else if(o=uh(e,n,o,c),o!==null){var f=Mt();Ln(o,e,c,f),Ih(o,n,c)}}function Ff(e,n,o){var c=Xr(e),f={lane:c,action:o,hasEagerState:!1,eagerState:null,next:null};if(Ah(e))Nh(n,f);else{var m=e.alternate;if(e.lanes===0&&(m===null||m.lanes===0)&&(m=n.lastRenderedReducer,m!==null))try{var y=n.lastRenderedState,k=m(y,o);if(f.hasEagerState=!0,f.eagerState=k,Yt(k,y)){var E=n.interleaved;E===null?(f.next=f,xu(n)):(f.next=E.next,E.next=f),n.interleaved=f;return}}catch{}finally{}o=uh(e,n,f,c),o!==null&&(f=Mt(),Ln(o,e,c,f),Ih(o,n,c))}}function Ah(e){var n=e.alternate;return e===et||n!==null&&n===et}function Nh(e,n){zo=sl=!0;var o=e.pending;o===null?n.next=n:(n.next=o.next,o.next=n),e.pending=n}function Ih(e,n,o){if((o&4194240)!==0){var c=n.lanes;c&=e.pendingLanes,o|=c,n.lanes=o,wn(e,o)}}var ll={readContext:mn,useCallback:Ct,useContext:Ct,useEffect:Ct,useImperativeHandle:Ct,useInsertionEffect:Ct,useLayoutEffect:Ct,useMemo:Ct,useReducer:Ct,useRef:Ct,useState:Ct,useDebugValue:Ct,useDeferredValue:Ct,useTransition:Ct,useMutableSource:Ct,useSyncExternalStore:Ct,useId:Ct,unstable_isNewReconciler:!1},Wf={readContext:mn,useCallback:function(e,n){return Hn().memoizedState=[e,n===void 0?null:n],e},useContext:mn,useEffect:kh,useImperativeHandle:function(e,n,o){return o=o!=null?o.concat([e]):null,ol(4194308,4,Th.bind(null,n,e),o)},useLayoutEffect:function(e,n){return ol(4194308,4,e,n)},useInsertionEffect:function(e,n){return ol(4,2,e,n)},useMemo:function(e,n){var o=Hn();return n=n===void 0?null:n,e=e(),o.memoizedState=[e,n],e},useReducer:function(e,n,o){var c=Hn();return n=o!==void 0?o(n):n,c.memoizedState=c.baseState=n,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},c.queue=e,e=e.dispatch=$f.bind(null,et,e),[c.memoizedState,e]},useRef:function(e){var n=Hn();return e={current:e},n.memoizedState=e},useState:xh,useDebugValue:Iu,useDeferredValue:function(e){return Hn().memoizedState=e},useTransition:function(){var e=xh(!1),n=e[0];return e=Uf.bind(null,e[1]),Hn().memoizedState=e,[n,e]},useMutableSource:function(){},useSyncExternalStore:function(e,n,o){var c=et,f=Hn();if(Ge){if(o===void 0)throw Error(s(407));o=o()}else{if(o=n(),_t===null)throw Error(s(349));(Oi&30)!==0||_h(c,n,o)}f.memoizedState=o;var m={value:o,getSnapshot:n};return f.queue=m,kh(vh.bind(null,c,m,e),[e]),c.flags|=2048,Uo(9,gh.bind(null,c,m,o,n),void 0,null),o},useId:function(){var e=Hn(),n=_t.identifierPrefix;if(Ge){var o=hr,c=cr;o=(c&~(1<<32-be(c)-1)).toString(32)+o,n=":"+n+"R"+o,o=Do++,0<o&&(n+="H"+o.toString(32)),n+=":"}else o=Bf++,n=":"+n+"r"+o.toString(32)+":";return e.memoizedState=n},unstable_isNewReconciler:!1},Zf={readContext:mn,useCallback:Ch,useContext:mn,useEffect:Nu,useImperativeHandle:Ph,useInsertionEffect:bh,useLayoutEffect:Eh,useMemo:Lh,useReducer:Ru,useRef:Sh,useState:function(){return Ru(Bo)},useDebugValue:Iu,useDeferredValue:function(e){var n=_n();return Oh(n,dt.memoizedState,e)},useTransition:function(){var e=Ru(Bo)[0],n=_n().memoizedState;return[e,n]},useMutableSource:ph,useSyncExternalStore:mh,useId:Rh,unstable_isNewReconciler:!1},Hf={readContext:mn,useCallback:Ch,useContext:mn,useEffect:Nu,useImperativeHandle:Ph,useInsertionEffect:bh,useLayoutEffect:Eh,useMemo:Lh,useReducer:Au,useRef:Sh,useState:function(){return Au(Bo)},useDebugValue:Iu,useDeferredValue:function(e){var n=_n();return dt===null?n.memoizedState=e:Oh(n,dt.memoizedState,e)},useTransition:function(){var e=Au(Bo)[0],n=_n().memoizedState;return[e,n]},useMutableSource:ph,useSyncExternalStore:mh,useId:Rh,unstable_isNewReconciler:!1};function Tn(e,n){if(e&&e.defaultProps){n=W({},n),e=e.defaultProps;for(var o in e)n[o]===void 0&&(n[o]=e[o]);return n}return n}function ju(e,n,o,c){n=e.memoizedState,o=o(c,n),o=o==null?n:W({},n,o),e.memoizedState=o,e.lanes===0&&(e.updateQueue.baseState=o)}var ul={isMounted:function(e){return(e=e._reactInternals)?jn(e)===e:!1},enqueueSetState:function(e,n,o){e=e._reactInternals;var c=Mt(),f=Xr(e),m=fr(c,f);m.payload=n,o!=null&&(m.callback=o),n=Gr(e,m,f),n!==null&&(Ln(n,e,f,c),tl(n,e,f))},enqueueReplaceState:function(e,n,o){e=e._reactInternals;var c=Mt(),f=Xr(e),m=fr(c,f);m.tag=1,m.payload=n,o!=null&&(m.callback=o),n=Gr(e,m,f),n!==null&&(Ln(n,e,f,c),tl(n,e,f))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var o=Mt(),c=Xr(e),f=fr(o,c);f.tag=2,n!=null&&(f.callback=n),n=Gr(e,f,c),n!==null&&(Ln(n,e,c,o),tl(n,e,c))}};function jh(e,n,o,c,f,m,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(c,m,y):n.prototype&&n.prototype.isPureReactComponent?!Un(o,c)||!Un(f,m):!0}function Mh(e,n,o){var c=!1,f=Vr,m=n.contextType;return typeof m=="object"&&m!==null?m=mn(m):(f=Ut(n)?Ei:Pt.current,c=n.contextTypes,m=(c=c!=null)?Ss(e,f):Vr),n=new n(o,m),e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=ul,e.stateNode=n,n._reactInternals=e,c&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=f,e.__reactInternalMemoizedMaskedChildContext=m),n}function zh(e,n,o,c){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(o,c),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(o,c),n.state!==e&&ul.enqueueReplaceState(n,n.state,null)}function Mu(e,n,o,c){var f=e.stateNode;f.props=o,f.state=e.memoizedState,f.refs={},Su(e);var m=n.contextType;typeof m=="object"&&m!==null?f.context=mn(m):(m=Ut(n)?Ei:Pt.current,f.context=Ss(e,m)),f.state=e.memoizedState,m=n.getDerivedStateFromProps,typeof m=="function"&&(ju(e,n,m,o),f.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(n=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),n!==f.state&&ul.enqueueReplaceState(f,f.state,null),nl(e,o,f,c),f.state=e.memoizedState),typeof f.componentDidMount=="function"&&(e.flags|=4194308)}function Os(e,n){try{var o="",c=n;do o+=oe(c),c=c.return;while(c);var f=o}catch(m){f=`
Error generating stack: `+m.message+`
`+m.stack}return{value:e,source:n,stack:f,digest:null}}function zu(e,n,o){return{value:e,source:null,stack:o??null,digest:n??null}}function Du(e,n){try{console.error(n.value)}catch(o){setTimeout(function(){throw o})}}var Vf=typeof WeakMap=="function"?WeakMap:Map;function Dh(e,n,o){o=fr(-1,o),o.tag=3,o.payload={element:null};var c=n.value;return o.callback=function(){_l||(_l=!0,Xu=c),Du(e,n)},o}function Bh(e,n,o){o=fr(-1,o),o.tag=3;var c=e.type.getDerivedStateFromError;if(typeof c=="function"){var f=n.value;o.payload=function(){return c(f)},o.callback=function(){Du(e,n)}}var m=e.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(o.callback=function(){Du(e,n),typeof c!="function"&&(Yr===null?Yr=new Set([this]):Yr.add(this));var y=n.stack;this.componentDidCatch(n.value,{componentStack:y!==null?y:""})}),o}function Uh(e,n,o){var c=e.pingCache;if(c===null){c=e.pingCache=new Vf;var f=new Set;c.set(n,f)}else f=c.get(n),f===void 0&&(f=new Set,c.set(n,f));f.has(o)||(f.add(o),e=op.bind(null,e,n,o),n.then(e,e))}function $h(e){do{var n;if((n=e.tag===13)&&(n=e.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return e;e=e.return}while(e!==null);return null}function Fh(e,n,o,c,f){return(e.mode&1)===0?(e===n?e.flags|=65536:(e.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(n=fr(-1,1),n.tag=2,Gr(o,n,1))),o.lanes|=1),e):(e.flags|=65536,e.lanes=f,e)}var qf=ie.ReactCurrentOwner,$t=!1;function jt(e,n,o,c){n.child=e===null?lh(n,null,o,c):Ts(n,e.child,o,c)}function Wh(e,n,o,c,f){o=o.render;var m=n.ref;return Cs(n,f),c=Lu(e,n,o,c,m,f),o=Ou(),e!==null&&!$t?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~f,pr(e,n,f)):(Ge&&o&&du(n),n.flags|=1,jt(e,n,c,f),n.child)}function Zh(e,n,o,c,f){if(e===null){var m=o.type;return typeof m=="function"&&!oc(m)&&m.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(n.tag=15,n.type=m,Hh(e,n,m,c,f)):(e=Sl(o.type,null,c,n,n.mode,f),e.ref=n.ref,e.return=n,n.child=e)}if(m=e.child,(e.lanes&f)===0){var y=m.memoizedProps;if(o=o.compare,o=o!==null?o:Un,o(y,c)&&e.ref===n.ref)return pr(e,n,f)}return n.flags|=1,e=ti(m,c),e.ref=n.ref,e.return=n,n.child=e}function Hh(e,n,o,c,f){if(e!==null){var m=e.memoizedProps;if(Un(m,c)&&e.ref===n.ref)if($t=!1,n.pendingProps=c=m,(e.lanes&f)!==0)(e.flags&131072)!==0&&($t=!0);else return n.lanes=e.lanes,pr(e,n,f)}return Bu(e,n,o,c,f)}function Vh(e,n,o){var c=n.pendingProps,f=c.children,m=e!==null?e.memoizedState:null;if(c.mode==="hidden")if((n.mode&1)===0)n.memoizedState={baseLanes:0,cachePool:null,transitions:null},He(As,tn),tn|=o;else{if((o&1073741824)===0)return e=m!==null?m.baseLanes|o:o,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:e,cachePool:null,transitions:null},n.updateQueue=null,He(As,tn),tn|=e,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=m!==null?m.baseLanes:o,He(As,tn),tn|=c}else m!==null?(c=m.baseLanes|o,n.memoizedState=null):c=o,He(As,tn),tn|=c;return jt(e,n,f,o),n.child}function qh(e,n){var o=n.ref;(e===null&&o!==null||e!==null&&e.ref!==o)&&(n.flags|=512,n.flags|=2097152)}function Bu(e,n,o,c,f){var m=Ut(o)?Ei:Pt.current;return m=Ss(n,m),Cs(n,f),o=Lu(e,n,o,c,m,f),c=Ou(),e!==null&&!$t?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~f,pr(e,n,f)):(Ge&&c&&du(n),n.flags|=1,jt(e,n,o,f),n.child)}function Kh(e,n,o,c,f){if(Ut(o)){var m=!0;qa(n)}else m=!1;if(Cs(n,f),n.stateNode===null)hl(e,n),Mh(n,o,c),Mu(n,o,c,f),c=!0;else if(e===null){var y=n.stateNode,k=n.memoizedProps;y.props=k;var E=y.context,D=o.contextType;typeof D=="object"&&D!==null?D=mn(D):(D=Ut(o)?Ei:Pt.current,D=Ss(n,D));var q=o.getDerivedStateFromProps,K=typeof q=="function"||typeof y.getSnapshotBeforeUpdate=="function";K||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(k!==c||E!==D)&&zh(n,y,c,D),Kr=!1;var V=n.memoizedState;y.state=V,nl(n,c,y,f),E=n.memoizedState,k!==c||V!==E||Bt.current||Kr?(typeof q=="function"&&(ju(n,o,q,c),E=n.memoizedState),(k=Kr||jh(n,o,k,c,V,E,D))?(K||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(n.flags|=4194308)):(typeof y.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=c,n.memoizedState=E),y.props=c,y.state=E,y.context=D,c=k):(typeof y.componentDidMount=="function"&&(n.flags|=4194308),c=!1)}else{y=n.stateNode,ch(e,n),k=n.memoizedProps,D=n.type===n.elementType?k:Tn(n.type,k),y.props=D,K=n.pendingProps,V=y.context,E=o.contextType,typeof E=="object"&&E!==null?E=mn(E):(E=Ut(o)?Ei:Pt.current,E=Ss(n,E));var ee=o.getDerivedStateFromProps;(q=typeof ee=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(k!==K||V!==E)&&zh(n,y,c,E),Kr=!1,V=n.memoizedState,y.state=V,nl(n,c,y,f);var re=n.memoizedState;k!==K||V!==re||Bt.current||Kr?(typeof ee=="function"&&(ju(n,o,ee,c),re=n.memoizedState),(D=Kr||jh(n,o,D,c,V,re,E)||!1)?(q||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(c,re,E),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(c,re,E)),typeof y.componentDidUpdate=="function"&&(n.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof y.componentDidUpdate!="function"||k===e.memoizedProps&&V===e.memoizedState||(n.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||k===e.memoizedProps&&V===e.memoizedState||(n.flags|=1024),n.memoizedProps=c,n.memoizedState=re),y.props=c,y.state=re,y.context=E,c=D):(typeof y.componentDidUpdate!="function"||k===e.memoizedProps&&V===e.memoizedState||(n.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||k===e.memoizedProps&&V===e.memoizedState||(n.flags|=1024),c=!1)}return Uu(e,n,o,c,m,f)}function Uu(e,n,o,c,f,m){qh(e,n);var y=(n.flags&128)!==0;if(!c&&!y)return f&&Xc(n,o,!1),pr(e,n,m);c=n.stateNode,qf.current=n;var k=y&&typeof o.getDerivedStateFromError!="function"?null:c.render();return n.flags|=1,e!==null&&y?(n.child=Ts(n,e.child,null,m),n.child=Ts(n,null,k,m)):jt(e,n,k,m),n.memoizedState=c.state,f&&Xc(n,o,!0),n.child}function Gh(e){var n=e.stateNode;n.pendingContext?Yc(e,n.pendingContext,n.pendingContext!==n.context):n.context&&Yc(e,n.context,!1),ku(e,n.containerInfo)}function Jh(e,n,o,c,f){return Es(),_u(f),n.flags|=256,jt(e,n,o,c),n.child}var $u={dehydrated:null,treeContext:null,retryLane:0};function Fu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Yh(e,n,o){var c=n.pendingProps,f=Xe.current,m=!1,y=(n.flags&128)!==0,k;if((k=y)||(k=e!==null&&e.memoizedState===null?!1:(f&2)!==0),k?(m=!0,n.flags&=-129):(e===null||e.memoizedState!==null)&&(f|=1),He(Xe,f&1),e===null)return mu(n),e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((n.mode&1)===0?n.lanes=1:e.data==="$!"?n.lanes=8:n.lanes=1073741824,null):(y=c.children,e=c.fallback,m?(c=n.mode,m=n.child,y={mode:"hidden",children:y},(c&1)===0&&m!==null?(m.childLanes=0,m.pendingProps=y):m=kl(y,c,0,null),e=ji(e,c,o,null),m.return=n,e.return=n,m.sibling=e,n.child=m,n.child.memoizedState=Fu(o),n.memoizedState=$u,e):Wu(n,y));if(f=e.memoizedState,f!==null&&(k=f.dehydrated,k!==null))return Kf(e,n,y,c,k,f,o);if(m){m=c.fallback,y=n.mode,f=e.child,k=f.sibling;var E={mode:"hidden",children:c.children};return(y&1)===0&&n.child!==f?(c=n.child,c.childLanes=0,c.pendingProps=E,n.deletions=null):(c=ti(f,E),c.subtreeFlags=f.subtreeFlags&14680064),k!==null?m=ti(k,m):(m=ji(m,y,o,null),m.flags|=2),m.return=n,c.return=n,c.sibling=m,n.child=c,c=m,m=n.child,y=e.child.memoizedState,y=y===null?Fu(o):{baseLanes:y.baseLanes|o,cachePool:null,transitions:y.transitions},m.memoizedState=y,m.childLanes=e.childLanes&~o,n.memoizedState=$u,c}return m=e.child,e=m.sibling,c=ti(m,{mode:"visible",children:c.children}),(n.mode&1)===0&&(c.lanes=o),c.return=n,c.sibling=null,e!==null&&(o=n.deletions,o===null?(n.deletions=[e],n.flags|=16):o.push(e)),n.child=c,n.memoizedState=null,c}function Wu(e,n){return n=kl({mode:"visible",children:n},e.mode,0,null),n.return=e,e.child=n}function cl(e,n,o,c){return c!==null&&_u(c),Ts(n,e.child,null,o),e=Wu(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function Kf(e,n,o,c,f,m,y){if(o)return n.flags&256?(n.flags&=-257,c=zu(Error(s(422))),cl(e,n,y,c)):n.memoizedState!==null?(n.child=e.child,n.flags|=128,null):(m=c.fallback,f=n.mode,c=kl({mode:"visible",children:c.children},f,0,null),m=ji(m,f,y,null),m.flags|=2,c.return=n,m.return=n,c.sibling=m,n.child=c,(n.mode&1)!==0&&Ts(n,e.child,null,y),n.child.memoizedState=Fu(y),n.memoizedState=$u,m);if((n.mode&1)===0)return cl(e,n,y,null);if(f.data==="$!"){if(c=f.nextSibling&&f.nextSibling.dataset,c)var k=c.dgst;return c=k,m=Error(s(419)),c=zu(m,c,void 0),cl(e,n,y,c)}if(k=(y&e.childLanes)!==0,$t||k){if(c=_t,c!==null){switch(y&-y){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(c.suspendedLanes|y))!==0?0:f,f!==0&&f!==m.retryLane&&(m.retryLane=f,dr(e,f),Ln(c,e,f,-1))}return sc(),c=zu(Error(s(421))),cl(e,n,y,c)}return f.data==="$?"?(n.flags|=128,n.child=e.child,n=ap.bind(null,e),f._reactRetry=n,null):(e=m.treeContext,en=Wn(f.nextSibling),Xt=n,Ge=!0,En=null,e!==null&&(fn[pn++]=cr,fn[pn++]=hr,fn[pn++]=Ti,cr=e.id,hr=e.overflow,Ti=n),n=Wu(n,c.children),n.flags|=4096,n)}function Qh(e,n,o){e.lanes|=n;var c=e.alternate;c!==null&&(c.lanes|=n),wu(e.return,n,o)}function Zu(e,n,o,c,f){var m=e.memoizedState;m===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:f}:(m.isBackwards=n,m.rendering=null,m.renderingStartTime=0,m.last=c,m.tail=o,m.tailMode=f)}function Xh(e,n,o){var c=n.pendingProps,f=c.revealOrder,m=c.tail;if(jt(e,n,c.children,o),c=Xe.current,(c&2)!==0)c=c&1|2,n.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Qh(e,o,n);else if(e.tag===19)Qh(e,o,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}c&=1}if(He(Xe,c),(n.mode&1)===0)n.memoizedState=null;else switch(f){case"forwards":for(o=n.child,f=null;o!==null;)e=o.alternate,e!==null&&rl(e)===null&&(f=o),o=o.sibling;o=f,o===null?(f=n.child,n.child=null):(f=o.sibling,o.sibling=null),Zu(n,!1,f,o,m);break;case"backwards":for(o=null,f=n.child,n.child=null;f!==null;){if(e=f.alternate,e!==null&&rl(e)===null){n.child=f;break}e=f.sibling,f.sibling=o,o=f,f=e}Zu(n,!0,o,null,m);break;case"together":Zu(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function hl(e,n){(n.mode&1)===0&&e!==null&&(e.alternate=null,n.alternate=null,n.flags|=2)}function pr(e,n,o){if(e!==null&&(n.dependencies=e.dependencies),Ri|=n.lanes,(o&n.childLanes)===0)return null;if(e!==null&&n.child!==e.child)throw Error(s(153));if(n.child!==null){for(e=n.child,o=ti(e,e.pendingProps),n.child=o,o.return=n;e.sibling!==null;)e=e.sibling,o=o.sibling=ti(e,e.pendingProps),o.return=n;o.sibling=null}return n.child}function Gf(e,n,o){switch(n.tag){case 3:Gh(n),Es();break;case 5:fh(n);break;case 1:Ut(n.type)&&qa(n);break;case 4:ku(n,n.stateNode.containerInfo);break;case 10:var c=n.type._context,f=n.memoizedProps.value;He(Xa,c._currentValue),c._currentValue=f;break;case 13:if(c=n.memoizedState,c!==null)return c.dehydrated!==null?(He(Xe,Xe.current&1),n.flags|=128,null):(o&n.child.childLanes)!==0?Yh(e,n,o):(He(Xe,Xe.current&1),e=pr(e,n,o),e!==null?e.sibling:null);He(Xe,Xe.current&1);break;case 19:if(c=(o&n.childLanes)!==0,(e.flags&128)!==0){if(c)return Xh(e,n,o);n.flags|=128}if(f=n.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),He(Xe,Xe.current),c)break;return null;case 22:case 23:return n.lanes=0,Vh(e,n,o)}return pr(e,n,o)}var ed,Hu,td,nd;ed=function(e,n){for(var o=n.child;o!==null;){if(o.tag===5||o.tag===6)e.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},Hu=function(){},td=function(e,n,o,c){var f=e.memoizedProps;if(f!==c){e=n.stateNode,Li(Zn.current);var m=null;switch(o){case"input":f=Vs(e,f),c=Vs(e,c),m=[];break;case"select":f=W({},f,{value:void 0}),c=W({},c,{value:void 0}),m=[];break;case"textarea":f=Wi(e,f),c=Wi(e,c),m=[];break;default:typeof f.onClick!="function"&&typeof c.onClick=="function"&&(e.onclick=Z)}Qs(o,c);var y;o=null;for(D in f)if(!c.hasOwnProperty(D)&&f.hasOwnProperty(D)&&f[D]!=null)if(D==="style"){var k=f[D];for(y in k)k.hasOwnProperty(y)&&(o||(o={}),o[y]="")}else D!=="dangerouslySetInnerHTML"&&D!=="children"&&D!=="suppressContentEditableWarning"&&D!=="suppressHydrationWarning"&&D!=="autoFocus"&&(h.hasOwnProperty(D)?m||(m=[]):(m=m||[]).push(D,null));for(D in c){var E=c[D];if(k=f!=null?f[D]:void 0,c.hasOwnProperty(D)&&E!==k&&(E!=null||k!=null))if(D==="style")if(k){for(y in k)!k.hasOwnProperty(y)||E&&E.hasOwnProperty(y)||(o||(o={}),o[y]="");for(y in E)E.hasOwnProperty(y)&&k[y]!==E[y]&&(o||(o={}),o[y]=E[y])}else o||(m||(m=[]),m.push(D,o)),o=E;else D==="dangerouslySetInnerHTML"?(E=E?E.__html:void 0,k=k?k.__html:void 0,E!=null&&k!==E&&(m=m||[]).push(D,E)):D==="children"?typeof E!="string"&&typeof E!="number"||(m=m||[]).push(D,""+E):D!=="suppressContentEditableWarning"&&D!=="suppressHydrationWarning"&&(h.hasOwnProperty(D)?(E!=null&&D==="onScroll"&&$e("scroll",e),m||k===E||(m=[])):(m=m||[]).push(D,E))}o&&(m=m||[]).push("style",o);var D=m;(n.updateQueue=D)&&(n.flags|=4)}},nd=function(e,n,o,c){o!==c&&(n.flags|=4)};function $o(e,n){if(!Ge)switch(e.tailMode){case"hidden":n=e.tail;for(var o=null;n!==null;)n.alternate!==null&&(o=n),n=n.sibling;o===null?e.tail=null:o.sibling=null;break;case"collapsed":o=e.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:c.sibling=null}}function Lt(e){var n=e.alternate!==null&&e.alternate.child===e.child,o=0,c=0;if(n)for(var f=e.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags&14680064,c|=f.flags&14680064,f.return=e,f=f.sibling;else for(f=e.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=e,f=f.sibling;return e.subtreeFlags|=c,e.childLanes=o,n}function Jf(e,n,o){var c=n.pendingProps;switch(fu(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lt(n),null;case 1:return Ut(n.type)&&Va(),Lt(n),null;case 3:return c=n.stateNode,Ls(),Ke(Bt),Ke(Pt),Tu(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(e===null||e.child===null)&&(Ya(n)?n.flags|=4:e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,En!==null&&(nc(En),En=null))),Hu(e,n),Lt(n),null;case 5:bu(n);var f=Li(Mo.current);if(o=n.type,e!==null&&n.stateNode!=null)td(e,n,o,c,f),e.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!c){if(n.stateNode===null)throw Error(s(166));return Lt(n),null}if(e=Li(Zn.current),Ya(n)){c=n.stateNode,o=n.type;var m=n.memoizedProps;switch(c[dn]=n,c[Wr]=m,e=(n.mode&1)!==0,o){case"dialog":$e("cancel",c),$e("close",c);break;case"iframe":case"object":case"embed":$e("load",c);break;case"video":case"audio":for(f=0;f<Ur.length;f++)$e(Ur[f],c);break;case"source":$e("error",c);break;case"img":case"image":case"link":$e("error",c),$e("load",c);break;case"details":$e("toggle",c);break;case"input":qs(c,m),$e("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!m.multiple},$e("invalid",c);break;case"textarea":Js(c,m),$e("invalid",c)}Qs(o,m),f=null;for(var y in m)if(m.hasOwnProperty(y)){var k=m[y];y==="children"?typeof k=="string"?c.textContent!==k&&(m.suppressHydrationWarning!==!0&&z(c.textContent,k,e),f=["children",k]):typeof k=="number"&&c.textContent!==""+k&&(m.suppressHydrationWarning!==!0&&z(c.textContent,k,e),f=["children",""+k]):h.hasOwnProperty(y)&&k!=null&&y==="onScroll"&&$e("scroll",c)}switch(o){case"input":vr(c),oi(c,m,!0);break;case"textarea":vr(c),ua(c);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(c.onclick=Z)}c=f,n.updateQueue=c,c!==null&&(n.flags|=4)}else{y=f.nodeType===9?f:f.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Zi(o)),e==="http://www.w3.org/1999/xhtml"?o==="script"?(e=y.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof c.is=="string"?e=y.createElement(o,{is:c.is}):(e=y.createElement(o),o==="select"&&(y=e,c.multiple?y.multiple=!0:c.size&&(y.size=c.size))):e=y.createElementNS(e,o),e[dn]=n,e[Wr]=c,ed(e,n,!1,!1),n.stateNode=e;e:{switch(y=qn(o,c),o){case"dialog":$e("cancel",e),$e("close",e),f=c;break;case"iframe":case"object":case"embed":$e("load",e),f=c;break;case"video":case"audio":for(f=0;f<Ur.length;f++)$e(Ur[f],e);f=c;break;case"source":$e("error",e),f=c;break;case"img":case"image":case"link":$e("error",e),$e("load",e),f=c;break;case"details":$e("toggle",e),f=c;break;case"input":qs(e,c),f=Vs(e,c),$e("invalid",e);break;case"option":f=c;break;case"select":e._wrapperState={wasMultiple:!!c.multiple},f=W({},c,{value:void 0}),$e("invalid",e);break;case"textarea":Js(e,c),f=Wi(e,c),$e("invalid",e);break;default:f=c}Qs(o,f),k=f;for(m in k)if(k.hasOwnProperty(m)){var E=k[m];m==="style"?Vi(e,E):m==="dangerouslySetInnerHTML"?(E=E?E.__html:void 0,E!=null&&ca(e,E)):m==="children"?typeof E=="string"?(o!=="textarea"||E!=="")&&Sr(e,E):typeof E=="number"&&Sr(e,""+E):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(h.hasOwnProperty(m)?E!=null&&m==="onScroll"&&$e("scroll",e):E!=null&&G(e,m,E,y))}switch(o){case"input":vr(e),oi(e,c,!1);break;case"textarea":vr(e),ua(e);break;case"option":c.value!=null&&e.setAttribute("value",""+Te(c.value));break;case"select":e.multiple=!!c.multiple,m=c.value,m!=null?In(e,!!c.multiple,m,!1):c.defaultValue!=null&&In(e,!!c.multiple,c.defaultValue,!0);break;default:typeof f.onClick=="function"&&(e.onclick=Z)}switch(o){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return Lt(n),null;case 6:if(e&&n.stateNode!=null)nd(e,n,e.memoizedProps,c);else{if(typeof c!="string"&&n.stateNode===null)throw Error(s(166));if(o=Li(Mo.current),Li(Zn.current),Ya(n)){if(c=n.stateNode,o=n.memoizedProps,c[dn]=n,(m=c.nodeValue!==o)&&(e=Xt,e!==null))switch(e.tag){case 3:z(c.nodeValue,o,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&z(c.nodeValue,o,(e.mode&1)!==0)}m&&(n.flags|=4)}else c=(o.nodeType===9?o:o.ownerDocument).createTextNode(c),c[dn]=n,n.stateNode=c}return Lt(n),null;case 13:if(Ke(Xe),c=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ge&&en!==null&&(n.mode&1)!==0&&(n.flags&128)===0)sh(),Es(),n.flags|=98560,m=!1;else if(m=Ya(n),c!==null&&c.dehydrated!==null){if(e===null){if(!m)throw Error(s(318));if(m=n.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(317));m[dn]=n}else Es(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Lt(n),m=!1}else En!==null&&(nc(En),En=null),m=!0;if(!m)return n.flags&65536?n:null}return(n.flags&128)!==0?(n.lanes=o,n):(c=c!==null,c!==(e!==null&&e.memoizedState!==null)&&c&&(n.child.flags|=8192,(n.mode&1)!==0&&(e===null||(Xe.current&1)!==0?ft===0&&(ft=3):sc())),n.updateQueue!==null&&(n.flags|=4),Lt(n),null);case 4:return Ls(),Hu(e,n),e===null&&$r(n.stateNode.containerInfo),Lt(n),null;case 10:return yu(n.type._context),Lt(n),null;case 17:return Ut(n.type)&&Va(),Lt(n),null;case 19:if(Ke(Xe),m=n.memoizedState,m===null)return Lt(n),null;if(c=(n.flags&128)!==0,y=m.rendering,y===null)if(c)$o(m,!1);else{if(ft!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(y=rl(e),y!==null){for(n.flags|=128,$o(m,!1),c=y.updateQueue,c!==null&&(n.updateQueue=c,n.flags|=4),n.subtreeFlags=0,c=o,o=n.child;o!==null;)m=o,e=c,m.flags&=14680066,y=m.alternate,y===null?(m.childLanes=0,m.lanes=e,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=y.childLanes,m.lanes=y.lanes,m.child=y.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=y.memoizedProps,m.memoizedState=y.memoizedState,m.updateQueue=y.updateQueue,m.type=y.type,e=y.dependencies,m.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),o=o.sibling;return He(Xe,Xe.current&1|2),n.child}e=e.sibling}m.tail!==null&&Ye()>Ns&&(n.flags|=128,c=!0,$o(m,!1),n.lanes=4194304)}else{if(!c)if(e=rl(y),e!==null){if(n.flags|=128,c=!0,o=e.updateQueue,o!==null&&(n.updateQueue=o,n.flags|=4),$o(m,!0),m.tail===null&&m.tailMode==="hidden"&&!y.alternate&&!Ge)return Lt(n),null}else 2*Ye()-m.renderingStartTime>Ns&&o!==1073741824&&(n.flags|=128,c=!0,$o(m,!1),n.lanes=4194304);m.isBackwards?(y.sibling=n.child,n.child=y):(o=m.last,o!==null?o.sibling=y:n.child=y,m.last=y)}return m.tail!==null?(n=m.tail,m.rendering=n,m.tail=n.sibling,m.renderingStartTime=Ye(),n.sibling=null,o=Xe.current,He(Xe,c?o&1|2:o&1),n):(Lt(n),null);case 22:case 23:return ic(),c=n.memoizedState!==null,e!==null&&e.memoizedState!==null!==c&&(n.flags|=8192),c&&(n.mode&1)!==0?(tn&1073741824)!==0&&(Lt(n),n.subtreeFlags&6&&(n.flags|=8192)):Lt(n),null;case 24:return null;case 25:return null}throw Error(s(156,n.tag))}function Yf(e,n){switch(fu(n),n.tag){case 1:return Ut(n.type)&&Va(),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Ls(),Ke(Bt),Ke(Pt),Tu(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 5:return bu(n),null;case 13:if(Ke(Xe),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(s(340));Es()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return Ke(Xe),null;case 4:return Ls(),null;case 10:return yu(n.type._context),null;case 22:case 23:return ic(),null;case 24:return null;default:return null}}var dl=!1,Ot=!1,Qf=typeof WeakSet=="function"?WeakSet:Set,ne=null;function Rs(e,n){var o=e.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(c){rt(e,n,c)}else o.current=null}function Vu(e,n,o){try{o()}catch(c){rt(e,n,c)}}var rd=!1;function Xf(e,n){if(X=gi,e=bo(),Eo(e)){if("selectionStart"in e)var o={start:e.selectionStart,end:e.selectionEnd};else e:{o=(o=e.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var f=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var y=0,k=-1,E=-1,D=0,q=0,K=e,V=null;t:for(;;){for(var ee;K!==o||f!==0&&K.nodeType!==3||(k=y+f),K!==m||c!==0&&K.nodeType!==3||(E=y+c),K.nodeType===3&&(y+=K.nodeValue.length),(ee=K.firstChild)!==null;)V=K,K=ee;for(;;){if(K===e)break t;if(V===o&&++D===f&&(k=y),V===m&&++q===c&&(E=y),(ee=K.nextSibling)!==null)break;K=V,V=K.parentNode}K=ee}o=k===-1||E===-1?null:{start:k,end:E}}else o=null}o=o||{start:0,end:0}}else o=null;for(pe={focusedElem:e,selectionRange:o},gi=!1,ne=n;ne!==null;)if(n=ne,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,ne=e;else for(;ne!==null;){n=ne;try{var re=n.alternate;if((n.flags&1024)!==0)switch(n.tag){case 0:case 11:case 15:break;case 1:if(re!==null){var se=re.memoizedProps,ot=re.memoizedState,I=n.stateNode,O=I.getSnapshotBeforeUpdate(n.elementType===n.type?se:Tn(n.type,se),ot);I.__reactInternalSnapshotBeforeUpdate=O}break;case 3:var j=n.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(J){rt(n,n.return,J)}if(e=n.sibling,e!==null){e.return=n.return,ne=e;break}ne=n.return}return re=rd,rd=!1,re}function Fo(e,n,o){var c=n.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var f=c=c.next;do{if((f.tag&e)===e){var m=f.destroy;f.destroy=void 0,m!==void 0&&Vu(n,o,m)}f=f.next}while(f!==c)}}function fl(e,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var o=n=n.next;do{if((o.tag&e)===e){var c=o.create;o.destroy=c()}o=o.next}while(o!==n)}}function qu(e){var n=e.ref;if(n!==null){var o=e.stateNode;switch(e.tag){case 5:e=o;break;default:e=o}typeof n=="function"?n(e):n.current=e}}function id(e){var n=e.alternate;n!==null&&(e.alternate=null,id(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&(delete n[dn],delete n[Wr],delete n[Zr],delete n[lu],delete n[uu])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sd(e){return e.tag===5||e.tag===3||e.tag===4}function od(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||sd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ku(e,n,o){var c=e.tag;if(c===5||c===6)e=e.stateNode,n?o.nodeType===8?o.parentNode.insertBefore(e,n):o.insertBefore(e,n):(o.nodeType===8?(n=o.parentNode,n.insertBefore(e,o)):(n=o,n.appendChild(e)),o=o._reactRootContainer,o!=null||n.onclick!==null||(n.onclick=Z));else if(c!==4&&(e=e.child,e!==null))for(Ku(e,n,o),e=e.sibling;e!==null;)Ku(e,n,o),e=e.sibling}function Gu(e,n,o){var c=e.tag;if(c===5||c===6)e=e.stateNode,n?o.insertBefore(e,n):o.appendChild(e);else if(c!==4&&(e=e.child,e!==null))for(Gu(e,n,o),e=e.sibling;e!==null;)Gu(e,n,o),e=e.sibling}var yt=null,Pn=!1;function Jr(e,n,o){for(o=o.child;o!==null;)ad(e,n,o),o=o.sibling}function ad(e,n,o){if(Ht&&typeof Ht.onCommitFiberUnmount=="function")try{Ht.onCommitFiberUnmount(hi,o)}catch{}switch(o.tag){case 5:Ot||Rs(o,n);case 6:var c=yt,f=Pn;yt=null,Jr(e,n,o),yt=c,Pn=f,yt!==null&&(Pn?(e=yt,o=o.stateNode,e.nodeType===8?e.parentNode.removeChild(o):e.removeChild(o)):yt.removeChild(o.stateNode));break;case 18:yt!==null&&(Pn?(e=yt,o=o.stateNode,e.nodeType===8?Ao(e.parentNode,o):e.nodeType===1&&Ao(e,o),Kt(e)):Ao(yt,o.stateNode));break;case 4:c=yt,f=Pn,yt=o.stateNode.containerInfo,Pn=!0,Jr(e,n,o),yt=c,Pn=f;break;case 0:case 11:case 14:case 15:if(!Ot&&(c=o.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){f=c=c.next;do{var m=f,y=m.destroy;m=m.tag,y!==void 0&&((m&2)!==0||(m&4)!==0)&&Vu(o,n,y),f=f.next}while(f!==c)}Jr(e,n,o);break;case 1:if(!Ot&&(Rs(o,n),c=o.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=o.memoizedProps,c.state=o.memoizedState,c.componentWillUnmount()}catch(k){rt(o,n,k)}Jr(e,n,o);break;case 21:Jr(e,n,o);break;case 22:o.mode&1?(Ot=(c=Ot)||o.memoizedState!==null,Jr(e,n,o),Ot=c):Jr(e,n,o);break;default:Jr(e,n,o)}}function ld(e){var n=e.updateQueue;if(n!==null){e.updateQueue=null;var o=e.stateNode;o===null&&(o=e.stateNode=new Qf),n.forEach(function(c){var f=lp.bind(null,e,c);o.has(c)||(o.add(c),c.then(f,f))})}}function Cn(e,n){var o=n.deletions;if(o!==null)for(var c=0;c<o.length;c++){var f=o[c];try{var m=e,y=n,k=y;e:for(;k!==null;){switch(k.tag){case 5:yt=k.stateNode,Pn=!1;break e;case 3:yt=k.stateNode.containerInfo,Pn=!0;break e;case 4:yt=k.stateNode.containerInfo,Pn=!0;break e}k=k.return}if(yt===null)throw Error(s(160));ad(m,y,f),yt=null,Pn=!1;var E=f.alternate;E!==null&&(E.return=null),f.return=null}catch(D){rt(f,n,D)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)ud(n,e),n=n.sibling}function ud(e,n){var o=e.alternate,c=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Cn(n,e),Vn(e),c&4){try{Fo(3,e,e.return),fl(3,e)}catch(se){rt(e,e.return,se)}try{Fo(5,e,e.return)}catch(se){rt(e,e.return,se)}}break;case 1:Cn(n,e),Vn(e),c&512&&o!==null&&Rs(o,o.return);break;case 5:if(Cn(n,e),Vn(e),c&512&&o!==null&&Rs(o,o.return),e.flags&32){var f=e.stateNode;try{Sr(f,"")}catch(se){rt(e,e.return,se)}}if(c&4&&(f=e.stateNode,f!=null)){var m=e.memoizedProps,y=o!==null?o.memoizedProps:m,k=e.type,E=e.updateQueue;if(e.updateQueue=null,E!==null)try{k==="input"&&m.type==="radio"&&m.name!=null&&Ks(f,m),qn(k,y);var D=qn(k,m);for(y=0;y<E.length;y+=2){var q=E[y],K=E[y+1];q==="style"?Vi(f,K):q==="dangerouslySetInnerHTML"?ca(f,K):q==="children"?Sr(f,K):G(f,q,K,D)}switch(k){case"input":si(f,m);break;case"textarea":la(f,m);break;case"select":var V=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!m.multiple;var ee=m.value;ee!=null?In(f,!!m.multiple,ee,!1):V!==!!m.multiple&&(m.defaultValue!=null?In(f,!!m.multiple,m.defaultValue,!0):In(f,!!m.multiple,m.multiple?[]:"",!1))}f[Wr]=m}catch(se){rt(e,e.return,se)}}break;case 6:if(Cn(n,e),Vn(e),c&4){if(e.stateNode===null)throw Error(s(162));f=e.stateNode,m=e.memoizedProps;try{f.nodeValue=m}catch(se){rt(e,e.return,se)}}break;case 3:if(Cn(n,e),Vn(e),c&4&&o!==null&&o.memoizedState.isDehydrated)try{Kt(n.containerInfo)}catch(se){rt(e,e.return,se)}break;case 4:Cn(n,e),Vn(e);break;case 13:Cn(n,e),Vn(e),f=e.child,f.flags&8192&&(m=f.memoizedState!==null,f.stateNode.isHidden=m,!m||f.alternate!==null&&f.alternate.memoizedState!==null||(Qu=Ye())),c&4&&ld(e);break;case 22:if(q=o!==null&&o.memoizedState!==null,e.mode&1?(Ot=(D=Ot)||q,Cn(n,e),Ot=D):Cn(n,e),Vn(e),c&8192){if(D=e.memoizedState!==null,(e.stateNode.isHidden=D)&&!q&&(e.mode&1)!==0)for(ne=e,q=e.child;q!==null;){for(K=ne=q;ne!==null;){switch(V=ne,ee=V.child,V.tag){case 0:case 11:case 14:case 15:Fo(4,V,V.return);break;case 1:Rs(V,V.return);var re=V.stateNode;if(typeof re.componentWillUnmount=="function"){c=V,o=V.return;try{n=c,re.props=n.memoizedProps,re.state=n.memoizedState,re.componentWillUnmount()}catch(se){rt(c,o,se)}}break;case 5:Rs(V,V.return);break;case 22:if(V.memoizedState!==null){dd(K);continue}}ee!==null?(ee.return=V,ne=ee):dd(K)}q=q.sibling}e:for(q=null,K=e;;){if(K.tag===5){if(q===null){q=K;try{f=K.stateNode,D?(m=f.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(k=K.stateNode,E=K.memoizedProps.style,y=E!=null&&E.hasOwnProperty("display")?E.display:null,k.style.display=Ys("display",y))}catch(se){rt(e,e.return,se)}}}else if(K.tag===6){if(q===null)try{K.stateNode.nodeValue=D?"":K.memoizedProps}catch(se){rt(e,e.return,se)}}else if((K.tag!==22&&K.tag!==23||K.memoizedState===null||K===e)&&K.child!==null){K.child.return=K,K=K.child;continue}if(K===e)break e;for(;K.sibling===null;){if(K.return===null||K.return===e)break e;q===K&&(q=null),K=K.return}q===K&&(q=null),K.sibling.return=K.return,K=K.sibling}}break;case 19:Cn(n,e),Vn(e),c&4&&ld(e);break;case 21:break;default:Cn(n,e),Vn(e)}}function Vn(e){var n=e.flags;if(n&2){try{e:{for(var o=e.return;o!==null;){if(sd(o)){var c=o;break e}o=o.return}throw Error(s(160))}switch(c.tag){case 5:var f=c.stateNode;c.flags&32&&(Sr(f,""),c.flags&=-33);var m=od(e);Gu(e,m,f);break;case 3:case 4:var y=c.stateNode.containerInfo,k=od(e);Ku(e,k,y);break;default:throw Error(s(161))}}catch(E){rt(e,e.return,E)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function ep(e,n,o){ne=e,cd(e)}function cd(e,n,o){for(var c=(e.mode&1)!==0;ne!==null;){var f=ne,m=f.child;if(f.tag===22&&c){var y=f.memoizedState!==null||dl;if(!y){var k=f.alternate,E=k!==null&&k.memoizedState!==null||Ot;k=dl;var D=Ot;if(dl=y,(Ot=E)&&!D)for(ne=f;ne!==null;)y=ne,E=y.child,y.tag===22&&y.memoizedState!==null?fd(f):E!==null?(E.return=y,ne=E):fd(f);for(;m!==null;)ne=m,cd(m),m=m.sibling;ne=f,dl=k,Ot=D}hd(e)}else(f.subtreeFlags&8772)!==0&&m!==null?(m.return=f,ne=m):hd(e)}}function hd(e){for(;ne!==null;){var n=ne;if((n.flags&8772)!==0){var o=n.alternate;try{if((n.flags&8772)!==0)switch(n.tag){case 0:case 11:case 15:Ot||fl(5,n);break;case 1:var c=n.stateNode;if(n.flags&4&&!Ot)if(o===null)c.componentDidMount();else{var f=n.elementType===n.type?o.memoizedProps:Tn(n.type,o.memoizedProps);c.componentDidUpdate(f,o.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var m=n.updateQueue;m!==null&&dh(n,m,c);break;case 3:var y=n.updateQueue;if(y!==null){if(o=null,n.child!==null)switch(n.child.tag){case 5:o=n.child.stateNode;break;case 1:o=n.child.stateNode}dh(n,y,o)}break;case 5:var k=n.stateNode;if(o===null&&n.flags&4){o=k;var E=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":E.autoFocus&&o.focus();break;case"img":E.src&&(o.src=E.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var D=n.alternate;if(D!==null){var q=D.memoizedState;if(q!==null){var K=q.dehydrated;K!==null&&Kt(K)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}Ot||n.flags&512&&qu(n)}catch(V){rt(n,n.return,V)}}if(n===e){ne=null;break}if(o=n.sibling,o!==null){o.return=n.return,ne=o;break}ne=n.return}}function dd(e){for(;ne!==null;){var n=ne;if(n===e){ne=null;break}var o=n.sibling;if(o!==null){o.return=n.return,ne=o;break}ne=n.return}}function fd(e){for(;ne!==null;){var n=ne;try{switch(n.tag){case 0:case 11:case 15:var o=n.return;try{fl(4,n)}catch(E){rt(n,o,E)}break;case 1:var c=n.stateNode;if(typeof c.componentDidMount=="function"){var f=n.return;try{c.componentDidMount()}catch(E){rt(n,f,E)}}var m=n.return;try{qu(n)}catch(E){rt(n,m,E)}break;case 5:var y=n.return;try{qu(n)}catch(E){rt(n,y,E)}}}catch(E){rt(n,n.return,E)}if(n===e){ne=null;break}var k=n.sibling;if(k!==null){k.return=n.return,ne=k;break}ne=n.return}}var tp=Math.ceil,pl=ie.ReactCurrentDispatcher,Ju=ie.ReactCurrentOwner,gn=ie.ReactCurrentBatchConfig,Ne=0,_t=null,lt=null,wt=0,tn=0,As=Hr(0),ft=0,Wo=null,Ri=0,ml=0,Yu=0,Zo=null,Ft=null,Qu=0,Ns=1/0,mr=null,_l=!1,Xu=null,Yr=null,gl=!1,Qr=null,vl=0,Ho=0,ec=null,yl=-1,wl=0;function Mt(){return(Ne&6)!==0?Ye():yl!==-1?yl:yl=Ye()}function Xr(e){return(e.mode&1)===0?1:(Ne&2)!==0&&wt!==0?wt&-wt:Df.transition!==null?(wl===0&&(wl=ka()),wl):(e=Ae,e!==0||(e=window.event,e=e===void 0?16:Ce(e.type)),e)}function Ln(e,n,o,c){if(50<Ho)throw Ho=0,ec=null,Error(s(185));Vt(e,o,c),((Ne&2)===0||e!==_t)&&(e===_t&&((Ne&2)===0&&(ml|=o),ft===4&&ei(e,wt)),Wt(e,c),o===1&&Ne===0&&(n.mode&1)===0&&(Ns=Ye()+500,Ka&&qr()))}function Wt(e,n){var o=e.callbackNode;Xi(e,n);var c=Ze(e,e===_t?wt:0);if(c===0)o!==null&&so(o),e.callbackNode=null,e.callbackPriority=0;else if(n=c&-c,e.callbackPriority!==n){if(o!=null&&so(o),n===1)e.tag===0?zf(md.bind(null,e)):eh(md.bind(null,e)),Tt(function(){(Ne&6)===0&&qr()}),o=null;else{switch(Cr(c)){case 1:o=oo;break;case 4:o=Sa;break;case 16:o=Yi;break;case 536870912:o=br;break;default:o=Yi}o=kd(o,pd.bind(null,e))}e.callbackPriority=n,e.callbackNode=o}}function pd(e,n){if(yl=-1,wl=0,(Ne&6)!==0)throw Error(s(327));var o=e.callbackNode;if(Is()&&e.callbackNode!==o)return null;var c=Ze(e,e===_t?wt:0);if(c===0)return null;if((c&30)!==0||(c&e.expiredLanes)!==0||n)n=xl(e,c);else{n=c;var f=Ne;Ne|=2;var m=gd();(_t!==e||wt!==n)&&(mr=null,Ns=Ye()+500,Ni(e,n));do try{ip();break}catch(k){_d(e,k)}while(!0);vu(),pl.current=m,Ne=f,lt!==null?n=0:(_t=null,wt=0,n=ft)}if(n!==0){if(n===2&&(f=bt(e),f!==0&&(c=f,n=tc(e,f))),n===1)throw o=Wo,Ni(e,0),ei(e,c),Wt(e,Ye()),o;if(n===6)ei(e,c);else{if(f=e.current.alternate,(c&30)===0&&!np(f)&&(n=xl(e,c),n===2&&(m=bt(e),m!==0&&(c=m,n=tc(e,m))),n===1))throw o=Wo,Ni(e,0),ei(e,c),Wt(e,Ye()),o;switch(e.finishedWork=f,e.finishedLanes=c,n){case 0:case 1:throw Error(s(345));case 2:Ii(e,Ft,mr);break;case 3:if(ei(e,c),(c&130023424)===c&&(n=Qu+500-Ye(),10<n)){if(Ze(e,0)!==0)break;if(f=e.suspendedLanes,(f&c)!==c){Mt(),e.pingedLanes|=e.suspendedLanes&f;break}e.timeoutHandle=ht(Ii.bind(null,e,Ft,mr),n);break}Ii(e,Ft,mr);break;case 4:if(ei(e,c),(c&4194240)===c)break;for(n=e.eventTimes,f=-1;0<c;){var y=31-be(c);m=1<<y,y=n[y],y>f&&(f=y),c&=~m}if(c=f,c=Ye()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*tp(c/1960))-c,10<c){e.timeoutHandle=ht(Ii.bind(null,e,Ft,mr),c);break}Ii(e,Ft,mr);break;case 5:Ii(e,Ft,mr);break;default:throw Error(s(329))}}}return Wt(e,Ye()),e.callbackNode===o?pd.bind(null,e):null}function tc(e,n){var o=Zo;return e.current.memoizedState.isDehydrated&&(Ni(e,n).flags|=256),e=xl(e,n),e!==2&&(n=Ft,Ft=o,n!==null&&nc(n)),e}function nc(e){Ft===null?Ft=e:Ft.push.apply(Ft,e)}function np(e){for(var n=e;;){if(n.flags&16384){var o=n.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var c=0;c<o.length;c++){var f=o[c],m=f.getSnapshot;f=f.value;try{if(!Yt(m(),f))return!1}catch{return!1}}}if(o=n.child,n.subtreeFlags&16384&&o!==null)o.return=n,n=o;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function ei(e,n){for(n&=~Yu,n&=~ml,e.suspendedLanes|=n,e.pingedLanes&=~n,e=e.expirationTimes;0<n;){var o=31-be(n),c=1<<o;e[o]=-1,n&=~c}}function md(e){if((Ne&6)!==0)throw Error(s(327));Is();var n=Ze(e,0);if((n&1)===0)return Wt(e,Ye()),null;var o=xl(e,n);if(e.tag!==0&&o===2){var c=bt(e);c!==0&&(n=c,o=tc(e,c))}if(o===1)throw o=Wo,Ni(e,0),ei(e,n),Wt(e,Ye()),o;if(o===6)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=n,Ii(e,Ft,mr),Wt(e,Ye()),null}function rc(e,n){var o=Ne;Ne|=1;try{return e(n)}finally{Ne=o,Ne===0&&(Ns=Ye()+500,Ka&&qr())}}function Ai(e){Qr!==null&&Qr.tag===0&&(Ne&6)===0&&Is();var n=Ne;Ne|=1;var o=gn.transition,c=Ae;try{if(gn.transition=null,Ae=1,e)return e()}finally{Ae=c,gn.transition=o,Ne=n,(Ne&6)===0&&qr()}}function ic(){tn=As.current,Ke(As)}function Ni(e,n){e.finishedWork=null,e.finishedLanes=0;var o=e.timeoutHandle;if(o!==-1&&(e.timeoutHandle=-1,at(o)),lt!==null)for(o=lt.return;o!==null;){var c=o;switch(fu(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&Va();break;case 3:Ls(),Ke(Bt),Ke(Pt),Tu();break;case 5:bu(c);break;case 4:Ls();break;case 13:Ke(Xe);break;case 19:Ke(Xe);break;case 10:yu(c.type._context);break;case 22:case 23:ic()}o=o.return}if(_t=e,lt=e=ti(e.current,null),wt=tn=n,ft=0,Wo=null,Yu=ml=Ri=0,Ft=Zo=null,Ci!==null){for(n=0;n<Ci.length;n++)if(o=Ci[n],c=o.interleaved,c!==null){o.interleaved=null;var f=c.next,m=o.pending;if(m!==null){var y=m.next;m.next=f,c.next=y}o.pending=c}Ci=null}return e}function _d(e,n){do{var o=lt;try{if(vu(),il.current=ll,sl){for(var c=et.memoizedState;c!==null;){var f=c.queue;f!==null&&(f.pending=null),c=c.next}sl=!1}if(Oi=0,mt=dt=et=null,zo=!1,Do=0,Ju.current=null,o===null||o.return===null){ft=1,Wo=n,lt=null;break}e:{var m=e,y=o.return,k=o,E=n;if(n=wt,k.flags|=32768,E!==null&&typeof E=="object"&&typeof E.then=="function"){var D=E,q=k,K=q.tag;if((q.mode&1)===0&&(K===0||K===11||K===15)){var V=q.alternate;V?(q.updateQueue=V.updateQueue,q.memoizedState=V.memoizedState,q.lanes=V.lanes):(q.updateQueue=null,q.memoizedState=null)}var ee=$h(y);if(ee!==null){ee.flags&=-257,Fh(ee,y,k,m,n),ee.mode&1&&Uh(m,D,n),n=ee,E=D;var re=n.updateQueue;if(re===null){var se=new Set;se.add(E),n.updateQueue=se}else re.add(E);break e}else{if((n&1)===0){Uh(m,D,n),sc();break e}E=Error(s(426))}}else if(Ge&&k.mode&1){var ot=$h(y);if(ot!==null){(ot.flags&65536)===0&&(ot.flags|=256),Fh(ot,y,k,m,n),_u(Os(E,k));break e}}m=E=Os(E,k),ft!==4&&(ft=2),Zo===null?Zo=[m]:Zo.push(m),m=y;do{switch(m.tag){case 3:m.flags|=65536,n&=-n,m.lanes|=n;var I=Dh(m,E,n);hh(m,I);break e;case 1:k=E;var O=m.type,j=m.stateNode;if((m.flags&128)===0&&(typeof O.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(Yr===null||!Yr.has(j)))){m.flags|=65536,n&=-n,m.lanes|=n;var J=Bh(m,k,n);hh(m,J);break e}}m=m.return}while(m!==null)}yd(o)}catch(le){n=le,lt===o&&o!==null&&(lt=o=o.return);continue}break}while(!0)}function gd(){var e=pl.current;return pl.current=ll,e===null?ll:e}function sc(){(ft===0||ft===3||ft===2)&&(ft=4),_t===null||(Ri&268435455)===0&&(ml&268435455)===0||ei(_t,wt)}function xl(e,n){var o=Ne;Ne|=2;var c=gd();(_t!==e||wt!==n)&&(mr=null,Ni(e,n));do try{rp();break}catch(f){_d(e,f)}while(!0);if(vu(),Ne=o,pl.current=c,lt!==null)throw Error(s(261));return _t=null,wt=0,ft}function rp(){for(;lt!==null;)vd(lt)}function ip(){for(;lt!==null&&!Vl();)vd(lt)}function vd(e){var n=Sd(e.alternate,e,tn);e.memoizedProps=e.pendingProps,n===null?yd(e):lt=n,Ju.current=null}function yd(e){var n=e;do{var o=n.alternate;if(e=n.return,(n.flags&32768)===0){if(o=Jf(o,n,tn),o!==null){lt=o;return}}else{if(o=Yf(o,n),o!==null){o.flags&=32767,lt=o;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ft=6,lt=null;return}}if(n=n.sibling,n!==null){lt=n;return}lt=n=e}while(n!==null);ft===0&&(ft=5)}function Ii(e,n,o){var c=Ae,f=gn.transition;try{gn.transition=null,Ae=1,sp(e,n,o,c)}finally{gn.transition=f,Ae=c}return null}function sp(e,n,o,c){do Is();while(Qr!==null);if((Ne&6)!==0)throw Error(s(327));o=e.finishedWork;var f=e.finishedLanes;if(o===null)return null;if(e.finishedWork=null,e.finishedLanes=0,o===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var m=o.lanes|o.childLanes;if(nt(e,m),e===_t&&(lt=_t=null,wt=0),(o.subtreeFlags&2064)===0&&(o.flags&2064)===0||gl||(gl=!0,kd(Yi,function(){return Is(),null})),m=(o.flags&15990)!==0,(o.subtreeFlags&15990)!==0||m){m=gn.transition,gn.transition=null;var y=Ae;Ae=1;var k=Ne;Ne|=4,Ju.current=null,Xf(e,o),ud(o,e),cn(pe),gi=!!X,pe=X=null,e.current=o,ep(o),Ji(),Ne=k,Ae=y,gn.transition=m}else e.current=o;if(gl&&(gl=!1,Qr=e,vl=f),m=e.pendingLanes,m===0&&(Yr=null),di(o.stateNode),Wt(e,Ye()),n!==null)for(c=e.onRecoverableError,o=0;o<n.length;o++)f=n[o],c(f.value,{componentStack:f.stack,digest:f.digest});if(_l)throw _l=!1,e=Xu,Xu=null,e;return(vl&1)!==0&&e.tag!==0&&Is(),m=e.pendingLanes,(m&1)!==0?e===ec?Ho++:(Ho=0,ec=e):Ho=0,qr(),null}function Is(){if(Qr!==null){var e=Cr(vl),n=gn.transition,o=Ae;try{if(gn.transition=null,Ae=16>e?16:e,Qr===null)var c=!1;else{if(e=Qr,Qr=null,vl=0,(Ne&6)!==0)throw Error(s(331));var f=Ne;for(Ne|=4,ne=e.current;ne!==null;){var m=ne,y=m.child;if((ne.flags&16)!==0){var k=m.deletions;if(k!==null){for(var E=0;E<k.length;E++){var D=k[E];for(ne=D;ne!==null;){var q=ne;switch(q.tag){case 0:case 11:case 15:Fo(8,q,m)}var K=q.child;if(K!==null)K.return=q,ne=K;else for(;ne!==null;){q=ne;var V=q.sibling,ee=q.return;if(id(q),q===D){ne=null;break}if(V!==null){V.return=ee,ne=V;break}ne=ee}}}var re=m.alternate;if(re!==null){var se=re.child;if(se!==null){re.child=null;do{var ot=se.sibling;se.sibling=null,se=ot}while(se!==null)}}ne=m}}if((m.subtreeFlags&2064)!==0&&y!==null)y.return=m,ne=y;else e:for(;ne!==null;){if(m=ne,(m.flags&2048)!==0)switch(m.tag){case 0:case 11:case 15:Fo(9,m,m.return)}var I=m.sibling;if(I!==null){I.return=m.return,ne=I;break e}ne=m.return}}var O=e.current;for(ne=O;ne!==null;){y=ne;var j=y.child;if((y.subtreeFlags&2064)!==0&&j!==null)j.return=y,ne=j;else e:for(y=O;ne!==null;){if(k=ne,(k.flags&2048)!==0)try{switch(k.tag){case 0:case 11:case 15:fl(9,k)}}catch(le){rt(k,k.return,le)}if(k===y){ne=null;break e}var J=k.sibling;if(J!==null){J.return=k.return,ne=J;break e}ne=k.return}}if(Ne=f,qr(),Ht&&typeof Ht.onPostCommitFiberRoot=="function")try{Ht.onPostCommitFiberRoot(hi,e)}catch{}c=!0}return c}finally{Ae=o,gn.transition=n}}return!1}function wd(e,n,o){n=Os(o,n),n=Dh(e,n,1),e=Gr(e,n,1),n=Mt(),e!==null&&(Vt(e,1,n),Wt(e,n))}function rt(e,n,o){if(e.tag===3)wd(e,e,o);else for(;n!==null;){if(n.tag===3){wd(n,e,o);break}else if(n.tag===1){var c=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Yr===null||!Yr.has(c))){e=Os(o,e),e=Bh(n,e,1),n=Gr(n,e,1),e=Mt(),n!==null&&(Vt(n,1,e),Wt(n,e));break}}n=n.return}}function op(e,n,o){var c=e.pingCache;c!==null&&c.delete(n),n=Mt(),e.pingedLanes|=e.suspendedLanes&o,_t===e&&(wt&o)===o&&(ft===4||ft===3&&(wt&130023424)===wt&&500>Ye()-Qu?Ni(e,0):Yu|=o),Wt(e,n)}function xd(e,n){n===0&&((e.mode&1)===0?n=1:(n=Tr,Tr<<=1,(Tr&130023424)===0&&(Tr=4194304)));var o=Mt();e=dr(e,n),e!==null&&(Vt(e,n,o),Wt(e,o))}function ap(e){var n=e.memoizedState,o=0;n!==null&&(o=n.retryLane),xd(e,o)}function lp(e,n){var o=0;switch(e.tag){case 13:var c=e.stateNode,f=e.memoizedState;f!==null&&(o=f.retryLane);break;case 19:c=e.stateNode;break;default:throw Error(s(314))}c!==null&&c.delete(n),xd(e,o)}var Sd;Sd=function(e,n,o){if(e!==null)if(e.memoizedProps!==n.pendingProps||Bt.current)$t=!0;else{if((e.lanes&o)===0&&(n.flags&128)===0)return $t=!1,Gf(e,n,o);$t=(e.flags&131072)!==0}else $t=!1,Ge&&(n.flags&1048576)!==0&&th(n,Ja,n.index);switch(n.lanes=0,n.tag){case 2:var c=n.type;hl(e,n),e=n.pendingProps;var f=Ss(n,Pt.current);Cs(n,o),f=Lu(null,n,c,e,f,o);var m=Ou();return n.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,Ut(c)?(m=!0,qa(n)):m=!1,n.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,Su(n),f.updater=ul,n.stateNode=f,f._reactInternals=n,Mu(n,c,e,o),n=Uu(null,n,c,!0,m,o)):(n.tag=0,Ge&&m&&du(n),jt(null,n,f,o),n=n.child),n;case 16:c=n.elementType;e:{switch(hl(e,n),e=n.pendingProps,f=c._init,c=f(c._payload),n.type=c,f=n.tag=cp(c),e=Tn(c,e),f){case 0:n=Bu(null,n,c,e,o);break e;case 1:n=Kh(null,n,c,e,o);break e;case 11:n=Wh(null,n,c,e,o);break e;case 14:n=Zh(null,n,c,Tn(c.type,e),o);break e}throw Error(s(306,c,""))}return n;case 0:return c=n.type,f=n.pendingProps,f=n.elementType===c?f:Tn(c,f),Bu(e,n,c,f,o);case 1:return c=n.type,f=n.pendingProps,f=n.elementType===c?f:Tn(c,f),Kh(e,n,c,f,o);case 3:e:{if(Gh(n),e===null)throw Error(s(387));c=n.pendingProps,m=n.memoizedState,f=m.element,ch(e,n),nl(n,c,null,o);var y=n.memoizedState;if(c=y.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:y.cache,pendingSuspenseBoundaries:y.pendingSuspenseBoundaries,transitions:y.transitions},n.updateQueue.baseState=m,n.memoizedState=m,n.flags&256){f=Os(Error(s(423)),n),n=Jh(e,n,c,o,f);break e}else if(c!==f){f=Os(Error(s(424)),n),n=Jh(e,n,c,o,f);break e}else for(en=Wn(n.stateNode.containerInfo.firstChild),Xt=n,Ge=!0,En=null,o=lh(n,null,c,o),n.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Es(),c===f){n=pr(e,n,o);break e}jt(e,n,c,o)}n=n.child}return n;case 5:return fh(n),e===null&&mu(n),c=n.type,f=n.pendingProps,m=e!==null?e.memoizedProps:null,y=f.children,Ee(c,f)?y=null:m!==null&&Ee(c,m)&&(n.flags|=32),qh(e,n),jt(e,n,y,o),n.child;case 6:return e===null&&mu(n),null;case 13:return Yh(e,n,o);case 4:return ku(n,n.stateNode.containerInfo),c=n.pendingProps,e===null?n.child=Ts(n,null,c,o):jt(e,n,c,o),n.child;case 11:return c=n.type,f=n.pendingProps,f=n.elementType===c?f:Tn(c,f),Wh(e,n,c,f,o);case 7:return jt(e,n,n.pendingProps,o),n.child;case 8:return jt(e,n,n.pendingProps.children,o),n.child;case 12:return jt(e,n,n.pendingProps.children,o),n.child;case 10:e:{if(c=n.type._context,f=n.pendingProps,m=n.memoizedProps,y=f.value,He(Xa,c._currentValue),c._currentValue=y,m!==null)if(Yt(m.value,y)){if(m.children===f.children&&!Bt.current){n=pr(e,n,o);break e}}else for(m=n.child,m!==null&&(m.return=n);m!==null;){var k=m.dependencies;if(k!==null){y=m.child;for(var E=k.firstContext;E!==null;){if(E.context===c){if(m.tag===1){E=fr(-1,o&-o),E.tag=2;var D=m.updateQueue;if(D!==null){D=D.shared;var q=D.pending;q===null?E.next=E:(E.next=q.next,q.next=E),D.pending=E}}m.lanes|=o,E=m.alternate,E!==null&&(E.lanes|=o),wu(m.return,o,n),k.lanes|=o;break}E=E.next}}else if(m.tag===10)y=m.type===n.type?null:m.child;else if(m.tag===18){if(y=m.return,y===null)throw Error(s(341));y.lanes|=o,k=y.alternate,k!==null&&(k.lanes|=o),wu(y,o,n),y=m.sibling}else y=m.child;if(y!==null)y.return=m;else for(y=m;y!==null;){if(y===n){y=null;break}if(m=y.sibling,m!==null){m.return=y.return,y=m;break}y=y.return}m=y}jt(e,n,f.children,o),n=n.child}return n;case 9:return f=n.type,c=n.pendingProps.children,Cs(n,o),f=mn(f),c=c(f),n.flags|=1,jt(e,n,c,o),n.child;case 14:return c=n.type,f=Tn(c,n.pendingProps),f=Tn(c.type,f),Zh(e,n,c,f,o);case 15:return Hh(e,n,n.type,n.pendingProps,o);case 17:return c=n.type,f=n.pendingProps,f=n.elementType===c?f:Tn(c,f),hl(e,n),n.tag=1,Ut(c)?(e=!0,qa(n)):e=!1,Cs(n,o),Mh(n,c,f),Mu(n,c,f,o),Uu(null,n,c,!0,e,o);case 19:return Xh(e,n,o);case 22:return Vh(e,n,o)}throw Error(s(156,n.tag))};function kd(e,n){return xa(e,n)}function up(e,n,o,c){this.tag=e,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vn(e,n,o,c){return new up(e,n,o,c)}function oc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function cp(e){if(typeof e=="function")return oc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Je)return 11;if(e===on)return 14}return 2}function ti(e,n){var o=e.alternate;return o===null?(o=vn(e.tag,n,e.key,e.mode),o.elementType=e.elementType,o.type=e.type,o.stateNode=e.stateNode,o.alternate=e,e.alternate=o):(o.pendingProps=n,o.type=e.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=e.flags&14680064,o.childLanes=e.childLanes,o.lanes=e.lanes,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,n=e.dependencies,o.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},o.sibling=e.sibling,o.index=e.index,o.ref=e.ref,o}function Sl(e,n,o,c,f,m){var y=2;if(c=e,typeof e=="function")oc(e)&&(y=1);else if(typeof e=="string")y=5;else e:switch(e){case ke:return ji(o.children,f,m,n);case Fe:y=8,f|=8;break;case ze:return e=vn(12,o,n,f|2),e.elementType=ze,e.lanes=m,e;case Rt:return e=vn(13,o,n,f),e.elementType=Rt,e.lanes=m,e;case st:return e=vn(19,o,n,f),e.elementType=st,e.lanes=m,e;case Be:return kl(o,f,m,n);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Re:y=10;break e;case Ie:y=9;break e;case Je:y=11;break e;case on:y=14;break e;case De:y=16,c=null;break e}throw Error(s(130,e==null?e:typeof e,""))}return n=vn(y,o,n,f),n.elementType=e,n.type=c,n.lanes=m,n}function ji(e,n,o,c){return e=vn(7,e,c,n),e.lanes=o,e}function kl(e,n,o,c){return e=vn(22,e,c,n),e.elementType=Be,e.lanes=o,e.stateNode={isHidden:!1},e}function ac(e,n,o){return e=vn(6,e,null,n),e.lanes=o,e}function lc(e,n,o){return n=vn(4,e.children!==null?e.children:[],e.key,n),n.lanes=o,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function hp(e,n,o,c,f){this.tag=n,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Pr(0),this.expirationTimes=Pr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pr(0),this.identifierPrefix=c,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function uc(e,n,o,c,f,m,y,k,E){return e=new hp(e,n,o,k,E),n===1?(n=1,m===!0&&(n|=8)):n=0,m=vn(3,null,null,n),e.current=m,m.stateNode=e,m.memoizedState={element:c,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},Su(m),e}function dp(e,n,o){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:he,key:c==null?null:""+c,children:e,containerInfo:n,implementation:o}}function bd(e){if(!e)return Vr;e=e._reactInternals;e:{if(jn(e)!==e||e.tag!==1)throw Error(s(170));var n=e;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(Ut(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(s(171))}if(e.tag===1){var o=e.type;if(Ut(o))return Qc(e,o,n)}return n}function Ed(e,n,o,c,f,m,y,k,E){return e=uc(o,c,!0,e,f,m,y,k,E),e.context=bd(null),o=e.current,c=Mt(),f=Xr(o),m=fr(c,f),m.callback=n??null,Gr(o,m,f),e.current.lanes=f,Vt(e,f,c),Wt(e,c),e}function bl(e,n,o,c){var f=n.current,m=Mt(),y=Xr(f);return o=bd(o),n.context===null?n.context=o:n.pendingContext=o,n=fr(m,y),n.payload={element:e},c=c===void 0?null:c,c!==null&&(n.callback=c),e=Gr(f,n,y),e!==null&&(Ln(e,f,y,m),tl(e,f,y)),y}function El(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Td(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var o=e.retryLane;e.retryLane=o!==0&&o<n?o:n}}function cc(e,n){Td(e,n),(e=e.alternate)&&Td(e,n)}function fp(){return null}var Pd=typeof reportError=="function"?reportError:function(e){console.error(e)};function hc(e){this._internalRoot=e}Tl.prototype.render=hc.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(s(409));bl(e,n,null,null)},Tl.prototype.unmount=hc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;Ai(function(){bl(null,e,null,null)}),n[Me]=null}};function Tl(e){this._internalRoot=e}Tl.prototype.unstable_scheduleHydration=function(e){if(e){var n=ns();e={blockedOn:null,target:e,priority:n};for(var o=0;o<ct.length&&n!==0&&n<ct[o].priority;o++);ct.splice(o,0,e),o===0&&rs(e)}};function dc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Pl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Cd(){}function pp(e,n,o,c,f){if(f){if(typeof c=="function"){var m=c;c=function(){var D=El(y);m.call(D)}}var y=Ed(n,c,e,0,null,!1,!1,"",Cd);return e._reactRootContainer=y,e[Me]=y.current,$r(e.nodeType===8?e.parentNode:e),Ai(),y}for(;f=e.lastChild;)e.removeChild(f);if(typeof c=="function"){var k=c;c=function(){var D=El(E);k.call(D)}}var E=uc(e,0,!1,null,null,!1,!1,"",Cd);return e._reactRootContainer=E,e[Me]=E.current,$r(e.nodeType===8?e.parentNode:e),Ai(function(){bl(n,E,o,c)}),E}function Cl(e,n,o,c,f){var m=o._reactRootContainer;if(m){var y=m;if(typeof f=="function"){var k=f;f=function(){var E=El(y);k.call(E)}}bl(n,y,e,f)}else y=pp(o,n,e,f,c);return El(y)}es=function(e){switch(e.tag){case 3:var n=e.stateNode;if(n.current.memoizedState.isDehydrated){var o=Se(n.pendingLanes);o!==0&&(wn(n,o|1),Wt(n,Ye()),(Ne&6)===0&&(Ns=Ye()+500,qr()))}break;case 13:Ai(function(){var c=dr(e,1);if(c!==null){var f=Mt();Ln(c,e,1,f)}}),cc(e,1)}},Yn=function(e){if(e.tag===13){var n=dr(e,134217728);if(n!==null){var o=Mt();Ln(n,e,134217728,o)}cc(e,134217728)}},ts=function(e){if(e.tag===13){var n=Xr(e),o=dr(e,n);if(o!==null){var c=Mt();Ln(o,e,n,c)}cc(e,n)}},ns=function(){return Ae},fi=function(e,n){var o=Ae;try{return Ae=e,n()}finally{Ae=o}},qi=function(e,n,o){switch(n){case"input":if(si(e,o),n=o.name,o.type==="radio"&&n!=null){for(o=e;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<o.length;n++){var c=o[n];if(c!==e&&c.form===e.form){var f=ws(c);if(!f)throw Error(s(90));yr(c),si(c,f)}}}break;case"textarea":la(e,o);break;case"select":n=o.value,n!=null&&In(e,!!o.multiple,n,!1)}},ma=rc,_a=Ai;var mp={usingClientEntryPoint:!1,Events:[ar,lr,ws,fa,pa,rc]},Vo={findFiberByHostInstance:or,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_p={bundleType:Vo.bundleType,version:Vo.version,rendererPackageName:Vo.rendererPackageName,rendererConfig:Vo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ie.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=ya(e),e===null?null:e.stateNode},findFiberByHostInstance:Vo.findFiberByHostInstance||fp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ll=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ll.isDisabled&&Ll.supportsFiber)try{hi=Ll.inject(_p),Ht=Ll}catch{}}return Zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mp,Zt.createPortal=function(e,n){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!dc(n))throw Error(s(200));return dp(e,n,null,o)},Zt.createRoot=function(e,n){if(!dc(e))throw Error(s(299));var o=!1,c="",f=Pd;return n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(c=n.identifierPrefix),n.onRecoverableError!==void 0&&(f=n.onRecoverableError)),n=uc(e,1,!1,null,null,o,!1,c,f),e[Me]=n.current,$r(e.nodeType===8?e.parentNode:e),new hc(n)},Zt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=ya(n),e=e===null?null:e.stateNode,e},Zt.flushSync=function(e){return Ai(e)},Zt.hydrate=function(e,n,o){if(!Pl(n))throw Error(s(200));return Cl(null,e,n,!0,o)},Zt.hydrateRoot=function(e,n,o){if(!dc(e))throw Error(s(405));var c=o!=null&&o.hydratedSources||null,f=!1,m="",y=Pd;if(o!=null&&(o.unstable_strictMode===!0&&(f=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onRecoverableError!==void 0&&(y=o.onRecoverableError)),n=Ed(n,null,e,1,o??null,f,!1,m,y),e[Me]=n.current,$r(e),c)for(e=0;e<c.length;e++)o=c[e],f=o._getVersion,f=f(o._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[o,f]:n.mutableSourceEagerHydrationData.push(o,f);return new Tl(n)},Zt.render=function(e,n,o){if(!Pl(n))throw Error(s(200));return Cl(null,e,n,!1,o)},Zt.unmountComponentAtNode=function(e){if(!Pl(e))throw Error(s(40));return e._reactRootContainer?(Ai(function(){Cl(null,null,e,!1,function(){e._reactRootContainer=null,e[Me]=null})}),!0):!1},Zt.unstable_batchedUpdates=rc,Zt.unstable_renderSubtreeIntoContainer=function(e,n,o,c){if(!Pl(o))throw Error(s(200));if(e==null||e._reactInternals===void 0)throw Error(s(38));return Cl(e,n,o,!1,c)},Zt.version="18.3.1-next-f1338f8080-20240426",Zt}var Md;function hf(){if(Md)return mc.exports;Md=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(r){console.error(r)}}return a(),mc.exports=kp(),mc.exports}var zd;function bp(){if(zd)return Ol;zd=1;var a=hf();return Ol.createRoot=a.createRoot,Ol.hydrateRoot=a.hydrateRoot,Ol}var Ep=bp();const Tp=Uc(Ep);var Pp={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Cp=a=>a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Lp=(a,r)=>{const s=fe.forwardRef(({color:u="currentColor",size:h=24,strokeWidth:p=2,absoluteStrokeWidth:_,children:w,...v},S)=>fe.createElement("svg",{ref:S,...Pp,width:h,height:h,stroke:u,strokeWidth:_?Number(p)*24/Number(h):p,className:`lucide lucide-${Cp(a)}`,...v},[...r.map(([P,R])=>fe.createElement(P,R)),...(Array.isArray(w)?w:[w])||[]]));return s.displayName=`${a}`,s};var Fi=Lp;const Op=Fi("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),Rp=Fi("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),Ap=Fi("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),df=Fi("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),Np=Fi("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),Xo=Fi("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),Pc=Fi("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Ip=({currentView:a,onNavigate:r})=>T.jsx("nav",{className:"max-w-6xl mx-auto flex justify-between items-center mb-8 pt-4",children:T.jsxs("div",{className:"flex gap-4 text-gray-700 text-sm font-medium flex-wrap",children:[T.jsxs("button",{onClick:()=>r("home"),className:`flex items-center gap-2 hover:text-purple-700 transition ${a==="home"?"text-purple-900 font-bold":""}`,children:[T.jsx(Rp,{size:18}),"Home"]}),T.jsxs("button",{onClick:()=>r("leaderboard"),className:`hover:text-purple-700 transition ${a==="leaderboard"?"text-purple-900 font-bold":""}`,children:[T.jsx(Xo,{size:18,className:"inline mr-1"}),"Leaderboard"]}),T.jsxs("button",{onClick:()=>r("contribute"),className:`hover:text-purple-700 transition ${a==="contribute"?"text-purple-900 font-bold":""}`,children:[T.jsx(Pc,{size:18,className:"inline mr-1"}),"Contribute"]}),T.jsxs("button",{onClick:()=>r("about"),className:`hover:text-purple-700 transition ${a==="about"?"text-purple-900 font-bold":""}`,children:[T.jsx(Ap,{size:18,className:"inline mr-1"}),"About"]})]})}),jp=({onStartGame:a})=>T.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-pink-50 p-4",children:T.jsxs("div",{className:"max-w-2xl mx-auto text-center mt-20",children:[T.jsxs("h1",{className:"text-6xl font-bold mb-4",children:[T.jsx("span",{className:"text-purple-900",children:"Western"}),T.jsx("span",{className:"text-gray-700",children:"Guessr"})]}),T.jsx("p",{className:"text-gray-600 mb-8 text-lg",children:"Can you identify these spots around Western's campus?"}),T.jsx("button",{onClick:a,className:"bg-purple-900 text-white px-12 py-4 rounded-lg font-semibold hover:bg-purple-800 transition text-lg shadow-lg hover:shadow-xl transform hover:scale-105",children:"Start Daily Challenge"}),T.jsxs("div",{className:"mt-16 grid grid-cols-3 gap-4 text-center",children:[T.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[T.jsx(Np,{className:"mx-auto mb-2 text-purple-900",size:32}),T.jsx("p",{className:"font-bold text-2xl text-purple-900",children:5}),T.jsx("p",{className:"text-gray-600 text-sm",children:"Rounds"})]}),T.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[T.jsx(Xo,{className:"mx-auto mb-2 text-purple-900",size:32}),T.jsx("p",{className:"font-bold text-2xl text-purple-900",children:25e3.toLocaleString()}),T.jsx("p",{className:"text-gray-600 text-sm",children:"Max Points"})]}),T.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[T.jsx(df,{className:"mx-auto mb-2 text-purple-900",size:32}),T.jsx("p",{className:"font-bold text-2xl text-purple-900",children:"Daily"}),T.jsx("p",{className:"text-gray-600 text-sm",children:"Challenge"})]})]})]})});function ff(a,r){const s=fe.useRef(r);fe.useEffect(function(){r!==s.current&&a.attributionControl!=null&&(s.current!=null&&a.attributionControl.removeAttribution(s.current),r!=null&&a.attributionControl.addAttribution(r)),s.current=r},[a,r])}var Mp=hf();const zp=1;function Dp(a){return Object.freeze({__version:zp,map:a})}function Bp(a,r){return Object.freeze({...a,...r})}const pf=fe.createContext(null),mf=pf.Provider;function Fc(){const a=fe.useContext(pf);if(a==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return a}function Up(a){function r(s,u){const{instance:h,context:p}=a(s).current;return fe.useImperativeHandle(u,()=>h),s.children==null?null:jl.createElement(mf,{value:p},s.children)}return fe.forwardRef(r)}function $p(a){function r(s,u){const[h,p]=fe.useState(!1),{instance:_}=a(s,p).current;fe.useImperativeHandle(u,()=>_),fe.useEffect(function(){h&&_.update()},[_,h,s.children]);const w=_._contentNode;return w?Mp.createPortal(s.children,w):null}return fe.forwardRef(r)}function Fp(a){function r(s,u){const{instance:h}=a(s).current;return fe.useImperativeHandle(u,()=>h),null}return fe.forwardRef(r)}function _f(a,r){const s=fe.useRef();fe.useEffect(function(){return r!=null&&a.instance.on(r),s.current=r,function(){s.current!=null&&a.instance.off(s.current),s.current=null}},[a,r])}function Wc(a,r){const s=a.pane??r.pane;return s?{...a,pane:s}:a}function Wp(a,r){return function(u,h){const p=Fc(),_=a(Wc(u,p),p);return ff(p.map,u.attribution),_f(_.current,u.eventHandlers),r(_.current,p,u,h),_}}var Go={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var Zp=Go.exports,Dd;function Hp(){return Dd||(Dd=1,(function(a,r){(function(s,u){u(r)})(Zp,(function(s){var u="1.9.4";function h(t){var i,l,d,g;for(l=1,d=arguments.length;l<d;l++){g=arguments[l];for(i in g)t[i]=g[i]}return t}var p=Object.create||(function(){function t(){}return function(i){return t.prototype=i,new t}})();function _(t,i){var l=Array.prototype.slice;if(t.bind)return t.bind.apply(t,l.call(arguments,1));var d=l.call(arguments,2);return function(){return t.apply(i,d.length?d.concat(l.call(arguments)):arguments)}}var w=0;function v(t){return"_leaflet_id"in t||(t._leaflet_id=++w),t._leaflet_id}function S(t,i,l){var d,g,x,b;return b=function(){d=!1,g&&(x.apply(l,g),g=!1)},x=function(){d?g=arguments:(t.apply(l,arguments),setTimeout(b,i),d=!0)},x}function P(t,i,l){var d=i[1],g=i[0],x=d-g;return t===d&&l?t:((t-g)%x+x)%x+g}function R(){return!1}function N(t,i){if(i===!1)return t;var l=Math.pow(10,i===void 0?6:i);return Math.round(t*l)/l}function M(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function U(t){return M(t).split(/\s+/)}function B(t,i){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?p(t.options):{});for(var l in i)t.options[l]=i[l];return t.options}function H(t,i,l){var d=[];for(var g in t)d.push(encodeURIComponent(l?g.toUpperCase():g)+"="+encodeURIComponent(t[g]));return(!i||i.indexOf("?")===-1?"?":"&")+d.join("&")}var Q=/\{ *([\w_ -]+) *\}/g;function Y(t,i){return t.replace(Q,function(l,d){var g=i[d];if(g===void 0)throw new Error("No value provided for variable "+l);return typeof g=="function"&&(g=g(i)),g})}var G=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function ie(t,i){for(var l=0;l<t.length;l++)if(t[l]===i)return l;return-1}var Oe="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function he(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var ke=0;function Fe(t){var i=+new Date,l=Math.max(0,16-(i-ke));return ke=i+l,window.setTimeout(t,l)}var ze=window.requestAnimationFrame||he("RequestAnimationFrame")||Fe,Re=window.cancelAnimationFrame||he("CancelAnimationFrame")||he("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function Ie(t,i,l){if(l&&ze===Fe)t.call(i);else return ze.call(window,_(t,i))}function Je(t){t&&Re.call(window,t)}var Rt={__proto__:null,extend:h,create:p,bind:_,get lastId(){return w},stamp:v,throttle:S,wrapNum:P,falseFn:R,formatNum:N,trim:M,splitWords:U,setOptions:B,getParamString:H,template:Y,isArray:G,indexOf:ie,emptyImageUrl:Oe,requestFn:ze,cancelFn:Re,requestAnimFrame:Ie,cancelAnimFrame:Je};function st(){}st.extend=function(t){var i=function(){B(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},l=i.__super__=this.prototype,d=p(l);d.constructor=i,i.prototype=d;for(var g in this)Object.prototype.hasOwnProperty.call(this,g)&&g!=="prototype"&&g!=="__super__"&&(i[g]=this[g]);return t.statics&&h(i,t.statics),t.includes&&(on(t.includes),h.apply(null,[d].concat(t.includes))),h(d,t),delete d.statics,delete d.includes,d.options&&(d.options=l.options?p(l.options):{},h(d.options,t.options)),d._initHooks=[],d.callInitHooks=function(){if(!this._initHooksCalled){l.callInitHooks&&l.callInitHooks.call(this),this._initHooksCalled=!0;for(var x=0,b=d._initHooks.length;x<b;x++)d._initHooks[x].call(this)}},i},st.include=function(t){var i=this.prototype.options;return h(this.prototype,t),t.options&&(this.prototype.options=i,this.mergeOptions(t.options)),this},st.mergeOptions=function(t){return h(this.prototype.options,t),this},st.addInitHook=function(t){var i=Array.prototype.slice.call(arguments,1),l=typeof t=="function"?t:function(){this[t].apply(this,i)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(l),this};function on(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=G(t)?t:[t];for(var i=0;i<t.length;i++)t[i]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var De={on:function(t,i,l){if(typeof t=="object")for(var d in t)this._on(d,t[d],i);else{t=U(t);for(var g=0,x=t.length;g<x;g++)this._on(t[g],i,l)}return this},off:function(t,i,l){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var d in t)this._off(d,t[d],i);else{t=U(t);for(var g=arguments.length===1,x=0,b=t.length;x<b;x++)g?this._off(t[x]):this._off(t[x],i,l)}return this},_on:function(t,i,l,d){if(typeof i!="function"){console.warn("wrong listener type: "+typeof i);return}if(this._listens(t,i,l)===!1){l===this&&(l=void 0);var g={fn:i,ctx:l};d&&(g.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(g)}},_off:function(t,i,l){var d,g,x;if(this._events&&(d=this._events[t],!!d)){if(arguments.length===1){if(this._firingCount)for(g=0,x=d.length;g<x;g++)d[g].fn=R;delete this._events[t];return}if(typeof i!="function"){console.warn("wrong listener type: "+typeof i);return}var b=this._listens(t,i,l);if(b!==!1){var A=d[b];this._firingCount&&(A.fn=R,this._events[t]=d=d.slice()),d.splice(b,1)}}},fire:function(t,i,l){if(!this.listens(t,l))return this;var d=h({},i,{type:t,target:this,sourceTarget:i&&i.sourceTarget||this});if(this._events){var g=this._events[t];if(g){this._firingCount=this._firingCount+1||1;for(var x=0,b=g.length;x<b;x++){var A=g[x],z=A.fn;A.once&&this.off(t,z,A.ctx),z.call(A.ctx||this,d)}this._firingCount--}}return l&&this._propagateEvent(d),this},listens:function(t,i,l,d){typeof t!="string"&&console.warn('"string" type argument expected');var g=i;typeof i!="function"&&(d=!!i,g=void 0,l=void 0);var x=this._events&&this._events[t];if(x&&x.length&&this._listens(t,g,l)!==!1)return!0;if(d){for(var b in this._eventParents)if(this._eventParents[b].listens(t,i,l,d))return!0}return!1},_listens:function(t,i,l){if(!this._events)return!1;var d=this._events[t]||[];if(!i)return!!d.length;l===this&&(l=void 0);for(var g=0,x=d.length;g<x;g++)if(d[g].fn===i&&d[g].ctx===l)return g;return!1},once:function(t,i,l){if(typeof t=="object")for(var d in t)this._on(d,t[d],i,!0);else{t=U(t);for(var g=0,x=t.length;g<x;g++)this._on(t[g],i,l,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[v(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[v(t)],this},_propagateEvent:function(t){for(var i in this._eventParents)this._eventParents[i].fire(t.type,h({layer:t.target,propagatedFrom:t.target},t),!0)}};De.addEventListener=De.on,De.removeEventListener=De.clearAllEventListeners=De.off,De.addOneTimeEventListener=De.once,De.fireEvent=De.fire,De.hasEventListeners=De.listens;var Be=st.extend(De);function F(t,i,l){this.x=l?Math.round(t):t,this.y=l?Math.round(i):i}var me=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};F.prototype={clone:function(){return new F(this.x,this.y)},add:function(t){return this.clone()._add(W(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(W(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new F(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new F(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=me(this.x),this.y=me(this.y),this},distanceTo:function(t){t=W(t);var i=t.x-this.x,l=t.y-this.y;return Math.sqrt(i*i+l*l)},equals:function(t){return t=W(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=W(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+N(this.x)+", "+N(this.y)+")"}};function W(t,i,l){return t instanceof F?t:G(t)?new F(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new F(t.x,t.y):new F(t,i,l)}function C(t,i){if(t)for(var l=i?[t,i]:t,d=0,g=l.length;d<g;d++)this.extend(l[d])}C.prototype={extend:function(t){var i,l;if(!t)return this;if(t instanceof F||typeof t[0]=="number"||"x"in t)i=l=W(t);else if(t=$(t),i=t.min,l=t.max,!i||!l)return this;return!this.min&&!this.max?(this.min=i.clone(),this.max=l.clone()):(this.min.x=Math.min(i.x,this.min.x),this.max.x=Math.max(l.x,this.max.x),this.min.y=Math.min(i.y,this.min.y),this.max.y=Math.max(l.y,this.max.y)),this},getCenter:function(t){return W((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return W(this.min.x,this.max.y)},getTopRight:function(){return W(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var i,l;return typeof t[0]=="number"||t instanceof F?t=W(t):t=$(t),t instanceof C?(i=t.min,l=t.max):i=l=t,i.x>=this.min.x&&l.x<=this.max.x&&i.y>=this.min.y&&l.y<=this.max.y},intersects:function(t){t=$(t);var i=this.min,l=this.max,d=t.min,g=t.max,x=g.x>=i.x&&d.x<=l.x,b=g.y>=i.y&&d.y<=l.y;return x&&b},overlaps:function(t){t=$(t);var i=this.min,l=this.max,d=t.min,g=t.max,x=g.x>i.x&&d.x<l.x,b=g.y>i.y&&d.y<l.y;return x&&b},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var i=this.min,l=this.max,d=Math.abs(i.x-l.x)*t,g=Math.abs(i.y-l.y)*t;return $(W(i.x-d,i.y-g),W(l.x+d,l.y+g))},equals:function(t){return t?(t=$(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight())):!1}};function $(t,i){return!t||t instanceof C?t:new C(t,i)}function de(t,i){if(t)for(var l=i?[t,i]:t,d=0,g=l.length;d<g;d++)this.extend(l[d])}de.prototype={extend:function(t){var i=this._southWest,l=this._northEast,d,g;if(t instanceof oe)d=t,g=t;else if(t instanceof de){if(d=t._southWest,g=t._northEast,!d||!g)return this}else return t?this.extend(te(t)||ue(t)):this;return!i&&!l?(this._southWest=new oe(d.lat,d.lng),this._northEast=new oe(g.lat,g.lng)):(i.lat=Math.min(d.lat,i.lat),i.lng=Math.min(d.lng,i.lng),l.lat=Math.max(g.lat,l.lat),l.lng=Math.max(g.lng,l.lng)),this},pad:function(t){var i=this._southWest,l=this._northEast,d=Math.abs(i.lat-l.lat)*t,g=Math.abs(i.lng-l.lng)*t;return new de(new oe(i.lat-d,i.lng-g),new oe(l.lat+d,l.lng+g))},getCenter:function(){return new oe((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new oe(this.getNorth(),this.getWest())},getSouthEast:function(){return new oe(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof oe||"lat"in t?t=te(t):t=ue(t);var i=this._southWest,l=this._northEast,d,g;return t instanceof de?(d=t.getSouthWest(),g=t.getNorthEast()):d=g=t,d.lat>=i.lat&&g.lat<=l.lat&&d.lng>=i.lng&&g.lng<=l.lng},intersects:function(t){t=ue(t);var i=this._southWest,l=this._northEast,d=t.getSouthWest(),g=t.getNorthEast(),x=g.lat>=i.lat&&d.lat<=l.lat,b=g.lng>=i.lng&&d.lng<=l.lng;return x&&b},overlaps:function(t){t=ue(t);var i=this._southWest,l=this._northEast,d=t.getSouthWest(),g=t.getNorthEast(),x=g.lat>i.lat&&d.lat<l.lat,b=g.lng>i.lng&&d.lng<l.lng;return x&&b},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,i){return t?(t=ue(t),this._southWest.equals(t.getSouthWest(),i)&&this._northEast.equals(t.getNorthEast(),i)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ue(t,i){return t instanceof de?t:new de(t,i)}function oe(t,i,l){if(isNaN(t)||isNaN(i))throw new Error("Invalid LatLng object: ("+t+", "+i+")");this.lat=+t,this.lng=+i,l!==void 0&&(this.alt=+l)}oe.prototype={equals:function(t,i){if(!t)return!1;t=te(t);var l=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return l<=(i===void 0?1e-9:i)},toString:function(t){return"LatLng("+N(this.lat,t)+", "+N(this.lng,t)+")"},distanceTo:function(t){return Te.distance(this,te(t))},wrap:function(){return Te.wrapLatLng(this)},toBounds:function(t){var i=180*t/40075017,l=i/Math.cos(Math.PI/180*this.lat);return ue([this.lat-i,this.lng-l],[this.lat+i,this.lng+l])},clone:function(){return new oe(this.lat,this.lng,this.alt)}};function te(t,i,l){return t instanceof oe?t:G(t)&&typeof t[0]!="object"?t.length===3?new oe(t[0],t[1],t[2]):t.length===2?new oe(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new oe(t.lat,"lng"in t?t.lng:t.lon,t.alt):i===void 0?null:new oe(t,i,l)}var Le={latLngToPoint:function(t,i){var l=this.projection.project(t),d=this.scale(i);return this.transformation._transform(l,d)},pointToLatLng:function(t,i){var l=this.scale(i),d=this.transformation.untransform(t,l);return this.projection.unproject(d)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var i=this.projection.bounds,l=this.scale(t),d=this.transformation.transform(i.min,l),g=this.transformation.transform(i.max,l);return new C(d,g)},infinite:!1,wrapLatLng:function(t){var i=this.wrapLng?P(t.lng,this.wrapLng,!0):t.lng,l=this.wrapLat?P(t.lat,this.wrapLat,!0):t.lat,d=t.alt;return new oe(l,i,d)},wrapLatLngBounds:function(t){var i=t.getCenter(),l=this.wrapLatLng(i),d=i.lat-l.lat,g=i.lng-l.lng;if(d===0&&g===0)return t;var x=t.getSouthWest(),b=t.getNorthEast(),A=new oe(x.lat-d,x.lng-g),z=new oe(b.lat-d,b.lng-g);return new de(A,z)}},Te=h({},Le,{wrapLng:[-180,180],R:6371e3,distance:function(t,i){var l=Math.PI/180,d=t.lat*l,g=i.lat*l,x=Math.sin((i.lat-t.lat)*l/2),b=Math.sin((i.lng-t.lng)*l/2),A=x*x+Math.cos(d)*Math.cos(g)*b*b,z=2*Math.atan2(Math.sqrt(A),Math.sqrt(1-A));return this.R*z}}),We=6378137,vt={R:We,MAX_LATITUDE:85.0511287798,project:function(t){var i=Math.PI/180,l=this.MAX_LATITUDE,d=Math.max(Math.min(l,t.lat),-l),g=Math.sin(d*i);return new F(this.R*t.lng*i,this.R*Math.log((1+g)/(1-g))/2)},unproject:function(t){var i=180/Math.PI;return new oe((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*i,t.x*i/this.R)},bounds:(function(){var t=We*Math.PI;return new C([-t,-t],[t,t])})()};function vr(t,i,l,d){if(G(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=i,this._c=l,this._d=d}vr.prototype={transform:function(t,i){return this._transform(t.clone(),i)},_transform:function(t,i){return i=i||1,t.x=i*(this._a*t.x+this._b),t.y=i*(this._c*t.y+this._d),t},untransform:function(t,i){return i=i||1,new F((t.x/i-this._b)/this._a,(t.y/i-this._d)/this._c)}};function yr(t,i,l,d){return new vr(t,i,l,d)}var wr=h({},Te,{code:"EPSG:3857",projection:vt,transformation:(function(){var t=.5/(Math.PI*vt.R);return yr(t,.5,-t,.5)})()}),Vs=h({},wr,{code:"EPSG:900913"});function qs(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Ks(t,i){var l="",d,g,x,b,A,z;for(d=0,x=t.length;d<x;d++){for(A=t[d],g=0,b=A.length;g<b;g++)z=A[g],l+=(g?"L":"M")+z.x+" "+z.y;l+=i?ae.svg?"z":"x":""}return l||"M0 0"}var si=document.documentElement.style,oi="ActiveXObject"in window,Gs=oi&&!document.addEventListener,xr="msLaunchUri"in navigator&&!("documentMode"in document),In=kt("webkit"),Wi=kt("android"),Js=kt("android 2")||kt("android 3"),la=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ua=Wi&&kt("Google")&&la<537&&!("AudioNode"in window),Zi=!!window.opera,Hi=!xr&&kt("chrome"),ai=kt("gecko")&&!In&&!Zi&&!oi,ca=!Hi&&kt("safari"),Sr=kt("phantom"),kr="OTransition"in si,Wl=navigator.platform.indexOf("Win")===0,Ys=oi&&"transition"in si,Vi="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Js,ha="MozPerspective"in si,Qs=!window.L_DISABLE_3D&&(Ys||Vi||ha)&&!kr&&!Sr,qn=typeof orientation<"u"||kt("mobile"),Xs=qn&&In,eo=qn&&Vi,qi=!window.PointerEvent&&window.MSPointerEvent,Kn=!!(window.PointerEvent||qi),Gn="ontouchstart"in window||!!window.TouchEvent,da=!window.L_NO_TOUCH&&(Gn||Kn),fa=qn&&Zi,pa=qn&&ai,ma=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,_a=(function(){var t=!1;try{var i=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",R,i),window.removeEventListener("testPassiveEventSupport",R,i)}catch{}return t})(),to=(function(){return!!document.createElement("canvas").getContext})(),Ki=!!(document.createElementNS&&qs("svg").createSVGRect),li=!!Ki&&(function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),no=!Ki&&(function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var i=t.firstChild;return i.style.behavior="url(#default#VML)",i&&typeof i.adj=="object"}catch{return!1}})(),ui=navigator.platform.indexOf("Mac")===0,Zl=navigator.platform.indexOf("Linux")===0;function kt(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var ae={ie:oi,ielt9:Gs,edge:xr,webkit:In,android:Wi,android23:Js,androidStock:ua,opera:Zi,chrome:Hi,gecko:ai,safari:ca,phantom:Sr,opera12:kr,win:Wl,ie3d:Ys,webkit3d:Vi,gecko3d:ha,any3d:Qs,mobile:qn,mobileWebkit:Xs,mobileWebkit3d:eo,msPointer:qi,pointer:Kn,touch:da,touchNative:Gn,mobileOpera:fa,mobileGecko:pa,retina:ma,passiveEvents:_a,canvas:to,svg:Ki,vml:no,inlineSvg:li,mac:ui,linux:Zl},ci=ae.msPointer?"MSPointerDown":"pointerdown",Gi=ae.msPointer?"MSPointerMove":"pointermove",ga=ae.msPointer?"MSPointerUp":"pointerup",va=ae.msPointer?"MSPointerCancel":"pointercancel",ro={touchstart:ci,touchmove:Gi,touchend:ga,touchcancel:va},jn={touchstart:Ye,touchmove:Ji,touchend:Ji,touchcancel:Ji},Jn={},io=!1;function Hl(t,i,l){return i==="touchstart"&&Vl(),jn[i]?(l=jn[i].bind(this,l),t.addEventListener(ro[i],l,!1),l):(console.warn("wrong event specified:",i),R)}function ya(t,i,l){if(!ro[i]){console.warn("wrong event specified:",i);return}t.removeEventListener(ro[i],l,!1)}function wa(t){Jn[t.pointerId]=t}function xa(t){Jn[t.pointerId]&&(Jn[t.pointerId]=t)}function so(t){delete Jn[t.pointerId]}function Vl(){io||(document.addEventListener(ci,wa,!0),document.addEventListener(Gi,xa,!0),document.addEventListener(ga,so,!0),document.addEventListener(va,so,!0),io=!0)}function Ji(t,i){if(i.pointerType!==(i.MSPOINTER_TYPE_MOUSE||"mouse")){i.touches=[];for(var l in Jn)i.touches.push(Jn[l]);i.changedTouches=[i],t(i)}}function Ye(t,i){i.MSPOINTER_TYPE_TOUCH&&i.pointerType===i.MSPOINTER_TYPE_TOUCH&&Qe(i),Ji(t,i)}function ql(t){var i={},l,d;for(d in t)l=t[d],i[d]=l&&l.bind?l.bind(t):l;return t=i,i.type="dblclick",i.detail=2,i.isTrusted=!1,i._simulated=!0,i}var oo=200;function Sa(t,i){t.addEventListener("dblclick",i);var l=0,d;function g(x){if(x.detail!==1){d=x.detail;return}if(!(x.pointerType==="mouse"||x.sourceCapabilities&&!x.sourceCapabilities.firesTouchEvents)){var b=Xn(x);if(!(b.some(function(z){return z instanceof HTMLLabelElement&&z.attributes.for})&&!b.some(function(z){return z instanceof HTMLInputElement||z instanceof HTMLSelectElement}))){var A=Date.now();A-l<=oo?(d++,d===2&&i(ql(x))):d=1,l=A}}}return t.addEventListener("click",g),{dblclick:i,simDblclick:g}}function Yi(t,i){t.removeEventListener("dblclick",i.dblclick),t.removeEventListener("click",i.simDblclick)}var ao=Pr(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),br=Pr(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),hi=br==="webkitTransition"||br==="OTransition"?br+"End":"transitionend";function Ht(t){return typeof t=="string"?document.getElementById(t):t}function di(t,i){var l=t.style[i]||t.currentStyle&&t.currentStyle[i];if((!l||l==="auto")&&document.defaultView){var d=document.defaultView.getComputedStyle(t,null);l=d?d[i]:null}return l==="auto"?null:l}function be(t,i,l){var d=document.createElement(t);return d.className=i||"",l&&l.appendChild(d),d}function qe(t){var i=t.parentNode;i&&i.removeChild(t)}function Qi(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function Er(t){var i=t.parentNode;i&&i.lastChild!==t&&i.appendChild(t)}function yn(t){var i=t.parentNode;i&&i.firstChild!==t&&i.insertBefore(t,i.firstChild)}function Tr(t,i){if(t.classList!==void 0)return t.classList.contains(i);var l=Xi(t);return l.length>0&&new RegExp("(^|\\s)"+i+"(\\s|$)").test(l)}function Se(t,i){if(t.classList!==void 0)for(var l=U(i),d=0,g=l.length;d<g;d++)t.classList.add(l[d]);else if(!Tr(t,i)){var x=Xi(t);lo(t,(x?x+" ":"")+i)}}function Ze(t,i){t.classList!==void 0?t.classList.remove(i):lo(t,M((" "+Xi(t)+" ").replace(" "+i+" "," ")))}function lo(t,i){t.className.baseVal===void 0?t.className=i:t.className.baseVal=i}function Xi(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function bt(t,i){"opacity"in t.style?t.style.opacity=i:"filter"in t.style&&ka(t,i)}function ka(t,i){var l=!1,d="DXImageTransform.Microsoft.Alpha";try{l=t.filters.item(d)}catch{if(i===1)return}i=Math.round(i*100),l?(l.Enabled=i!==100,l.Opacity=i):t.style.filter+=" progid:"+d+"(opacity="+i+")"}function Pr(t){for(var i=document.documentElement.style,l=0;l<t.length;l++)if(t[l]in i)return t[l];return!1}function Vt(t,i,l){var d=i||new F(0,0);t.style[ao]=(ae.ie3d?"translate("+d.x+"px,"+d.y+"px)":"translate3d("+d.x+"px,"+d.y+"px,0)")+(l?" scale("+l+")":"")}function nt(t,i){t._leaflet_pos=i,ae.any3d?Vt(t,i):(t.style.left=i.x+"px",t.style.top=i.y+"px")}function wn(t){return t._leaflet_pos||new F(0,0)}var Ae,Cr,es;if("onselectstart"in document)Ae=function(){we(window,"selectstart",Qe)},Cr=function(){Ue(window,"selectstart",Qe)};else{var Yn=Pr(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ae=function(){if(Yn){var t=document.documentElement.style;es=t[Yn],t[Yn]="none"}},Cr=function(){Yn&&(document.documentElement.style[Yn]=es,es=void 0)}}function ts(){we(window,"dragstart",Qe)}function ns(){Ue(window,"dragstart",Qe)}var fi,pi;function Lr(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&(qt(),fi=t,pi=t.style.outlineStyle,t.style.outlineStyle="none",we(window,"keydown",qt))}function qt(){fi&&(fi.style.outlineStyle=pi,fi=void 0,pi=void 0,Ue(window,"keydown",qt))}function xn(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function an(t){var i=t.getBoundingClientRect();return{x:i.width/t.offsetWidth||1,y:i.height/t.offsetHeight||1,boundingClientRect:i}}var mi={__proto__:null,TRANSFORM:ao,TRANSITION:br,TRANSITION_END:hi,get:Ht,getStyle:di,create:be,remove:qe,empty:Qi,toFront:Er,toBack:yn,hasClass:Tr,addClass:Se,removeClass:Ze,setClass:lo,getClass:Xi,setOpacity:bt,testProp:Pr,setTransform:Vt,setPosition:nt,getPosition:wn,get disableTextSelection(){return Ae},get enableTextSelection(){return Cr},disableImageDrag:ts,enableImageDrag:ns,preventOutline:Lr,restoreOutline:qt,getSizedParentNode:xn,getScale:an};function we(t,i,l,d){if(i&&typeof i=="object")for(var g in i)co(t,g,i[g],l);else{i=U(i);for(var x=0,b=i.length;x<b;x++)co(t,i[x],l,d)}return this}var ct="_leaflet_events";function Ue(t,i,l,d){if(arguments.length===1)uo(t),delete t[ct];else if(i&&typeof i=="object")for(var g in i)rs(t,g,i[g],l);else if(i=U(i),arguments.length===2)uo(t,function(A){return ie(i,A)!==-1});else for(var x=0,b=i.length;x<b;x++)rs(t,i[x],l,d);return this}function uo(t,i){for(var l in t[ct]){var d=l.split(/\d/)[0];(!i||i(d))&&rs(t,d,null,null,l)}}var Qn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function co(t,i,l,d){var g=i+v(l)+(d?"_"+v(d):"");if(t[ct]&&t[ct][g])return this;var x=function(A){return l.call(d||t,A||window.event)},b=x;!ae.touchNative&&ae.pointer&&i.indexOf("touch")===0?x=Hl(t,i,x):ae.touch&&i==="dblclick"?x=Sa(t,x):"addEventListener"in t?i==="touchstart"||i==="touchmove"||i==="wheel"||i==="mousewheel"?t.addEventListener(Qn[i]||i,x,ae.passiveEvents?{passive:!1}:!1):i==="mouseenter"||i==="mouseleave"?(x=function(A){A=A||window.event,vi(t,A)&&b(A)},t.addEventListener(Qn[i],x,!1)):t.addEventListener(i,b,!1):t.attachEvent("on"+i,x),t[ct]=t[ct]||{},t[ct][g]=x}function rs(t,i,l,d,g){g=g||i+v(l)+(d?"_"+v(d):"");var x=t[ct]&&t[ct][g];if(!x)return this;!ae.touchNative&&ae.pointer&&i.indexOf("touch")===0?ya(t,i,x):ae.touch&&i==="dblclick"?Yi(t,x):"removeEventListener"in t?t.removeEventListener(Qn[i]||i,x,!1):t.detachEvent("on"+i,x),t[ct][g]=null}function ln(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function is(t){return co(t,"wheel",ln),this}function _i(t){return we(t,"mousedown touchstart dblclick contextmenu",ln),t._leaflet_disable_click=!0,this}function Qe(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function Kt(t){return Qe(t),ln(t),this}function Xn(t){if(t.composedPath)return t.composedPath();for(var i=[],l=t.target;l;)i.push(l),l=l.parentNode;return i}function gi(t,i){if(!i)return new F(t.clientX,t.clientY);var l=an(i),d=l.boundingClientRect;return new F((t.clientX-d.left)/l.x-i.clientLeft,(t.clientY-d.top)/l.y-i.clientTop)}var Kl=ae.linux&&ae.chrome?window.devicePixelRatio:ae.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ba(t){return ae.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/Kl:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function vi(t,i){var l=i.relatedTarget;if(!l)return!0;try{for(;l&&l!==t;)l=l.parentNode}catch{return!1}return l!==t}var ss={__proto__:null,on:we,off:Ue,stopPropagation:ln,disableScrollPropagation:is,disableClickPropagation:_i,preventDefault:Qe,stop:Kt,getPropagationPath:Xn,getMousePosition:gi,getWheelDelta:ba,isExternalTarget:vi,addListener:we,removeListener:Ue},os=Be.extend({run:function(t,i,l,d){this.stop(),this._el=t,this._inProgress=!0,this._duration=l||.25,this._easeOutPower=1/Math.max(d||.5,.2),this._startPos=wn(t),this._offset=i.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=Ie(this._animate,this),this._step()},_step:function(t){var i=+new Date-this._startTime,l=this._duration*1e3;i<l?this._runFrame(this._easeOut(i/l),t):(this._runFrame(1),this._complete())},_runFrame:function(t,i){var l=this._startPos.add(this._offset.multiplyBy(t));i&&l._round(),nt(this._el,l),this.fire("step")},_complete:function(){Je(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),Ce=Be.extend({options:{crs:wr,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,i){i=B(this,i),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=_(this._onResize,this),this._initEvents(),i.maxBounds&&this.setMaxBounds(i.maxBounds),i.zoom!==void 0&&(this._zoom=this._limitZoom(i.zoom)),i.center&&i.zoom!==void 0&&this.setView(te(i.center),i.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=br&&ae.any3d&&!ae.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),we(this._proxy,hi,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,i,l){if(i=i===void 0?this._zoom:this._limitZoom(i),t=this._limitCenter(te(t),i,this.options.maxBounds),l=l||{},this._stop(),this._loaded&&!l.reset&&l!==!0){l.animate!==void 0&&(l.zoom=h({animate:l.animate},l.zoom),l.pan=h({animate:l.animate,duration:l.duration},l.pan));var d=this._zoom!==i?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,i,l.zoom):this._tryAnimatedPan(t,l.pan);if(d)return clearTimeout(this._sizeTimer),this}return this._resetView(t,i,l.pan&&l.pan.noMoveStart),this},setZoom:function(t,i){return this._loaded?this.setView(this.getCenter(),t,{zoom:i}):(this._zoom=t,this)},zoomIn:function(t,i){return t=t||(ae.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,i)},zoomOut:function(t,i){return t=t||(ae.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,i)},setZoomAround:function(t,i,l){var d=this.getZoomScale(i),g=this.getSize().divideBy(2),x=t instanceof F?t:this.latLngToContainerPoint(t),b=x.subtract(g).multiplyBy(1-1/d),A=this.containerPointToLatLng(g.add(b));return this.setView(A,i,{zoom:l})},_getBoundsCenterZoom:function(t,i){i=i||{},t=t.getBounds?t.getBounds():ue(t);var l=W(i.paddingTopLeft||i.padding||[0,0]),d=W(i.paddingBottomRight||i.padding||[0,0]),g=this.getBoundsZoom(t,!1,l.add(d));if(g=typeof i.maxZoom=="number"?Math.min(i.maxZoom,g):g,g===1/0)return{center:t.getCenter(),zoom:g};var x=d.subtract(l).divideBy(2),b=this.project(t.getSouthWest(),g),A=this.project(t.getNorthEast(),g),z=this.unproject(b.add(A).divideBy(2).add(x),g);return{center:z,zoom:g}},fitBounds:function(t,i){if(t=ue(t),!t.isValid())throw new Error("Bounds are not valid.");var l=this._getBoundsCenterZoom(t,i);return this.setView(l.center,l.zoom,i)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,i){return this.setView(t,this._zoom,{pan:i})},panBy:function(t,i){if(t=W(t).round(),i=i||{},!t.x&&!t.y)return this.fire("moveend");if(i.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new os,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),i.noMoveStart||this.fire("movestart"),i.animate!==!1){Se(this._mapPane,"leaflet-pan-anim");var l=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,l,i.duration||.25,i.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,i,l){if(l=l||{},l.animate===!1||!ae.any3d)return this.setView(t,i,l);this._stop();var d=this.project(this.getCenter()),g=this.project(t),x=this.getSize(),b=this._zoom;t=te(t),i=i===void 0?b:i;var A=Math.max(x.x,x.y),z=A*this.getZoomScale(b,i),Z=g.distanceTo(d)||1,X=1.42,pe=X*X;function Ee(Me){var Zr=Me?-1:1,lu=Me?z:A,uu=z*z-A*A+Zr*pe*pe*Z*Z,or=2*lu*pe*Z,ar=uu/or,lr=Math.sqrt(ar*ar+1)-ar,ws=lr<1e-9?-18:Math.log(lr);return ws}function ht(Me){return(Math.exp(Me)-Math.exp(-Me))/2}function at(Me){return(Math.exp(Me)+Math.exp(-Me))/2}function It(Me){return ht(Me)/at(Me)}var Tt=Ee(0);function Fr(Me){return A*(at(Tt)/at(Tt+X*Me))}function Ao(Me){return A*(at(Tt)*It(Tt+X*Me)-ht(Tt))/pe}function Wn(Me){return 1-Math.pow(1-Me,1.5)}var Ha=Date.now(),sr=(Ee(1)-Tt)/X,dn=l.duration?1e3*l.duration:1e3*sr*.8;function Wr(){var Me=(Date.now()-Ha)/dn,Zr=Wn(Me)*sr;Me<=1?(this._flyToFrame=Ie(Wr,this),this._move(this.unproject(d.add(g.subtract(d).multiplyBy(Ao(Zr)/Z)),b),this.getScaleZoom(A/Fr(Zr),b),{flyTo:!0})):this._move(t,i)._moveEnd(!0)}return this._moveStart(!0,l.noMoveStart),Wr.call(this),this},flyToBounds:function(t,i){var l=this._getBoundsCenterZoom(t,i);return this.flyTo(l.center,l.zoom,i)},setMaxBounds:function(t){return t=ue(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var i=this.options.minZoom;return this.options.minZoom=t,this._loaded&&i!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var i=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&i!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,i){this._enforcingBounds=!0;var l=this.getCenter(),d=this._limitCenter(l,this._zoom,ue(t));return l.equals(d)||this.panTo(d,i),this._enforcingBounds=!1,this},panInside:function(t,i){i=i||{};var l=W(i.paddingTopLeft||i.padding||[0,0]),d=W(i.paddingBottomRight||i.padding||[0,0]),g=this.project(this.getCenter()),x=this.project(t),b=this.getPixelBounds(),A=$([b.min.add(l),b.max.subtract(d)]),z=A.getSize();if(!A.contains(x)){this._enforcingBounds=!0;var Z=x.subtract(A.getCenter()),X=A.extend(x).getSize().subtract(z);g.x+=Z.x<0?-X.x:X.x,g.y+=Z.y<0?-X.y:X.y,this.panTo(this.unproject(g),i),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=h({animate:!1,pan:!0},t===!0?{animate:!0}:t);var i=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var l=this.getSize(),d=i.divideBy(2).round(),g=l.divideBy(2).round(),x=d.subtract(g);return!x.x&&!x.y?this:(t.animate&&t.pan?this.panBy(x):(t.pan&&this._rawPanBy(x),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(_(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:i,newSize:l}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=h({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var i=_(this._handleGeolocationResponse,this),l=_(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(i,l,t):navigator.geolocation.getCurrentPosition(i,l,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var i=t.code,l=t.message||(i===1?"permission denied":i===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:i,message:"Geolocation error: "+l+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var i=t.coords.latitude,l=t.coords.longitude,d=new oe(i,l),g=d.toBounds(t.coords.accuracy*2),x=this._locateOptions;if(x.setView){var b=this.getBoundsZoom(g);this.setView(d,x.maxZoom?Math.min(b,x.maxZoom):b)}var A={latlng:d,bounds:g,timestamp:t.timestamp};for(var z in t.coords)typeof t.coords[z]=="number"&&(A[z]=t.coords[z]);this.fire("locationfound",A)}},addHandler:function(t,i){if(!i)return this;var l=this[t]=new i(this);return this._handlers.push(l),this.options[t]&&l.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),qe(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Je(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)qe(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,i){var l="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),d=be("div",l,i||this._mapPane);return t&&(this._panes[t]=d),d},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),i=this.unproject(t.getBottomLeft()),l=this.unproject(t.getTopRight());return new de(i,l)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,i,l){t=ue(t),l=W(l||[0,0]);var d=this.getZoom()||0,g=this.getMinZoom(),x=this.getMaxZoom(),b=t.getNorthWest(),A=t.getSouthEast(),z=this.getSize().subtract(l),Z=$(this.project(A,d),this.project(b,d)).getSize(),X=ae.any3d?this.options.zoomSnap:1,pe=z.x/Z.x,Ee=z.y/Z.y,ht=i?Math.max(pe,Ee):Math.min(pe,Ee);return d=this.getScaleZoom(ht,d),X&&(d=Math.round(d/(X/100))*(X/100),d=i?Math.ceil(d/X)*X:Math.floor(d/X)*X),Math.max(g,Math.min(x,d))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new F(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,i){var l=this._getTopLeftPoint(t,i);return new C(l,l.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,i){var l=this.options.crs;return i=i===void 0?this._zoom:i,l.scale(t)/l.scale(i)},getScaleZoom:function(t,i){var l=this.options.crs;i=i===void 0?this._zoom:i;var d=l.zoom(t*l.scale(i));return isNaN(d)?1/0:d},project:function(t,i){return i=i===void 0?this._zoom:i,this.options.crs.latLngToPoint(te(t),i)},unproject:function(t,i){return i=i===void 0?this._zoom:i,this.options.crs.pointToLatLng(W(t),i)},layerPointToLatLng:function(t){var i=W(t).add(this.getPixelOrigin());return this.unproject(i)},latLngToLayerPoint:function(t){var i=this.project(te(t))._round();return i._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(te(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(ue(t))},distance:function(t,i){return this.options.crs.distance(te(t),te(i))},containerPointToLayerPoint:function(t){return W(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return W(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var i=this.containerPointToLayerPoint(W(t));return this.layerPointToLatLng(i)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(te(t)))},mouseEventToContainerPoint:function(t){return gi(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var i=this._container=Ht(t);if(i){if(i._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");we(i,"scroll",this._onScroll,this),this._containerId=v(i)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&ae.any3d,Se(t,"leaflet-container"+(ae.touch?" leaflet-touch":"")+(ae.retina?" leaflet-retina":"")+(ae.ielt9?" leaflet-oldie":"")+(ae.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var i=di(t,"position");i!=="absolute"&&i!=="relative"&&i!=="fixed"&&i!=="sticky"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),nt(this._mapPane,new F(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Se(t.markerPane,"leaflet-zoom-hide"),Se(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,i,l){nt(this._mapPane,new F(0,0));var d=!this._loaded;this._loaded=!0,i=this._limitZoom(i),this.fire("viewprereset");var g=this._zoom!==i;this._moveStart(g,l)._move(t,i)._moveEnd(g),this.fire("viewreset"),d&&this.fire("load")},_moveStart:function(t,i){return t&&this.fire("zoomstart"),i||this.fire("movestart"),this},_move:function(t,i,l,d){i===void 0&&(i=this._zoom);var g=this._zoom!==i;return this._zoom=i,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),d?l&&l.pinch&&this.fire("zoom",l):((g||l&&l.pinch)&&this.fire("zoom",l),this.fire("move",l)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Je(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){nt(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[v(this._container)]=this;var i=t?Ue:we;i(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&i(window,"resize",this._onResize,this),ae.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Je(this._resizeRequest),this._resizeRequest=Ie(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,i){for(var l=[],d,g=i==="mouseout"||i==="mouseover",x=t.target||t.srcElement,b=!1;x;){if(d=this._targets[v(x)],d&&(i==="click"||i==="preclick")&&this._draggableMoved(d)){b=!0;break}if(d&&d.listens(i,!0)&&(g&&!vi(x,t)||(l.push(d),g))||x===this._container)break;x=x.parentNode}return!l.length&&!b&&!g&&this.listens(i,!0)&&(l=[this]),l},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var i=t.target||t.srcElement;if(!(!this._loaded||i._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(i))){var l=t.type;l==="mousedown"&&Lr(i),this._fireDOMEvent(t,l)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,i,l){if(t.type==="click"){var d=h({},t);d.type="preclick",this._fireDOMEvent(d,d.type,l)}var g=this._findEventTargets(t,i);if(l){for(var x=[],b=0;b<l.length;b++)l[b].listens(i,!0)&&x.push(l[b]);g=x.concat(g)}if(g.length){i==="contextmenu"&&Qe(t);var A=g[0],z={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var Z=A.getLatLng&&(!A._radius||A._radius<=10);z.containerPoint=Z?this.latLngToContainerPoint(A.getLatLng()):this.mouseEventToContainerPoint(t),z.layerPoint=this.containerPointToLayerPoint(z.containerPoint),z.latlng=Z?A.getLatLng():this.layerPointToLatLng(z.layerPoint)}for(b=0;b<g.length;b++)if(g[b].fire(i,z,!0),z.originalEvent._stopped||g[b].options.bubblingMouseEvents===!1&&ie(this._mouseEvents,i)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,i=this._handlers.length;t<i;t++)this._handlers[t].disable()},whenReady:function(t,i){return this._loaded?t.call(i||this,{target:this}):this.on("load",t,i),this},_getMapPanePos:function(){return wn(this._mapPane)||new F(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,i){var l=t&&i!==void 0?this._getNewPixelOrigin(t,i):this.getPixelOrigin();return l.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,i){var l=this.getSize()._divideBy(2);return this.project(t,i)._subtract(l)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,i,l){var d=this._getNewPixelOrigin(l,i);return this.project(t,i)._subtract(d)},_latLngBoundsToNewLayerBounds:function(t,i,l){var d=this._getNewPixelOrigin(l,i);return $([this.project(t.getSouthWest(),i)._subtract(d),this.project(t.getNorthWest(),i)._subtract(d),this.project(t.getSouthEast(),i)._subtract(d),this.project(t.getNorthEast(),i)._subtract(d)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,i,l){if(!l)return t;var d=this.project(t,i),g=this.getSize().divideBy(2),x=new C(d.subtract(g),d.add(g)),b=this._getBoundsOffset(x,l,i);return Math.abs(b.x)<=1&&Math.abs(b.y)<=1?t:this.unproject(d.add(b),i)},_limitOffset:function(t,i){if(!i)return t;var l=this.getPixelBounds(),d=new C(l.min.add(t),l.max.add(t));return t.add(this._getBoundsOffset(d,i))},_getBoundsOffset:function(t,i,l){var d=$(this.project(i.getNorthEast(),l),this.project(i.getSouthWest(),l)),g=d.min.subtract(t.min),x=d.max.subtract(t.max),b=this._rebound(g.x,-x.x),A=this._rebound(g.y,-x.y);return new F(b,A)},_rebound:function(t,i){return t+i>0?Math.round(t-i)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(i))},_limitZoom:function(t){var i=this.getMinZoom(),l=this.getMaxZoom(),d=ae.any3d?this.options.zoomSnap:1;return d&&(t=Math.round(t/d)*d),Math.max(i,Math.min(l,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ze(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,i){var l=this._getCenterOffset(t)._trunc();return(i&&i.animate)!==!0&&!this.getSize().contains(l)?!1:(this.panBy(l,i),!0)},_createAnimProxy:function(){var t=this._proxy=be("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(i){var l=ao,d=this._proxy.style[l];Vt(this._proxy,this.project(i.center,i.zoom),this.getZoomScale(i.zoom,1)),d===this._proxy.style[l]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){qe(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),i=this.getZoom();Vt(this._proxy,this.project(t,i),this.getZoomScale(i,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,i,l){if(this._animatingZoom)return!0;if(l=l||{},!this._zoomAnimated||l.animate===!1||this._nothingToAnimate()||Math.abs(i-this._zoom)>this.options.zoomAnimationThreshold)return!1;var d=this.getZoomScale(i),g=this._getCenterOffset(t)._divideBy(1-1/d);return l.animate!==!0&&!this.getSize().contains(g)?!1:(Ie(function(){this._moveStart(!0,l.noMoveStart||!1)._animateZoom(t,i,!0)},this),!0)},_animateZoom:function(t,i,l,d){this._mapPane&&(l&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=i,Se(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:i,noUpdate:d}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(_(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ze(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Mn(t,i){return new Ce(t,i)}var At=st.extend({options:{position:"topright"},initialize:function(t){B(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var i=this._map;return i&&i.removeControl(this),this.options.position=t,i&&i.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var i=this._container=this.onAdd(t),l=this.getPosition(),d=t._controlCorners[l];return Se(i,"leaflet-control"),l.indexOf("bottom")!==-1?d.insertBefore(i,d.firstChild):d.appendChild(i),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(qe(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),zn=function(t){return new At(t)};Ce.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},i="leaflet-",l=this._controlContainer=be("div",i+"control-container",this._container);function d(g,x){var b=i+g+" "+i+x;t[g+x]=be("div",b,l)}d("top","left"),d("top","right"),d("bottom","left"),d("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)qe(this._controlCorners[t]);qe(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var ho=At.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,i,l,d){return l<d?-1:d<l?1:0}},initialize:function(t,i,l){B(this,l),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var d in t)this._addLayer(t[d],d);for(d in i)this._addLayer(i[d],d,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return At.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,i){return this._addLayer(t,i),this._map?this._update():this},addOverlay:function(t,i){return this._addLayer(t,i,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var i=this._getLayer(v(t));return i&&this._layers.splice(this._layers.indexOf(i),1),this._map?this._update():this},expand:function(){Se(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(Se(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):Ze(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ze(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",i=this._container=be("div",t),l=this.options.collapsed;i.setAttribute("aria-haspopup",!0),_i(i),is(i);var d=this._section=be("section",t+"-list");l&&(this._map.on("click",this.collapse,this),we(i,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var g=this._layersLink=be("a",t+"-toggle",i);g.href="#",g.title="Layers",g.setAttribute("role","button"),we(g,{keydown:function(x){x.keyCode===13&&this._expandSafely()},click:function(x){Qe(x),this._expandSafely()}},this),l||this.expand(),this._baseLayersList=be("div",t+"-base",d),this._separator=be("div",t+"-separator",d),this._overlaysList=be("div",t+"-overlays",d),i.appendChild(d)},_getLayer:function(t){for(var i=0;i<this._layers.length;i++)if(this._layers[i]&&v(this._layers[i].layer)===t)return this._layers[i]},_addLayer:function(t,i,l){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:i,overlay:l}),this.options.sortLayers&&this._layers.sort(_(function(d,g){return this.options.sortFunction(d.layer,g.layer,d.name,g.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Qi(this._baseLayersList),Qi(this._overlaysList),this._layerControlInputs=[];var t,i,l,d,g=0;for(l=0;l<this._layers.length;l++)d=this._layers[l],this._addItem(d),i=i||d.overlay,t=t||!d.overlay,g+=d.overlay?0:1;return this.options.hideSingleBase&&(t=t&&g>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=i&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var i=this._getLayer(v(t.target)),l=i.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;l&&this._map.fire(l,i)},_createRadioElement:function(t,i){var l='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(i?' checked="checked"':"")+"/>",d=document.createElement("div");return d.innerHTML=l,d.firstChild},_addItem:function(t){var i=document.createElement("label"),l=this._map.hasLayer(t.layer),d;t.overlay?(d=document.createElement("input"),d.type="checkbox",d.className="leaflet-control-layers-selector",d.defaultChecked=l):d=this._createRadioElement("leaflet-base-layers_"+v(this),l),this._layerControlInputs.push(d),d.layerId=v(t.layer),we(d,"click",this._onInputClick,this);var g=document.createElement("span");g.innerHTML=" "+t.name;var x=document.createElement("span");i.appendChild(x),x.appendChild(d),x.appendChild(g);var b=t.overlay?this._overlaysList:this._baseLayersList;return b.appendChild(i),this._checkDisabledLayers(),i},_onInputClick:function(){if(!this._preventClick){var t=this._layerControlInputs,i,l,d=[],g=[];this._handlingClick=!0;for(var x=t.length-1;x>=0;x--)i=t[x],l=this._getLayer(i.layerId).layer,i.checked?d.push(l):i.checked||g.push(l);for(x=0;x<g.length;x++)this._map.hasLayer(g[x])&&this._map.removeLayer(g[x]);for(x=0;x<d.length;x++)this._map.hasLayer(d[x])||this._map.addLayer(d[x]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,i,l,d=this._map.getZoom(),g=t.length-1;g>=0;g--)i=t[g],l=this._getLayer(i.layerId).layer,i.disabled=l.options.minZoom!==void 0&&d<l.options.minZoom||l.options.maxZoom!==void 0&&d>l.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,we(t,"click",Qe),this.expand();var i=this;setTimeout(function(){Ue(t,"click",Qe),i._preventClick=!1})}}),as=function(t,i,l){return new ho(t,i,l)},Or=At.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var i="leaflet-control-zoom",l=be("div",i+" leaflet-bar"),d=this.options;return this._zoomInButton=this._createButton(d.zoomInText,d.zoomInTitle,i+"-in",l,this._zoomIn),this._zoomOutButton=this._createButton(d.zoomOutText,d.zoomOutTitle,i+"-out",l,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),l},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,i,l,d,g){var x=be("a",l,d);return x.innerHTML=t,x.href="#",x.title=i,x.setAttribute("role","button"),x.setAttribute("aria-label",i),_i(x),we(x,"click",Kt),we(x,"click",g,this),we(x,"click",this._refocusOnMap,this),x},_updateDisabled:function(){var t=this._map,i="leaflet-disabled";Ze(this._zoomInButton,i),Ze(this._zoomOutButton,i),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(Se(this._zoomOutButton,i),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(Se(this._zoomInButton,i),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ce.mergeOptions({zoomControl:!0}),Ce.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Or,this.addControl(this.zoomControl))});var Ea=function(t){return new Or(t)},Et=At.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var i="leaflet-control-scale",l=be("div",i),d=this.options;return this._addScales(d,i+"-line",l),t.on(d.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),l},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,i,l){t.metric&&(this._mScale=be("div",i,l)),t.imperial&&(this._iScale=be("div",i,l))},_update:function(){var t=this._map,i=t.getSize().y/2,l=t.distance(t.containerPointToLatLng([0,i]),t.containerPointToLatLng([this.options.maxWidth,i]));this._updateScales(l)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var i=this._getRoundNum(t),l=i<1e3?i+" m":i/1e3+" km";this._updateScale(this._mScale,l,i/t)},_updateImperial:function(t){var i=t*3.2808399,l,d,g;i>5280?(l=i/5280,d=this._getRoundNum(l),this._updateScale(this._iScale,d+" mi",d/l)):(g=this._getRoundNum(i),this._updateScale(this._iScale,g+" ft",g/i))},_updateScale:function(t,i,l){t.style.width=Math.round(this.options.maxWidth*l)+"px",t.innerHTML=i},_getRoundNum:function(t){var i=Math.pow(10,(Math.floor(t)+"").length-1),l=t/i;return l=l>=10?10:l>=5?5:l>=3?3:l>=2?2:1,i*l}}),Rr=function(t){return new Et(t)},fo='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',er=At.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ae.inlineSvg?fo+" ":"")+"Leaflet</a>"},initialize:function(t){B(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=be("div","leaflet-control-attribution"),_i(this._container);for(var i in t._layers)t._layers[i].getAttribution&&this.addAttribution(t._layers[i].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var i in this._attributions)this._attributions[i]&&t.push(i);var l=[];this.options.prefix&&l.push(this.options.prefix),t.length&&l.push(t.join(", ")),this._container.innerHTML=l.join(' <span aria-hidden="true">|</span> ')}}});Ce.mergeOptions({attributionControl:!0}),Ce.addInitHook(function(){this.options.attributionControl&&new er().addTo(this)});var Gl=function(t){return new er(t)};At.Layers=ho,At.Zoom=Or,At.Scale=Et,At.Attribution=er,zn.layers=as,zn.zoom=Ea,zn.scale=Rr,zn.attribution=Gl;var zt=st.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});zt.addTo=function(t,i){return t.addHandler(i,this),this};var po={Events:De},Ar=ae.touch?"touchstart mousedown":"mousedown",Gt=Be.extend({options:{clickTolerance:3},initialize:function(t,i,l,d){B(this,d),this._element=t,this._dragStartTarget=i||t,this._preventOutline=l},enable:function(){this._enabled||(we(this._dragStartTarget,Ar,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Gt._dragging===this&&this.finishDrag(!0),Ue(this._dragStartTarget,Ar,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!Tr(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){Gt._dragging===this&&this.finishDrag();return}if(!(Gt._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(Gt._dragging=this,this._preventOutline&&Lr(this._element),ts(),Ae(),!this._moving)){this.fire("down");var i=t.touches?t.touches[0]:t,l=xn(this._element);this._startPoint=new F(i.clientX,i.clientY),this._startPos=wn(this._element),this._parentScale=an(l);var d=t.type==="mousedown";we(document,d?"mousemove":"touchmove",this._onMove,this),we(document,d?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var i=t.touches&&t.touches.length===1?t.touches[0]:t,l=new F(i.clientX,i.clientY)._subtract(this._startPoint);!l.x&&!l.y||Math.abs(l.x)+Math.abs(l.y)<this.options.clickTolerance||(l.x/=this._parentScale.x,l.y/=this._parentScale.y,Qe(t),this._moved||(this.fire("dragstart"),this._moved=!0,Se(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Se(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(l),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),nt(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){Ze(document.body,"leaflet-dragging"),this._lastTarget&&(Ze(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ue(document,"mousemove touchmove",this._onMove,this),Ue(document,"mouseup touchend touchcancel",this._onUp,this),ns(),Cr();var i=this._moved&&this._moving;this._moving=!1,Gt._dragging=!1,i&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function mo(t,i,l){var d,g=[1,4,2,8],x,b,A,z,Z,X,pe,Ee;for(x=0,X=t.length;x<X;x++)t[x]._code=tr(t[x],i);for(A=0;A<4;A++){for(pe=g[A],d=[],x=0,X=t.length,b=X-1;x<X;b=x++)z=t[x],Z=t[b],z._code&pe?Z._code&pe||(Ee=us(Z,z,pe,i,l),Ee._code=tr(Ee,i),d.push(Ee)):(Z._code&pe&&(Ee=us(Z,z,pe,i,l),Ee._code=tr(Ee,i),d.push(Ee)),d.push(z));t=d}return t}function Ta(t,i){var l,d,g,x,b,A,z,Z,X;if(!t||t.length===0)throw new Error("latlngs not passed");Dt(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var pe=te([0,0]),Ee=ue(t),ht=Ee.getNorthWest().distanceTo(Ee.getSouthWest())*Ee.getNorthEast().distanceTo(Ee.getNorthWest());ht<1700&&(pe=_o(t));var at=t.length,It=[];for(l=0;l<at;l++){var Tt=te(t[l]);It.push(i.project(te([Tt.lat-pe.lat,Tt.lng-pe.lng])))}for(A=z=Z=0,l=0,d=at-1;l<at;d=l++)g=It[l],x=It[d],b=g.y*x.x-x.y*g.x,z+=(g.x+x.x)*b,Z+=(g.y+x.y)*b,A+=b*3;A===0?X=It[0]:X=[z/A,Z/A];var Fr=i.unproject(W(X));return te([Fr.lat+pe.lat,Fr.lng+pe.lng])}function _o(t){for(var i=0,l=0,d=0,g=0;g<t.length;g++){var x=te(t[g]);i+=x.lat,l+=x.lng,d++}return te([i/d,l/d])}var Jl={__proto__:null,clipPolygon:mo,polygonCenter:Ta,centroid:_o};function ls(t,i){if(!i||!t.length)return t.slice();var l=i*i;return t=Xl(t,l),t=Ql(t,l),t}function Pa(t,i,l){return Math.sqrt(nr(t,i,l,!0))}function Yl(t,i,l){return nr(t,i,l)}function Ql(t,i){var l=t.length,d=typeof Uint8Array<"u"?Uint8Array:Array,g=new d(l);g[0]=g[l-1]=1,go(t,g,i,0,l-1);var x,b=[];for(x=0;x<l;x++)g[x]&&b.push(t[x]);return b}function go(t,i,l,d,g){var x=0,b,A,z;for(A=d+1;A<=g-1;A++)z=nr(t[A],t[d],t[g],!0),z>x&&(b=A,x=z);x>l&&(i[b]=1,go(t,i,l,d,b),go(t,i,l,b,g))}function Xl(t,i){for(var l=[t[0]],d=1,g=0,x=t.length;d<x;d++)eu(t[d],t[g])>i&&(l.push(t[d]),g=d);return g<x-1&&l.push(t[x-1]),l}var vo;function Ca(t,i,l,d,g){var x=d?vo:tr(t,l),b=tr(i,l),A,z,Z;for(vo=b;;){if(!(x|b))return[t,i];if(x&b)return!1;A=x||b,z=us(t,i,A,l,g),Z=tr(z,l),A===x?(t=z,x=Z):(i=z,b=Z)}}function us(t,i,l,d,g){var x=i.x-t.x,b=i.y-t.y,A=d.min,z=d.max,Z,X;return l&8?(Z=t.x+x*(z.y-t.y)/b,X=z.y):l&4?(Z=t.x+x*(A.y-t.y)/b,X=A.y):l&2?(Z=z.x,X=t.y+b*(z.x-t.x)/x):l&1&&(Z=A.x,X=t.y+b*(A.x-t.x)/x),new F(Z,X,g)}function tr(t,i){var l=0;return t.x<i.min.x?l|=1:t.x>i.max.x&&(l|=2),t.y<i.min.y?l|=4:t.y>i.max.y&&(l|=8),l}function eu(t,i){var l=i.x-t.x,d=i.y-t.y;return l*l+d*d}function nr(t,i,l,d){var g=i.x,x=i.y,b=l.x-g,A=l.y-x,z=b*b+A*A,Z;return z>0&&(Z=((t.x-g)*b+(t.y-x)*A)/z,Z>1?(g=l.x,x=l.y):Z>0&&(g+=b*Z,x+=A*Z)),b=t.x-g,A=t.y-x,d?b*b+A*A:new F(g,x)}function Dt(t){return!G(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function La(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Dt(t)}function Oa(t,i){var l,d,g,x,b,A,z,Z;if(!t||t.length===0)throw new Error("latlngs not passed");Dt(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var X=te([0,0]),pe=ue(t),Ee=pe.getNorthWest().distanceTo(pe.getSouthWest())*pe.getNorthEast().distanceTo(pe.getNorthWest());Ee<1700&&(X=_o(t));var ht=t.length,at=[];for(l=0;l<ht;l++){var It=te(t[l]);at.push(i.project(te([It.lat-X.lat,It.lng-X.lng])))}for(l=0,d=0;l<ht-1;l++)d+=at[l].distanceTo(at[l+1])/2;if(d===0)Z=at[0];else for(l=0,x=0;l<ht-1;l++)if(b=at[l],A=at[l+1],g=b.distanceTo(A),x+=g,x>d){z=(x-d)/g,Z=[A.x-z*(A.x-b.x),A.y-z*(A.y-b.y)];break}var Tt=i.unproject(W(Z));return te([Tt.lat+X.lat,Tt.lng+X.lng])}var Ra={__proto__:null,simplify:ls,pointToSegmentDistance:Pa,closestPointOnSegment:Yl,clipSegment:Ca,_getEdgeIntersection:us,_getBitCode:tr,_sqClosestPointOnSegment:nr,isFlat:Dt,_flat:La,polylineCenter:Oa},yo={project:function(t){return new F(t.lng,t.lat)},unproject:function(t){return new oe(t.y,t.x)},bounds:new C([-180,-90],[180,90])},wo={R:6378137,R_MINOR:6356752314245179e-9,bounds:new C([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var i=Math.PI/180,l=this.R,d=t.lat*i,g=this.R_MINOR/l,x=Math.sqrt(1-g*g),b=x*Math.sin(d),A=Math.tan(Math.PI/4-d/2)/Math.pow((1-b)/(1+b),x/2);return d=-l*Math.log(Math.max(A,1e-10)),new F(t.lng*i*l,d)},unproject:function(t){for(var i=180/Math.PI,l=this.R,d=this.R_MINOR/l,g=Math.sqrt(1-d*d),x=Math.exp(-t.y/l),b=Math.PI/2-2*Math.atan(x),A=0,z=.1,Z;A<15&&Math.abs(z)>1e-7;A++)Z=g*Math.sin(b),Z=Math.pow((1-Z)/(1+Z),g/2),z=Math.PI/2-2*Math.atan(x*Z)-b,b+=z;return new oe(b*i,t.x*i/l)}},tu={__proto__:null,LonLat:yo,Mercator:wo,SphericalMercator:vt},nu=h({},Te,{code:"EPSG:3395",projection:wo,transformation:(function(){var t=.5/(Math.PI*wo.R);return yr(t,.5,-t,.5)})()}),Aa=h({},Te,{code:"EPSG:4326",projection:yo,transformation:yr(1/180,1,-1/180,.5)}),ru=h({},Le,{projection:yo,transformation:yr(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,i){var l=i.lng-t.lng,d=i.lat-t.lat;return Math.sqrt(l*l+d*d)},infinite:!0});Le.Earth=Te,Le.EPSG3395=nu,Le.EPSG3857=wr,Le.EPSG900913=Vs,Le.EPSG4326=Aa,Le.Simple=ru;var Jt=Be.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[v(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[v(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var i=t.target;if(i.hasLayer(this)){if(this._map=i,this._zoomAnimated=i._zoomAnimated,this.getEvents){var l=this.getEvents();i.on(l,this),this.once("remove",function(){i.off(l,this)},this)}this.onAdd(i),this.fire("add"),i.fire("layeradd",{layer:this})}}});Ce.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var i=v(t);return this._layers[i]?this:(this._layers[i]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var i=v(t);return this._layers[i]?(this._loaded&&t.onRemove(this),delete this._layers[i],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return v(t)in this._layers},eachLayer:function(t,i){for(var l in this._layers)t.call(i,this._layers[l]);return this},_addLayers:function(t){t=t?G(t)?t:[t]:[];for(var i=0,l=t.length;i<l;i++)this.addLayer(t[i])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[v(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var i=v(t);this._zoomBoundLayers[i]&&(delete this._zoomBoundLayers[i],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,i=-1/0,l=this._getZoomSpan();for(var d in this._zoomBoundLayers){var g=this._zoomBoundLayers[d].options;t=g.minZoom===void 0?t:Math.min(t,g.minZoom),i=g.maxZoom===void 0?i:Math.max(i,g.maxZoom)}this._layersMaxZoom=i===-1/0?void 0:i,this._layersMinZoom=t===1/0?void 0:t,l!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Dn=Jt.extend({initialize:function(t,i){B(this,i),this._layers={};var l,d;if(t)for(l=0,d=t.length;l<d;l++)this.addLayer(t[l])},addLayer:function(t){var i=this.getLayerId(t);return this._layers[i]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var i=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[i]&&this._map.removeLayer(this._layers[i]),delete this._layers[i],this},hasLayer:function(t){var i=typeof t=="number"?t:this.getLayerId(t);return i in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var i=Array.prototype.slice.call(arguments,1),l,d;for(l in this._layers)d=this._layers[l],d[t]&&d[t].apply(d,i);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,i){for(var l in this._layers)t.call(i,this._layers[l]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return v(t)}}),yi=function(t,i){return new Dn(t,i)},Sn=Dn.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),Dn.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),Dn.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new de;for(var i in this._layers){var l=this._layers[i];t.extend(l.getBounds?l.getBounds():l.getLatLng())}return t}}),Na=function(t,i){return new Sn(t,i)},rr=st.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){B(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,i){var l=this._getIconUrl(t);if(!l){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var d=this._createImg(l,i&&i.tagName==="IMG"?i:null);return this._setIconStyles(d,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),d},_setIconStyles:function(t,i){var l=this.options,d=l[i+"Size"];typeof d=="number"&&(d=[d,d]);var g=W(d),x=W(i==="shadow"&&l.shadowAnchor||l.iconAnchor||g&&g.divideBy(2,!0));t.className="leaflet-marker-"+i+" "+(l.className||""),x&&(t.style.marginLeft=-x.x+"px",t.style.marginTop=-x.y+"px"),g&&(t.style.width=g.x+"px",t.style.height=g.y+"px")},_createImg:function(t,i){return i=i||document.createElement("img"),i.src=t,i},_getIconUrl:function(t){return ae.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function Ia(t){return new rr(t)}var Nr=rr.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof Nr.imagePath!="string"&&(Nr.imagePath=this._detectIconPath()),(this.options.imagePath||Nr.imagePath)+rr.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var i=function(l,d,g){var x=d.exec(l);return x&&x[g]};return t=i(t,/^url\((['"])?(.+)\1\)$/,2),t&&i(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=be("div","leaflet-default-icon-path",document.body),i=di(t,"background-image")||di(t,"backgroundImage");if(document.body.removeChild(t),i=this._stripUrl(i),i)return i;var l=document.querySelector('link[href$="leaflet.css"]');return l?l.href.substring(0,l.href.length-11-1):""}}),xo=zt.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new Gt(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Se(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ze(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var i=this._marker,l=i._map,d=this._marker.options.autoPanSpeed,g=this._marker.options.autoPanPadding,x=wn(i._icon),b=l.getPixelBounds(),A=l.getPixelOrigin(),z=$(b.min._subtract(A).add(g),b.max._subtract(A).subtract(g));if(!z.contains(x)){var Z=W((Math.max(z.max.x,x.x)-z.max.x)/(b.max.x-z.max.x)-(Math.min(z.min.x,x.x)-z.min.x)/(b.min.x-z.min.x),(Math.max(z.max.y,x.y)-z.max.y)/(b.max.y-z.max.y)-(Math.min(z.min.y,x.y)-z.min.y)/(b.min.y-z.min.y)).multiplyBy(d);l.panBy(Z,{animate:!1}),this._draggable._newPos._add(Z),this._draggable._startPos._add(Z),nt(i._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=Ie(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(Je(this._panRequest),this._panRequest=Ie(this._adjustPan.bind(this,t)))},_onDrag:function(t){var i=this._marker,l=i._shadow,d=wn(i._icon),g=i._map.layerPointToLatLng(d);l&&nt(l,d),i._latlng=g,t.latlng=g,t.oldLatLng=this._oldLatLng,i.fire("move",t).fire("drag",t)},_onDragEnd:function(t){Je(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),kn=Jt.extend({options:{icon:new Nr,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,i){B(this,i),this._latlng=te(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var i=this._latlng;return this._latlng=te(t),this.update(),this.fire("move",{oldLatLng:i,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,i="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),l=t.icon.createIcon(this._icon),d=!1;l!==this._icon&&(this._icon&&this._removeIcon(),d=!0,t.title&&(l.title=t.title),l.tagName==="IMG"&&(l.alt=t.alt||"")),Se(l,i),t.keyboard&&(l.tabIndex="0",l.setAttribute("role","button")),this._icon=l,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&we(l,"focus",this._panOnFocus,this);var g=t.icon.createShadow(this._shadow),x=!1;g!==this._shadow&&(this._removeShadow(),x=!0),g&&(Se(g,i),g.alt=""),this._shadow=g,t.opacity<1&&this._updateOpacity(),d&&this.getPane().appendChild(this._icon),this._initInteraction(),g&&x&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ue(this._icon,"focus",this._panOnFocus,this),qe(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&qe(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&nt(this._icon,t),this._shadow&&nt(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var i=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(i)},_initInteraction:function(){if(this.options.interactive&&(Se(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),xo)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new xo(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&bt(this._icon,t),this._shadow&&bt(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var i=this.options.icon.options,l=i.iconSize?W(i.iconSize):W(0,0),d=i.iconAnchor?W(i.iconAnchor):W(0,0);t.panInside(this._latlng,{paddingTopLeft:d,paddingBottomRight:l.subtract(d)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function iu(t,i){return new kn(t,i)}var Bn=Jt.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return B(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),cs=Bn.extend({options:{fill:!0,radius:10},initialize:function(t,i){B(this,i),this._latlng=te(t),this._radius=this.options.radius},setLatLng:function(t){var i=this._latlng;return this._latlng=te(t),this.redraw(),this.fire("move",{oldLatLng:i,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var i=t&&t.radius||this._radius;return Bn.prototype.setStyle.call(this,t),this.setRadius(i),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,i=this._radiusY||t,l=this._clickTolerance(),d=[t+l,i+l];this._pxBounds=new C(this._point.subtract(d),this._point.add(d))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function ja(t,i){return new cs(t,i)}var hs=cs.extend({initialize:function(t,i,l){if(typeof i=="number"&&(i=h({},l,{radius:i})),B(this,i),this._latlng=te(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new de(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Bn.prototype.setStyle,_project:function(){var t=this._latlng.lng,i=this._latlng.lat,l=this._map,d=l.options.crs;if(d.distance===Te.distance){var g=Math.PI/180,x=this._mRadius/Te.R/g,b=l.project([i+x,t]),A=l.project([i-x,t]),z=b.add(A).divideBy(2),Z=l.unproject(z).lat,X=Math.acos((Math.cos(x*g)-Math.sin(i*g)*Math.sin(Z*g))/(Math.cos(i*g)*Math.cos(Z*g)))/g;(isNaN(X)||X===0)&&(X=x/Math.cos(Math.PI/180*i)),this._point=z.subtract(l.getPixelOrigin()),this._radius=isNaN(X)?0:z.x-l.project([Z,t-X]).x,this._radiusY=z.y-b.y}else{var pe=d.unproject(d.project(this._latlng).subtract([this._mRadius,0]));this._point=l.latLngToLayerPoint(this._latlng),this._radius=this._point.x-l.latLngToLayerPoint(pe).x}this._updateBounds()}});function wi(t,i,l){return new hs(t,i,l)}var Nt=Bn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,i){B(this,i),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var i=1/0,l=null,d=nr,g,x,b=0,A=this._parts.length;b<A;b++)for(var z=this._parts[b],Z=1,X=z.length;Z<X;Z++){g=z[Z-1],x=z[Z];var pe=d(t,g,x,!0);pe<i&&(i=pe,l=d(t,g,x))}return l&&(l.distance=Math.sqrt(i)),l},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Oa(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,i){return i=i||this._defaultShape(),t=te(t),i.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new de,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return Dt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var i=[],l=Dt(t),d=0,g=t.length;d<g;d++)l?(i[d]=te(t[d]),this._bounds.extend(i[d])):i[d]=this._convertLatLngs(t[d]);return i},_project:function(){var t=new C;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),i=new F(t,t);this._rawPxBounds&&(this._pxBounds=new C([this._rawPxBounds.min.subtract(i),this._rawPxBounds.max.add(i)]))},_projectLatlngs:function(t,i,l){var d=t[0]instanceof oe,g=t.length,x,b;if(d){for(b=[],x=0;x<g;x++)b[x]=this._map.latLngToLayerPoint(t[x]),l.extend(b[x]);i.push(b)}else for(x=0;x<g;x++)this._projectLatlngs(t[x],i,l)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var i=this._parts,l,d,g,x,b,A,z;for(l=0,g=0,x=this._rings.length;l<x;l++)for(z=this._rings[l],d=0,b=z.length;d<b-1;d++)A=Ca(z[d],z[d+1],t,d,!0),A&&(i[g]=i[g]||[],i[g].push(A[0]),(A[1]!==z[d+1]||d===b-2)&&(i[g].push(A[1]),g++))}},_simplifyPoints:function(){for(var t=this._parts,i=this.options.smoothFactor,l=0,d=t.length;l<d;l++)t[l]=ls(t[l],i)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,i){var l,d,g,x,b,A,z=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(l=0,x=this._parts.length;l<x;l++)for(A=this._parts[l],d=0,b=A.length,g=b-1;d<b;g=d++)if(!(!i&&d===0)&&Pa(t,A[g],A[d])<=z)return!0;return!1}});function su(t,i){return new Nt(t,i)}Nt._flat=La;var bn=Nt.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ta(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var i=Nt.prototype._convertLatLngs.call(this,t),l=i.length;return l>=2&&i[0]instanceof oe&&i[0].equals(i[l-1])&&i.pop(),i},_setLatLngs:function(t){Nt.prototype._setLatLngs.call(this,t),Dt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Dt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,i=this.options.weight,l=new F(i,i);if(t=new C(t.min.subtract(l),t.max.add(l)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var d=0,g=this._rings.length,x;d<g;d++)x=mo(this._rings[d],t,!0),x.length&&this._parts.push(x)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var i=!1,l,d,g,x,b,A,z,Z;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(x=0,z=this._parts.length;x<z;x++)for(l=this._parts[x],b=0,Z=l.length,A=Z-1;b<Z;A=b++)d=l[b],g=l[A],d.y>t.y!=g.y>t.y&&t.x<(g.x-d.x)*(t.y-d.y)/(g.y-d.y)+d.x&&(i=!i);return i||Nt.prototype._containsPoint.call(this,t,!0)}});function ou(t,i){return new bn(t,i)}var un=Sn.extend({initialize:function(t,i){B(this,i),this._layers={},t&&this.addData(t)},addData:function(t){var i=G(t)?t:t.features,l,d,g;if(i){for(l=0,d=i.length;l<d;l++)g=i[l],(g.geometries||g.geometry||g.features||g.coordinates)&&this.addData(g);return this}var x=this.options;if(x.filter&&!x.filter(t))return this;var b=Ir(t,x);return b?(b.feature=_s(t),b.defaultOptions=b.options,this.resetStyle(b),x.onEachFeature&&x.onEachFeature(t,b),this.addLayer(b)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=h({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(i){this._setLayerStyle(i,t)},this)},_setLayerStyle:function(t,i){t.setStyle&&(typeof i=="function"&&(i=i(t.feature)),t.setStyle(i))}});function Ir(t,i){var l=t.type==="Feature"?t.geometry:t,d=l?l.coordinates:null,g=[],x=i&&i.pointToLayer,b=i&&i.coordsToLatLng||fs,A,z,Z,X;if(!d&&!l)return null;switch(l.type){case"Point":return A=b(d),ds(x,t,A,i);case"MultiPoint":for(Z=0,X=d.length;Z<X;Z++)A=b(d[Z]),g.push(ds(x,t,A,i));return new Sn(g);case"LineString":case"MultiLineString":return z=xi(d,l.type==="LineString"?0:1,b),new Nt(z,i);case"Polygon":case"MultiPolygon":return z=xi(d,l.type==="Polygon"?1:2,b),new bn(z,i);case"GeometryCollection":for(Z=0,X=l.geometries.length;Z<X;Z++){var pe=Ir({geometry:l.geometries[Z],type:"Feature",properties:t.properties},i);pe&&g.push(pe)}return new Sn(g);case"FeatureCollection":for(Z=0,X=l.features.length;Z<X;Z++){var Ee=Ir(l.features[Z],i);Ee&&g.push(Ee)}return new Sn(g);default:throw new Error("Invalid GeoJSON object.")}}function ds(t,i,l,d){return t?t(i,l):new kn(l,d&&d.markersInheritOptions&&d)}function fs(t){return new oe(t[1],t[0],t[2])}function xi(t,i,l){for(var d=[],g=0,x=t.length,b;g<x;g++)b=i?xi(t[g],i-1,l):(l||fs)(t[g]),d.push(b);return d}function ps(t,i){return t=te(t),t.alt!==void 0?[N(t.lng,i),N(t.lat,i),N(t.alt,i)]:[N(t.lng,i),N(t.lat,i)]}function ms(t,i,l,d){for(var g=[],x=0,b=t.length;x<b;x++)g.push(i?ms(t[x],Dt(t[x])?0:i-1,l,d):ps(t[x],d));return!i&&l&&g.length>0&&g.push(g[0].slice()),g}function jr(t,i){return t.feature?h({},t.feature,{geometry:i}):_s(i)}function _s(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var So={toGeoJSON:function(t){return jr(this,{type:"Point",coordinates:ps(this.getLatLng(),t)})}};kn.include(So),hs.include(So),cs.include(So),Nt.include({toGeoJSON:function(t){var i=!Dt(this._latlngs),l=ms(this._latlngs,i?1:0,!1,t);return jr(this,{type:(i?"Multi":"")+"LineString",coordinates:l})}}),bn.include({toGeoJSON:function(t){var i=!Dt(this._latlngs),l=i&&!Dt(this._latlngs[0]),d=ms(this._latlngs,l?2:i?1:0,!0,t);return i||(d=[d]),jr(this,{type:(l?"Multi":"")+"Polygon",coordinates:d})}}),Dn.include({toMultiPoint:function(t){var i=[];return this.eachLayer(function(l){i.push(l.toGeoJSON(t).geometry.coordinates)}),jr(this,{type:"MultiPoint",coordinates:i})},toGeoJSON:function(t){var i=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(i==="MultiPoint")return this.toMultiPoint(t);var l=i==="GeometryCollection",d=[];return this.eachLayer(function(g){if(g.toGeoJSON){var x=g.toGeoJSON(t);if(l)d.push(x.geometry);else{var b=_s(x);b.type==="FeatureCollection"?d.push.apply(d,b.features):d.push(b)}}}),l?jr(this,{geometries:d,type:"GeometryCollection"}):{type:"FeatureCollection",features:d}}});function Ma(t,i){return new un(t,i)}var Yt=Ma,Un=Jt.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,i,l){this._url=t,this._bounds=ue(i),B(this,l)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Se(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){qe(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&Er(this._image),this},bringToBack:function(){return this._map&&yn(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=ue(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",i=this._image=t?this._url:be("img");if(Se(i,"leaflet-image-layer"),this._zoomAnimated&&Se(i,"leaflet-zoom-animated"),this.options.className&&Se(i,this.options.className),i.onselectstart=R,i.onmousemove=R,i.onload=_(this.fire,this,"load"),i.onerror=_(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(i.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=i.src;return}i.src=this._url,i.alt=this.options.alt},_animateZoom:function(t){var i=this._map.getZoomScale(t.zoom),l=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;Vt(this._image,l,i)},_reset:function(){var t=this._image,i=new C(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),l=i.getSize();nt(t,i.min),t.style.width=l.x+"px",t.style.height=l.y+"px"},_updateOpacity:function(){bt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),za=function(t,i,l){return new Un(t,i,l)},ko=Un.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",i=this._image=t?this._url:be("video");if(Se(i,"leaflet-image-layer"),this._zoomAnimated&&Se(i,"leaflet-zoom-animated"),this.options.className&&Se(i,this.options.className),i.onselectstart=R,i.onmousemove=R,i.onloadeddata=_(this.fire,this,"load"),t){for(var l=i.getElementsByTagName("source"),d=[],g=0;g<l.length;g++)d.push(l[g].src);this._url=l.length>0?d:[i.src];return}G(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(i.style,"objectFit")&&(i.style.objectFit="fill"),i.autoplay=!!this.options.autoplay,i.loop=!!this.options.loop,i.muted=!!this.options.muted,i.playsInline=!!this.options.playsInline;for(var x=0;x<this._url.length;x++){var b=be("source");b.src=this._url[x],i.appendChild(b)}}});function Da(t,i,l){return new ko(t,i,l)}var bo=Un.extend({_initImage:function(){var t=this._image=this._url;Se(t,"leaflet-image-layer"),this._zoomAnimated&&Se(t,"leaflet-zoom-animated"),this.options.className&&Se(t,this.options.className),t.onselectstart=R,t.onmousemove=R}});function Eo(t,i,l){return new bo(t,i,l)}var cn=Jt.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,i){t&&(t instanceof oe||G(t))?(this._latlng=te(t),B(this,i)):(B(this,t),this._source=i),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&bt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&bt(this._container,1),this.bringToFront(),this.options.interactive&&(Se(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(bt(this._container,0),this._removeTimeout=setTimeout(_(qe,void 0,this._container),200)):qe(this._container),this.options.interactive&&(Ze(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=te(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Er(this._container),this},bringToBack:function(){return this._map&&yn(this._container),this},_prepareOpen:function(t){var i=this._source;if(!i._map)return!1;if(i instanceof Sn){i=null;var l=this._source._layers;for(var d in l)if(l[d]._map){i=l[d];break}if(!i)return!1;this._source=i}if(!t)if(i.getCenter)t=i.getCenter();else if(i.getLatLng)t=i.getLatLng();else if(i.getBounds)t=i.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,i=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof i=="string")t.innerHTML=i;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(i)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),i=W(this.options.offset),l=this._getAnchor();this._zoomAnimated?nt(this._container,t.add(l)):i=i.add(t).add(l);var d=this._containerBottom=-i.y,g=this._containerLeft=-Math.round(this._containerWidth/2)+i.x;this._container.style.bottom=d+"px",this._container.style.left=g+"px"}},_getAnchor:function(){return[0,0]}});Ce.include({_initOverlay:function(t,i,l,d){var g=i;return g instanceof t||(g=new t(d).setContent(i)),l&&g.setLatLng(l),g}}),Jt.include({_initOverlay:function(t,i,l,d){var g=l;return g instanceof t?(B(g,d),g._source=this):(g=i&&!d?i:new t(d,this),g.setContent(l)),g}});var gs=cn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,cn.prototype.openOn.call(this,t)},onAdd:function(t){cn.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Bn||this._source.on("preclick",ln))},onRemove:function(t){cn.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Bn||this._source.off("preclick",ln))},getEvents:function(){var t=cn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",i=this._container=be("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),l=this._wrapper=be("div",t+"-content-wrapper",i);if(this._contentNode=be("div",t+"-content",l),_i(i),is(this._contentNode),we(i,"contextmenu",ln),this._tipContainer=be("div",t+"-tip-container",i),this._tip=be("div",t+"-tip",this._tipContainer),this.options.closeButton){var d=this._closeButton=be("a",t+"-close-button",i);d.setAttribute("role","button"),d.setAttribute("aria-label","Close popup"),d.href="#close",d.innerHTML='<span aria-hidden="true">&#215;</span>',we(d,"click",function(g){Qe(g),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,i=t.style;i.width="",i.whiteSpace="nowrap";var l=t.offsetWidth;l=Math.min(l,this.options.maxWidth),l=Math.max(l,this.options.minWidth),i.width=l+1+"px",i.whiteSpace="",i.height="";var d=t.offsetHeight,g=this.options.maxHeight,x="leaflet-popup-scrolled";g&&d>g?(i.height=g+"px",Se(t,x)):Ze(t,x),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var i=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),l=this._getAnchor();nt(this._container,i.add(l))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,i=parseInt(di(this._container,"marginBottom"),10)||0,l=this._container.offsetHeight+i,d=this._containerWidth,g=new F(this._containerLeft,-l-this._containerBottom);g._add(wn(this._container));var x=t.layerPointToContainerPoint(g),b=W(this.options.autoPanPadding),A=W(this.options.autoPanPaddingTopLeft||b),z=W(this.options.autoPanPaddingBottomRight||b),Z=t.getSize(),X=0,pe=0;x.x+d+z.x>Z.x&&(X=x.x+d-Z.x+z.x),x.x-X-A.x<0&&(X=x.x-A.x),x.y+l+z.y>Z.y&&(pe=x.y+l-Z.y+z.y),x.y-pe-A.y<0&&(pe=x.y-A.y),(X||pe)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([X,pe]))}},_getAnchor:function(){return W(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Mr=function(t,i){return new gs(t,i)};Ce.mergeOptions({closePopupOnClick:!0}),Ce.include({openPopup:function(t,i,l){return this._initOverlay(gs,t,i,l).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),Jt.include({bindPopup:function(t,i){return this._popup=this._initOverlay(gs,this._popup,t,i),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof Sn||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){Kt(t);var i=t.layer||t.target;if(this._popup._source===i&&!(i instanceof Bn)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=i,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var zr=cn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){cn.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){cn.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=cn.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",i=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=be("div",i),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+v(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var i,l,d=this._map,g=this._container,x=d.latLngToContainerPoint(d.getCenter()),b=d.layerPointToContainerPoint(t),A=this.options.direction,z=g.offsetWidth,Z=g.offsetHeight,X=W(this.options.offset),pe=this._getAnchor();A==="top"?(i=z/2,l=Z):A==="bottom"?(i=z/2,l=0):A==="center"?(i=z/2,l=Z/2):A==="right"?(i=0,l=Z/2):A==="left"?(i=z,l=Z/2):b.x<x.x?(A="right",i=0,l=Z/2):(A="left",i=z+(X.x+pe.x)*2,l=Z/2),t=t.subtract(W(i,l,!0)).add(X).add(pe),Ze(g,"leaflet-tooltip-right"),Ze(g,"leaflet-tooltip-left"),Ze(g,"leaflet-tooltip-top"),Ze(g,"leaflet-tooltip-bottom"),Se(g,"leaflet-tooltip-"+A),nt(g,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&bt(this._container,t)},_animateZoom:function(t){var i=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(i)},_getAnchor:function(){return W(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Si=function(t,i){return new zr(t,i)};Ce.include({openTooltip:function(t,i,l){return this._initOverlay(zr,t,i,l).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),Jt.include({bindTooltip:function(t,i){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(zr,this._tooltip,t,i),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var i=t?"off":"on",l={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?l.add=this._openTooltip:(l.mouseover=this._openTooltip,l.mouseout=this.closeTooltip,l.click=this._openTooltip,this._map?this._addFocusListeners():l.add=this._addFocusListeners),this._tooltip.options.sticky&&(l.mousemove=this._moveTooltip),this[i](l),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof Sn||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var i=typeof t.getElement=="function"&&t.getElement();i&&(we(i,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),we(i,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var i=typeof t.getElement=="function"&&t.getElement();i&&i.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var i=this;this._map.once("moveend",function(){i._openOnceFlag=!1,i._openTooltip(t)});return}this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)}},_moveTooltip:function(t){var i=t.latlng,l,d;this._tooltip.options.sticky&&t.originalEvent&&(l=this._map.mouseEventToContainerPoint(t.originalEvent),d=this._map.containerPointToLayerPoint(l),i=this._map.layerPointToLatLng(d)),this._tooltip.setLatLng(i)}});var vs=rr.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var i=t&&t.tagName==="DIV"?t:document.createElement("div"),l=this.options;if(l.html instanceof Element?(Qi(i),i.appendChild(l.html)):i.innerHTML=l.html!==!1?l.html:"",l.bgPos){var d=W(l.bgPos);i.style.backgroundPosition=-d.x+"px "+-d.y+"px"}return this._setIconStyles(i,"icon"),i},createShadow:function(){return null}});function Ba(t){return new vs(t)}rr.Default=Nr;var $n=Jt.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ae.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){B(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),qe(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Er(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(yn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=S(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof F?t:new F(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var i=this.getPane().children,l=-t(-1/0,1/0),d=0,g=i.length,x;d<g;d++)x=i[d].style.zIndex,i[d]!==this._container&&x&&(l=t(l,+x));isFinite(l)&&(this.options.zIndex=l+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ae.ielt9){bt(this._container,this.options.opacity);var t=+new Date,i=!1,l=!1;for(var d in this._tiles){var g=this._tiles[d];if(!(!g.current||!g.loaded)){var x=Math.min(1,(t-g.loaded)/200);bt(g.el,x),x<1?i=!0:(g.active?l=!0:this._onOpaqueTile(g),g.active=!0)}}l&&!this._noPrune&&this._pruneTiles(),i&&(Je(this._fadeFrame),this._fadeFrame=Ie(this._updateOpacity,this))}},_onOpaqueTile:R,_initContainer:function(){this._container||(this._container=be("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,i=this.options.maxZoom;if(t!==void 0){for(var l in this._levels)l=Number(l),this._levels[l].el.children.length||l===t?(this._levels[l].el.style.zIndex=i-Math.abs(t-l),this._onUpdateLevel(l)):(qe(this._levels[l].el),this._removeTilesAtZoom(l),this._onRemoveLevel(l),delete this._levels[l]);var d=this._levels[t],g=this._map;return d||(d=this._levels[t]={},d.el=be("div","leaflet-tile-container leaflet-zoom-animated",this._container),d.el.style.zIndex=i,d.origin=g.project(g.unproject(g.getPixelOrigin()),t).round(),d.zoom=t,this._setZoomTransform(d,g.getCenter(),g.getZoom()),R(d.el.offsetWidth),this._onCreateLevel(d)),this._level=d,d}},_onUpdateLevel:R,_onRemoveLevel:R,_onCreateLevel:R,_pruneTiles:function(){if(this._map){var t,i,l=this._map.getZoom();if(l>this.options.maxZoom||l<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)i=this._tiles[t],i.retain=i.current;for(t in this._tiles)if(i=this._tiles[t],i.current&&!i.active){var d=i.coords;this._retainParent(d.x,d.y,d.z,d.z-5)||this._retainChildren(d.x,d.y,d.z,d.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var i in this._tiles)this._tiles[i].coords.z===t&&this._removeTile(i)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)qe(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,i,l,d){var g=Math.floor(t/2),x=Math.floor(i/2),b=l-1,A=new F(+g,+x);A.z=+b;var z=this._tileCoordsToKey(A),Z=this._tiles[z];return Z&&Z.active?(Z.retain=!0,!0):(Z&&Z.loaded&&(Z.retain=!0),b>d?this._retainParent(g,x,b,d):!1)},_retainChildren:function(t,i,l,d){for(var g=2*t;g<2*t+2;g++)for(var x=2*i;x<2*i+2;x++){var b=new F(g,x);b.z=l+1;var A=this._tileCoordsToKey(b),z=this._tiles[A];if(z&&z.active){z.retain=!0;continue}else z&&z.loaded&&(z.retain=!0);l+1<d&&this._retainChildren(g,x,l+1,d)}},_resetView:function(t){var i=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),i,i)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var i=this.options;return i.minNativeZoom!==void 0&&t<i.minNativeZoom?i.minNativeZoom:i.maxNativeZoom!==void 0&&i.maxNativeZoom<t?i.maxNativeZoom:t},_setView:function(t,i,l,d){var g=Math.round(i);this.options.maxZoom!==void 0&&g>this.options.maxZoom||this.options.minZoom!==void 0&&g<this.options.minZoom?g=void 0:g=this._clampZoom(g);var x=this.options.updateWhenZooming&&g!==this._tileZoom;(!d||x)&&(this._tileZoom=g,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),g!==void 0&&this._update(t),l||this._pruneTiles(),this._noPrune=!!l),this._setZoomTransforms(t,i)},_setZoomTransforms:function(t,i){for(var l in this._levels)this._setZoomTransform(this._levels[l],t,i)},_setZoomTransform:function(t,i,l){var d=this._map.getZoomScale(l,t.zoom),g=t.origin.multiplyBy(d).subtract(this._map._getNewPixelOrigin(i,l)).round();ae.any3d?Vt(t.el,g,d):nt(t.el,g)},_resetGrid:function(){var t=this._map,i=t.options.crs,l=this._tileSize=this.getTileSize(),d=this._tileZoom,g=this._map.getPixelWorldBounds(this._tileZoom);g&&(this._globalTileRange=this._pxBoundsToTileRange(g)),this._wrapX=i.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,i.wrapLng[0]],d).x/l.x),Math.ceil(t.project([0,i.wrapLng[1]],d).x/l.y)],this._wrapY=i.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([i.wrapLat[0],0],d).y/l.x),Math.ceil(t.project([i.wrapLat[1],0],d).y/l.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var i=this._map,l=i._animatingZoom?Math.max(i._animateToZoom,i.getZoom()):i.getZoom(),d=i.getZoomScale(l,this._tileZoom),g=i.project(t,this._tileZoom).floor(),x=i.getSize().divideBy(d*2);return new C(g.subtract(x),g.add(x))},_update:function(t){var i=this._map;if(i){var l=this._clampZoom(i.getZoom());if(t===void 0&&(t=i.getCenter()),this._tileZoom!==void 0){var d=this._getTiledPixelBounds(t),g=this._pxBoundsToTileRange(d),x=g.getCenter(),b=[],A=this.options.keepBuffer,z=new C(g.getBottomLeft().subtract([A,-A]),g.getTopRight().add([A,-A]));if(!(isFinite(g.min.x)&&isFinite(g.min.y)&&isFinite(g.max.x)&&isFinite(g.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Z in this._tiles){var X=this._tiles[Z].coords;(X.z!==this._tileZoom||!z.contains(new F(X.x,X.y)))&&(this._tiles[Z].current=!1)}if(Math.abs(l-this._tileZoom)>1){this._setView(t,l);return}for(var pe=g.min.y;pe<=g.max.y;pe++)for(var Ee=g.min.x;Ee<=g.max.x;Ee++){var ht=new F(Ee,pe);if(ht.z=this._tileZoom,!!this._isValidTile(ht)){var at=this._tiles[this._tileCoordsToKey(ht)];at?at.current=!0:b.push(ht)}}if(b.sort(function(Tt,Fr){return Tt.distanceTo(x)-Fr.distanceTo(x)}),b.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var It=document.createDocumentFragment();for(Ee=0;Ee<b.length;Ee++)this._addTile(b[Ee],It);this._level.el.appendChild(It)}}}},_isValidTile:function(t){var i=this._map.options.crs;if(!i.infinite){var l=this._globalTileRange;if(!i.wrapLng&&(t.x<l.min.x||t.x>l.max.x)||!i.wrapLat&&(t.y<l.min.y||t.y>l.max.y))return!1}if(!this.options.bounds)return!0;var d=this._tileCoordsToBounds(t);return ue(this.options.bounds).overlaps(d)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var i=this._map,l=this.getTileSize(),d=t.scaleBy(l),g=d.add(l),x=i.unproject(d,t.z),b=i.unproject(g,t.z);return[x,b]},_tileCoordsToBounds:function(t){var i=this._tileCoordsToNwSe(t),l=new de(i[0],i[1]);return this.options.noWrap||(l=this._map.wrapLatLngBounds(l)),l},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var i=t.split(":"),l=new F(+i[0],+i[1]);return l.z=+i[2],l},_removeTile:function(t){var i=this._tiles[t];i&&(qe(i.el),delete this._tiles[t],this.fire("tileunload",{tile:i.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){Se(t,"leaflet-tile");var i=this.getTileSize();t.style.width=i.x+"px",t.style.height=i.y+"px",t.onselectstart=R,t.onmousemove=R,ae.ielt9&&this.options.opacity<1&&bt(t,this.options.opacity)},_addTile:function(t,i){var l=this._getTilePos(t),d=this._tileCoordsToKey(t),g=this.createTile(this._wrapCoords(t),_(this._tileReady,this,t));this._initTile(g),this.createTile.length<2&&Ie(_(this._tileReady,this,t,null,g)),nt(g,l),this._tiles[d]={el:g,coords:t,current:!0},i.appendChild(g),this.fire("tileloadstart",{tile:g,coords:t})},_tileReady:function(t,i,l){i&&this.fire("tileerror",{error:i,tile:l,coords:t});var d=this._tileCoordsToKey(t);l=this._tiles[d],l&&(l.loaded=+new Date,this._map._fadeAnimated?(bt(l.el,0),Je(this._fadeFrame),this._fadeFrame=Ie(this._updateOpacity,this)):(l.active=!0,this._pruneTiles()),i||(Se(l.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:l.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ae.ielt9||!this._map._fadeAnimated?Ie(this._pruneTiles,this):setTimeout(_(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var i=new F(this._wrapX?P(t.x,this._wrapX):t.x,this._wrapY?P(t.y,this._wrapY):t.y);return i.z=t.z,i},_pxBoundsToTileRange:function(t){var i=this.getTileSize();return new C(t.min.unscaleBy(i).floor(),t.max.unscaleBy(i).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function Dr(t){return new $n(t)}var Fn=$n.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,i){this._url=t,i=B(this,i),i.detectRetina&&ae.retina&&i.maxZoom>0?(i.tileSize=Math.floor(i.tileSize/2),i.zoomReverse?(i.zoomOffset--,i.minZoom=Math.min(i.maxZoom,i.minZoom+1)):(i.zoomOffset++,i.maxZoom=Math.max(i.minZoom,i.maxZoom-1)),i.minZoom=Math.max(0,i.minZoom)):i.zoomReverse?i.minZoom=Math.min(i.maxZoom,i.minZoom):i.maxZoom=Math.max(i.minZoom,i.maxZoom),typeof i.subdomains=="string"&&(i.subdomains=i.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,i){return this._url===t&&i===void 0&&(i=!0),this._url=t,i||this.redraw(),this},createTile:function(t,i){var l=document.createElement("img");return we(l,"load",_(this._tileOnLoad,this,i,l)),we(l,"error",_(this._tileOnError,this,i,l)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(l.referrerPolicy=this.options.referrerPolicy),l.alt="",l.src=this.getTileUrl(t),l},getTileUrl:function(t){var i={r:ae.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var l=this._globalTileRange.max.y-t.y;this.options.tms&&(i.y=l),i["-y"]=l}return Y(this._url,h(i,this.options))},_tileOnLoad:function(t,i){ae.ielt9?setTimeout(_(t,this,null,i),0):t(null,i)},_tileOnError:function(t,i,l){var d=this.options.errorTileUrl;d&&i.getAttribute("src")!==d&&(i.src=d),t(l,i)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,i=this.options.maxZoom,l=this.options.zoomReverse,d=this.options.zoomOffset;return l&&(t=i-t),t+d},_getSubdomain:function(t){var i=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[i]},_abortLoading:function(){var t,i;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(i=this._tiles[t].el,i.onload=R,i.onerror=R,!i.complete)){i.src=Oe;var l=this._tiles[t].coords;qe(i),delete this._tiles[t],this.fire("tileabort",{tile:i,coords:l})}},_removeTile:function(t){var i=this._tiles[t];if(i)return i.el.setAttribute("src",Oe),$n.prototype._removeTile.call(this,t)},_tileReady:function(t,i,l){if(!(!this._map||l&&l.getAttribute("src")===Oe))return $n.prototype._tileReady.call(this,t,i,l)}});function To(t,i){return new Fn(t,i)}var ki=Fn.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,i){this._url=t;var l=h({},this.defaultWmsParams);for(var d in i)d in this.options||(l[d]=i[d]);i=B(this,i);var g=i.detectRetina&&ae.retina?2:1,x=this.getTileSize();l.width=x.x*g,l.height=x.y*g,this.wmsParams=l},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var i=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[i]=this._crs.code,Fn.prototype.onAdd.call(this,t)},getTileUrl:function(t){var i=this._tileCoordsToNwSe(t),l=this._crs,d=$(l.project(i[0]),l.project(i[1])),g=d.min,x=d.max,b=(this._wmsVersion>=1.3&&this._crs===Aa?[g.y,g.x,x.y,x.x]:[g.x,g.y,x.x,x.y]).join(","),A=Fn.prototype.getTileUrl.call(this,t);return A+H(this.wmsParams,A,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+b},setParams:function(t,i){return h(this.wmsParams,t),i||this.redraw(),this}});function Ua(t,i){return new ki(t,i)}Fn.WMS=ki,To.wms=Ua;var hn=Jt.extend({options:{padding:.1},initialize:function(t){B(this,t),v(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Se(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,i){var l=this._map.getZoomScale(i,this._zoom),d=this._map.getSize().multiplyBy(.5+this.options.padding),g=this._map.project(this._center,i),x=d.multiplyBy(-l).add(g).subtract(this._map._getNewPixelOrigin(t,i));ae.any3d?Vt(this._container,x,l):nt(this._container,x)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,i=this._map.getSize(),l=this._map.containerPointToLayerPoint(i.multiplyBy(-t)).round();this._bounds=new C(l,l.add(i.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Po=hn.extend({options:{tolerance:0},getEvents:function(){var t=hn.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){hn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");we(t,"mousemove",this._onMouseMove,this),we(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),we(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){Je(this._redrawRequest),delete this._ctx,qe(this._container),Ue(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var i in this._layers)t=this._layers[i],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){hn.prototype._update.call(this);var t=this._bounds,i=this._container,l=t.getSize(),d=ae.retina?2:1;nt(i,t.min),i.width=d*l.x,i.height=d*l.y,i.style.width=l.x+"px",i.style.height=l.y+"px",ae.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){hn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[v(t)]=t;var i=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=i),this._drawLast=i,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var i=t._order,l=i.next,d=i.prev;l?l.prev=d:this._drawLast=d,d?d.next=l:this._drawFirst=l,delete t._order,delete this._layers[v(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var i=t.options.dashArray.split(/[, ]+/),l=[],d,g;for(g=0;g<i.length;g++){if(d=Number(i[g]),isNaN(d))return;l.push(d)}t.options._dashArray=l}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||Ie(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var i=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new C,this._redrawBounds.extend(t._pxBounds.min.subtract([i,i])),this._redrawBounds.extend(t._pxBounds.max.add([i,i]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var i=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,i.x,i.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,i=this._redrawBounds;if(this._ctx.save(),i){var l=i.getSize();this._ctx.beginPath(),this._ctx.rect(i.min.x,i.min.y,l.x,l.y),this._ctx.clip()}this._drawing=!0;for(var d=this._drawFirst;d;d=d.next)t=d.layer,(!i||t._pxBounds&&t._pxBounds.intersects(i))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,i){if(this._drawing){var l,d,g,x,b=t._parts,A=b.length,z=this._ctx;if(A){for(z.beginPath(),l=0;l<A;l++){for(d=0,g=b[l].length;d<g;d++)x=b[l][d],z[d?"lineTo":"moveTo"](x.x,x.y);i&&z.closePath()}this._fillStroke(z,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var i=t._point,l=this._ctx,d=Math.max(Math.round(t._radius),1),g=(Math.max(Math.round(t._radiusY),1)||d)/d;g!==1&&(l.save(),l.scale(1,g)),l.beginPath(),l.arc(i.x,i.y/g,d,0,Math.PI*2,!1),g!==1&&l.restore(),this._fillStroke(l,t)}},_fillStroke:function(t,i){var l=i.options;l.fill&&(t.globalAlpha=l.fillOpacity,t.fillStyle=l.fillColor||l.color,t.fill(l.fillRule||"evenodd")),l.stroke&&l.weight!==0&&(t.setLineDash&&t.setLineDash(i.options&&i.options._dashArray||[]),t.globalAlpha=l.opacity,t.lineWidth=l.weight,t.strokeStyle=l.color,t.lineCap=l.lineCap,t.lineJoin=l.lineJoin,t.stroke())},_onClick:function(t){for(var i=this._map.mouseEventToLayerPoint(t),l,d,g=this._drawFirst;g;g=g.next)l=g.layer,l.options.interactive&&l._containsPoint(i)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(l))&&(d=l);this._fireEvent(d?[d]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var i=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,i)}},_handleMouseOut:function(t){var i=this._hoveredLayer;i&&(Ze(this._container,"leaflet-interactive"),this._fireEvent([i],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,i){if(!this._mouseHoverThrottled){for(var l,d,g=this._drawFirst;g;g=g.next)l=g.layer,l.options.interactive&&l._containsPoint(i)&&(d=l);d!==this._hoveredLayer&&(this._handleMouseOut(t),d&&(Se(this._container,"leaflet-interactive"),this._fireEvent([d],t,"mouseover"),this._hoveredLayer=d)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(_(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,i,l){this._map._fireDOMEvent(i,l||i.type,t)},_bringToFront:function(t){var i=t._order;if(i){var l=i.next,d=i.prev;if(l)l.prev=d;else return;d?d.next=l:l&&(this._drawFirst=l),i.prev=this._drawLast,this._drawLast.next=i,i.next=null,this._drawLast=i,this._requestRedraw(t)}},_bringToBack:function(t){var i=t._order;if(i){var l=i.next,d=i.prev;if(d)d.next=l;else return;l?l.prev=d:d&&(this._drawLast=d),i.prev=null,i.next=this._drawFirst,this._drawFirst.prev=i,this._drawFirst=i,this._requestRedraw(t)}}});function Co(t){return ae.canvas?new Po(t):null}var Br=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),$a={_initContainer:function(){this._container=be("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(hn.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var i=t._container=Br("shape");Se(i,"leaflet-vml-shape "+(this.options.className||"")),i.coordsize="1 1",t._path=Br("path"),i.appendChild(t._path),this._updateStyle(t),this._layers[v(t)]=t},_addPath:function(t){var i=t._container;this._container.appendChild(i),t.options.interactive&&t.addInteractiveTarget(i)},_removePath:function(t){var i=t._container;qe(i),t.removeInteractiveTarget(i),delete this._layers[v(t)]},_updateStyle:function(t){var i=t._stroke,l=t._fill,d=t.options,g=t._container;g.stroked=!!d.stroke,g.filled=!!d.fill,d.stroke?(i||(i=t._stroke=Br("stroke")),g.appendChild(i),i.weight=d.weight+"px",i.color=d.color,i.opacity=d.opacity,d.dashArray?i.dashStyle=G(d.dashArray)?d.dashArray.join(" "):d.dashArray.replace(/( *, *)/g," "):i.dashStyle="",i.endcap=d.lineCap.replace("butt","flat"),i.joinstyle=d.lineJoin):i&&(g.removeChild(i),t._stroke=null),d.fill?(l||(l=t._fill=Br("fill")),g.appendChild(l),l.color=d.fillColor||d.color,l.opacity=d.fillOpacity):l&&(g.removeChild(l),t._fill=null)},_updateCircle:function(t){var i=t._point.round(),l=Math.round(t._radius),d=Math.round(t._radiusY||l);this._setPath(t,t._empty()?"M0 0":"AL "+i.x+","+i.y+" "+l+","+d+" 0,"+65535*360)},_setPath:function(t,i){t._path.v=i},_bringToFront:function(t){Er(t._container)},_bringToBack:function(t){yn(t._container)}},Qt=ae.vml?Br:qs,ir=hn.extend({_initContainer:function(){this._container=Qt("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Qt("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){qe(this._container),Ue(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){hn.prototype._update.call(this);var t=this._bounds,i=t.getSize(),l=this._container;(!this._svgSize||!this._svgSize.equals(i))&&(this._svgSize=i,l.setAttribute("width",i.x),l.setAttribute("height",i.y)),nt(l,t.min),l.setAttribute("viewBox",[t.min.x,t.min.y,i.x,i.y].join(" ")),this.fire("update")}},_initPath:function(t){var i=t._path=Qt("path");t.options.className&&Se(i,t.options.className),t.options.interactive&&Se(i,"leaflet-interactive"),this._updateStyle(t),this._layers[v(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){qe(t._path),t.removeInteractiveTarget(t._path),delete this._layers[v(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var i=t._path,l=t.options;i&&(l.stroke?(i.setAttribute("stroke",l.color),i.setAttribute("stroke-opacity",l.opacity),i.setAttribute("stroke-width",l.weight),i.setAttribute("stroke-linecap",l.lineCap),i.setAttribute("stroke-linejoin",l.lineJoin),l.dashArray?i.setAttribute("stroke-dasharray",l.dashArray):i.removeAttribute("stroke-dasharray"),l.dashOffset?i.setAttribute("stroke-dashoffset",l.dashOffset):i.removeAttribute("stroke-dashoffset")):i.setAttribute("stroke","none"),l.fill?(i.setAttribute("fill",l.fillColor||l.color),i.setAttribute("fill-opacity",l.fillOpacity),i.setAttribute("fill-rule",l.fillRule||"evenodd")):i.setAttribute("fill","none"))},_updatePoly:function(t,i){this._setPath(t,Ks(t._parts,i))},_updateCircle:function(t){var i=t._point,l=Math.max(Math.round(t._radius),1),d=Math.max(Math.round(t._radiusY),1)||l,g="a"+l+","+d+" 0 1,0 ",x=t._empty()?"M0 0":"M"+(i.x-l)+","+i.y+g+l*2+",0 "+g+-l*2+",0 ";this._setPath(t,x)},_setPath:function(t,i){t._path.setAttribute("d",i)},_bringToFront:function(t){Er(t._path)},_bringToBack:function(t){yn(t._path)}});ae.vml&&ir.include($a);function ys(t){return ae.svg||ae.vml?new ir(t):null}Ce.include({getRenderer:function(t){var i=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return i||(i=this._renderer=this._createRenderer()),this.hasLayer(i)||this.addLayer(i),i},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var i=this._paneRenderers[t];return i===void 0&&(i=this._createRenderer({pane:t}),this._paneRenderers[t]=i),i},_createRenderer:function(t){return this.options.preferCanvas&&Co(t)||ys(t)}});var Fa=bn.extend({initialize:function(t,i){bn.prototype.initialize.call(this,this._boundsToLatLngs(t),i)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=ue(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function au(t,i){return new Fa(t,i)}ir.create=Qt,ir.pointsToPath=Ks,un.geometryToLayer=Ir,un.coordsToLatLng=fs,un.coordsToLatLngs=xi,un.latLngToCoords=ps,un.latLngsToCoords=ms,un.getFeature=jr,un.asFeature=_s,Ce.mergeOptions({boxZoom:!0});var Ur=zt.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){we(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ue(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){qe(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ae(),ts(),this._startPoint=this._map.mouseEventToContainerPoint(t),we(document,{contextmenu:Kt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=be("div","leaflet-zoom-box",this._container),Se(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var i=new C(this._point,this._startPoint),l=i.getSize();nt(this._box,i.min),this._box.style.width=l.x+"px",this._box.style.height=l.y+"px"},_finish:function(){this._moved&&(qe(this._box),Ze(this._container,"leaflet-crosshair")),Cr(),ns(),Ue(document,{contextmenu:Kt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(_(this._resetState,this),0);var i=new de(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(i).fire("boxzoomend",{boxZoomBounds:i})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ce.addInitHook("addHandler","boxZoom",Ur),Ce.mergeOptions({doubleClickZoom:!0});var Wa=zt.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var i=this._map,l=i.getZoom(),d=i.options.zoomDelta,g=t.originalEvent.shiftKey?l-d:l+d;i.options.doubleClickZoom==="center"?i.setZoom(g):i.setZoomAround(t.containerPoint,g)}});Ce.addInitHook("addHandler","doubleClickZoom",Wa),Ce.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Lo=zt.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new Gt(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}Se(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ze(this._map._container,"leaflet-grab"),Ze(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var i=ue(this._map.options.maxBounds);this._offsetLimit=$(this._map.latLngToContainerPoint(i.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(i.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var i=this._lastTime=+new Date,l=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(l),this._times.push(i),this._prunePositions(i)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),i=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=i.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,i){return t-(t-i)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),i=this._offsetLimit;t.x<i.min.x&&(t.x=this._viscousLimit(t.x,i.min.x)),t.y<i.min.y&&(t.y=this._viscousLimit(t.y,i.min.y)),t.x>i.max.x&&(t.x=this._viscousLimit(t.x,i.max.x)),t.y>i.max.y&&(t.y=this._viscousLimit(t.y,i.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,i=Math.round(t/2),l=this._initialWorldOffset,d=this._draggable._newPos.x,g=(d-i+l)%t+i-l,x=(d+i+l)%t-i-l,b=Math.abs(g+l)<Math.abs(x+l)?g:x;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=b},_onDragEnd:function(t){var i=this._map,l=i.options,d=!l.inertia||t.noInertia||this._times.length<2;if(i.fire("dragend",t),d)i.fire("moveend");else{this._prunePositions(+new Date);var g=this._lastPos.subtract(this._positions[0]),x=(this._lastTime-this._times[0])/1e3,b=l.easeLinearity,A=g.multiplyBy(b/x),z=A.distanceTo([0,0]),Z=Math.min(l.inertiaMaxSpeed,z),X=A.multiplyBy(Z/z),pe=Z/(l.inertiaDeceleration*b),Ee=X.multiplyBy(-pe/2).round();!Ee.x&&!Ee.y?i.fire("moveend"):(Ee=i._limitOffset(Ee,i.options.maxBounds),Ie(function(){i.panBy(Ee,{duration:pe,easeLinearity:b,noMoveStart:!0,animate:!0})}))}}});Ce.addInitHook("addHandler","dragging",Lo),Ce.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Oo=zt.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),we(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ue(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,i=document.documentElement,l=t.scrollTop||i.scrollTop,d=t.scrollLeft||i.scrollLeft;this._map._container.focus(),window.scrollTo(d,l)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var i=this._panKeys={},l=this.keyCodes,d,g;for(d=0,g=l.left.length;d<g;d++)i[l.left[d]]=[-1*t,0];for(d=0,g=l.right.length;d<g;d++)i[l.right[d]]=[t,0];for(d=0,g=l.down.length;d<g;d++)i[l.down[d]]=[0,t];for(d=0,g=l.up.length;d<g;d++)i[l.up[d]]=[0,-1*t]},_setZoomDelta:function(t){var i=this._zoomKeys={},l=this.keyCodes,d,g;for(d=0,g=l.zoomIn.length;d<g;d++)i[l.zoomIn[d]]=t;for(d=0,g=l.zoomOut.length;d<g;d++)i[l.zoomOut[d]]=-t},_addHooks:function(){we(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ue(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var i=t.keyCode,l=this._map,d;if(i in this._panKeys){if(!l._panAnim||!l._panAnim._inProgress)if(d=this._panKeys[i],t.shiftKey&&(d=W(d).multiplyBy(3)),l.options.maxBounds&&(d=l._limitOffset(W(d),l.options.maxBounds)),l.options.worldCopyJump){var g=l.wrapLatLng(l.unproject(l.project(l.getCenter()).add(d)));l.panTo(g)}else l.panBy(d)}else if(i in this._zoomKeys)l.setZoom(l.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[i]);else if(i===27&&l._popup&&l._popup.options.closeOnEscapeKey)l.closePopup();else return;Kt(t)}}});Ce.addInitHook("addHandler","keyboard",Oo),Ce.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var $e=zt.extend({addHooks:function(){we(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ue(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var i=ba(t),l=this._map.options.wheelDebounceTime;this._delta+=i,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var d=Math.max(l-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(_(this._performZoom,this),d),Kt(t)},_performZoom:function(){var t=this._map,i=t.getZoom(),l=this._map.options.zoomSnap||0;t._stop();var d=this._delta/(this._map.options.wheelPxPerZoomLevel*4),g=4*Math.log(2/(1+Math.exp(-Math.abs(d))))/Math.LN2,x=l?Math.ceil(g/l)*l:g,b=t._limitZoom(i+(this._delta>0?x:-x))-i;this._delta=0,this._startTime=null,b&&(t.options.scrollWheelZoom==="center"?t.setZoom(i+b):t.setZoomAround(this._lastMousePos,i+b))}});Ce.addInitHook("addHandler","scrollWheelZoom",$e);var Ro=600;Ce.mergeOptions({tapHold:ae.touchNative&&ae.safari&&ae.mobile,tapTolerance:15});var bi=zt.extend({addHooks:function(){we(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ue(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var i=t.touches[0];this._startPos=this._newPos=new F(i.clientX,i.clientY),this._holdTimeout=setTimeout(_(function(){this._cancel(),this._isTapValid()&&(we(document,"touchend",Qe),we(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",i))},this),Ro),we(document,"touchend touchcancel contextmenu",this._cancel,this),we(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){Ue(document,"touchend",Qe),Ue(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),Ue(document,"touchend touchcancel contextmenu",this._cancel,this),Ue(document,"touchmove",this._onMove,this)},_onMove:function(t){var i=t.touches[0];this._newPos=new F(i.clientX,i.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,i){var l=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:i.screenX,screenY:i.screenY,clientX:i.clientX,clientY:i.clientY});l._simulated=!0,i.target.dispatchEvent(l)}});Ce.addInitHook("addHandler","tapHold",bi),Ce.mergeOptions({touchZoom:ae.touch,bounceAtZoomLimits:!0});var $r=zt.extend({addHooks:function(){Se(this._map._container,"leaflet-touch-zoom"),we(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ze(this._map._container,"leaflet-touch-zoom"),Ue(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var i=this._map;if(!(!t.touches||t.touches.length!==2||i._animatingZoom||this._zooming)){var l=i.mouseEventToContainerPoint(t.touches[0]),d=i.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=i.getSize()._divideBy(2),this._startLatLng=i.containerPointToLatLng(this._centerPoint),i.options.touchZoom!=="center"&&(this._pinchStartLatLng=i.containerPointToLatLng(l.add(d)._divideBy(2))),this._startDist=l.distanceTo(d),this._startZoom=i.getZoom(),this._moved=!1,this._zooming=!0,i._stop(),we(document,"touchmove",this._onTouchMove,this),we(document,"touchend touchcancel",this._onTouchEnd,this),Qe(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var i=this._map,l=i.mouseEventToContainerPoint(t.touches[0]),d=i.mouseEventToContainerPoint(t.touches[1]),g=l.distanceTo(d)/this._startDist;if(this._zoom=i.getScaleZoom(g,this._startZoom),!i.options.bounceAtZoomLimits&&(this._zoom<i.getMinZoom()&&g<1||this._zoom>i.getMaxZoom()&&g>1)&&(this._zoom=i._limitZoom(this._zoom)),i.options.touchZoom==="center"){if(this._center=this._startLatLng,g===1)return}else{var x=l._add(d)._divideBy(2)._subtract(this._centerPoint);if(g===1&&x.x===0&&x.y===0)return;this._center=i.unproject(i.project(this._pinchStartLatLng,this._zoom).subtract(x),this._zoom)}this._moved||(i._moveStart(!0,!1),this._moved=!0),Je(this._animRequest);var b=_(i._move,i,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=Ie(b,this,!0),Qe(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Je(this._animRequest),Ue(document,"touchmove",this._onTouchMove,this),Ue(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Ce.addInitHook("addHandler","touchZoom",$r),Ce.BoxZoom=Ur,Ce.DoubleClickZoom=Wa,Ce.Drag=Lo,Ce.Keyboard=Oo,Ce.ScrollWheelZoom=$e,Ce.TapHold=bi,Ce.TouchZoom=$r,s.Bounds=C,s.Browser=ae,s.CRS=Le,s.Canvas=Po,s.Circle=hs,s.CircleMarker=cs,s.Class=st,s.Control=At,s.DivIcon=vs,s.DivOverlay=cn,s.DomEvent=ss,s.DomUtil=mi,s.Draggable=Gt,s.Evented=Be,s.FeatureGroup=Sn,s.GeoJSON=un,s.GridLayer=$n,s.Handler=zt,s.Icon=rr,s.ImageOverlay=Un,s.LatLng=oe,s.LatLngBounds=de,s.Layer=Jt,s.LayerGroup=Dn,s.LineUtil=Ra,s.Map=Ce,s.Marker=kn,s.Mixin=po,s.Path=Bn,s.Point=F,s.PolyUtil=Jl,s.Polygon=bn,s.Polyline=Nt,s.Popup=gs,s.PosAnimation=os,s.Projection=tu,s.Rectangle=Fa,s.Renderer=hn,s.SVG=ir,s.SVGOverlay=bo,s.TileLayer=Fn,s.Tooltip=zr,s.Transformation=vr,s.Util=Rt,s.VideoOverlay=ko,s.bind=_,s.bounds=$,s.canvas=Co,s.circle=wi,s.circleMarker=ja,s.control=zn,s.divIcon=Ba,s.extend=h,s.featureGroup=Na,s.geoJSON=Ma,s.geoJson=Yt,s.gridLayer=Dr,s.icon=Ia,s.imageOverlay=za,s.latLng=te,s.latLngBounds=ue,s.layerGroup=yi,s.map=Mn,s.marker=iu,s.point=W,s.polygon=ou,s.polyline=su,s.popup=Mr,s.rectangle=au,s.setOptions=B,s.stamp=v,s.svg=ys,s.svgOverlay=Eo,s.tileLayer=To,s.tooltip=Si,s.transformation=yr,s.version=u,s.videoOverlay=Da;var Za=window.L;s.noConflict=function(){return window.L=Za,this},window.L=s}))})(Go,Go.exports)),Go.exports}var oa=Hp();const Bl=Uc(oa);function Zc(a,r,s){return Object.freeze({instance:a,context:r,container:s})}function Hc(a,r){return r==null?function(u,h){const p=fe.useRef();return p.current||(p.current=a(u,h)),p}:function(u,h){const p=fe.useRef();p.current||(p.current=a(u,h));const _=fe.useRef(u),{instance:w}=p.current;return fe.useEffect(function(){_.current!==u&&(r(w,u,_.current),_.current=u)},[w,u,h]),p}}function Vp(a,r){fe.useEffect(function(){return(r.layerContainer??r.map).addLayer(a.instance),function(){var p;(p=r.layerContainer)==null||p.removeLayer(a.instance),r.map.removeLayer(a.instance)}},[r,a])}function gf(a){return function(s){const u=Fc(),h=a(Wc(s,u),u);return ff(u.map,s.attribution),_f(h.current,s.eventHandlers),Vp(h.current,u),h}}function qp(a,r){const s=Hc(a,r),u=gf(s);return Up(u)}function Kp(a,r){const s=Hc(a),u=Wp(s,r);return $p(u)}function Gp(a,r){const s=Hc(a,r),u=gf(s);return Fp(u)}function Jp(a,r,s){const{opacity:u,zIndex:h}=r;u!=null&&u!==s.opacity&&a.setOpacity(u),h!=null&&h!==s.zIndex&&a.setZIndex(h)}function Yp(){return Fc().map}function Qp(a){const r=Yp();return fe.useEffect(function(){return r.on(a),function(){r.off(a)}},[r,a]),r}function Cc(){return Cc=Object.assign||function(a){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(a[u]=s[u])}return a},Cc.apply(this,arguments)}function Xp({bounds:a,boundsOptions:r,center:s,children:u,className:h,id:p,placeholder:_,style:w,whenReady:v,zoom:S,...P},R){const[N]=fe.useState({className:h,id:p,style:w}),[M,U]=fe.useState(null);fe.useImperativeHandle(R,()=>(M==null?void 0:M.map)??null,[M]);const B=fe.useCallback(Q=>{if(Q!==null&&M===null){const Y=new oa.Map(Q,P);s!=null&&S!=null?Y.setView(s,S):a!=null&&Y.fitBounds(a,r),v!=null&&Y.whenReady(v),U(Dp(Y))}},[]);fe.useEffect(()=>()=>{M==null||M.map.remove()},[M]);const H=M?jl.createElement(mf,{value:M},u):_??null;return jl.createElement("div",Cc({},N,{ref:B}),H)}const em=fe.forwardRef(Xp),Bd=qp(function({position:r,...s},u){const h=new oa.Marker(r,s);return Zc(h,Bp(u,{overlayContainer:h}))},function(r,s,u){s.position!==u.position&&r.setLatLng(s.position),s.icon!=null&&s.icon!==u.icon&&r.setIcon(s.icon),s.zIndexOffset!=null&&s.zIndexOffset!==u.zIndexOffset&&r.setZIndexOffset(s.zIndexOffset),s.opacity!=null&&s.opacity!==u.opacity&&r.setOpacity(s.opacity),r.dragging!=null&&s.draggable!==u.draggable&&(s.draggable===!0?r.dragging.enable():r.dragging.disable())}),Ud=Kp(function(r,s){const u=new oa.Popup(r,s.overlayContainer);return Zc(u,s)},function(r,s,{position:u},h){fe.useEffect(function(){const{instance:_}=r;function w(S){S.popup===_&&(_.update(),h(!0))}function v(S){S.popup===_&&h(!1)}return s.map.on({popupopen:w,popupclose:v}),s.overlayContainer==null?(u!=null&&_.setLatLng(u),_.openOn(s.map)):s.overlayContainer.bindPopup(_),function(){var P;s.map.off({popupopen:w,popupclose:v}),(P=s.overlayContainer)==null||P.unbindPopup(),s.map.removeLayer(_)}},[r,s,h,u])}),tm=Gp(function({url:r,...s},u){const h=new oa.TileLayer(r,Wc(s,u));return Zc(h,u)},function(r,s,u){Jp(r,s,u);const{url:h}=s;h!=null&&h!==u.url&&r.setUrl(h)});delete Bl.Icon.Default.prototype._getIconUrl;Bl.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});const nm=new Bl.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),rm=new Bl.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});function im({onMapClick:a,disabled:r}){return Qp({click:s=>{r||a(s.latlng.lat,s.latlng.lng)}}),null}const vf=({center:a,zoom:r=15,onMapClick:s,guessLocation:u,actualLocation:h,showResult:p=!1,disabled:_=!1})=>T.jsxs(em,{center:a,zoom:r,style:{height:"100%",width:"100%"},scrollWheelZoom:!1,children:[T.jsx(tm,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),s&&T.jsx(im,{onMapClick:s,disabled:_||p}),u&&T.jsx(Bd,{position:[u.lat,u.lng],icon:nm,children:T.jsx(Ud,{children:"Your Guess"})}),p&&h&&T.jsx(Bd,{position:[h.latitude,h.longitude],icon:rm,children:T.jsx(Ud,{children:h.name})})]}),sm=(a,r,s,u)=>{const p=(s-a)*Math.PI/180,_=(u-r)*Math.PI/180,w=Math.sin(p/2)*Math.sin(p/2)+Math.cos(a*Math.PI/180)*Math.cos(s*Math.PI/180)*Math.sin(_/2)*Math.sin(_/2);return 6371e3*(2*Math.atan2(Math.sqrt(w),Math.sqrt(1-w)))},om=a=>a>500?0:Math.round(5e3*(1-a/500)),am=(a,r,s)=>{const u=sm(a,r,s.latitude,s.longitude),h=om(u);return{latitude:a,longitude:r,distance:u,score:h}};function Ul(a,r){var s={};for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&r.indexOf(u)<0&&(s[u]=a[u]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var h=0,u=Object.getOwnPropertySymbols(a);h<u.length;h++)r.indexOf(u[h])<0&&Object.prototype.propertyIsEnumerable.call(a,u[h])&&(s[u[h]]=a[u[h]]);return s}function lm(a,r,s,u){function h(p){return p instanceof s?p:new s(function(_){_(p)})}return new(s||(s=Promise))(function(p,_){function w(P){try{S(u.next(P))}catch(R){_(R)}}function v(P){try{S(u.throw(P))}catch(R){_(R)}}function S(P){P.done?p(P.value):h(P.value).then(w,v)}S((u=u.apply(a,r||[])).next())})}const um=a=>a?(...r)=>a(...r):(...r)=>fetch(...r);class Vc extends Error{constructor(r,s="FunctionsError",u){super(r),this.name=s,this.context=u}}class cm extends Vc{constructor(r){super("Failed to send a request to the Edge Function","FunctionsFetchError",r)}}class $d extends Vc{constructor(r){super("Relay Error invoking the Edge Function","FunctionsRelayError",r)}}class Fd extends Vc{constructor(r){super("Edge Function returned a non-2xx status code","FunctionsHttpError",r)}}var Lc;(function(a){a.Any="any",a.ApNortheast1="ap-northeast-1",a.ApNortheast2="ap-northeast-2",a.ApSouth1="ap-south-1",a.ApSoutheast1="ap-southeast-1",a.ApSoutheast2="ap-southeast-2",a.CaCentral1="ca-central-1",a.EuCentral1="eu-central-1",a.EuWest1="eu-west-1",a.EuWest2="eu-west-2",a.EuWest3="eu-west-3",a.SaEast1="sa-east-1",a.UsEast1="us-east-1",a.UsWest1="us-west-1",a.UsWest2="us-west-2"})(Lc||(Lc={}));class hm{constructor(r,{headers:s={},customFetch:u,region:h=Lc.Any}={}){this.url=r,this.headers=s,this.region=h,this.fetch=um(u)}setAuth(r){this.headers.Authorization=`Bearer ${r}`}invoke(r){return lm(this,arguments,void 0,function*(s,u={}){var h;let p,_;try{const{headers:w,method:v,body:S,signal:P,timeout:R}=u;let N={},{region:M}=u;M||(M=this.region);const U=new URL(`${this.url}/${s}`);M&&M!=="any"&&(N["x-region"]=M,U.searchParams.set("forceFunctionRegion",M));let B;S&&(w&&!Object.prototype.hasOwnProperty.call(w,"Content-Type")||!w)?typeof Blob<"u"&&S instanceof Blob||S instanceof ArrayBuffer?(N["Content-Type"]="application/octet-stream",B=S):typeof S=="string"?(N["Content-Type"]="text/plain",B=S):typeof FormData<"u"&&S instanceof FormData?B=S:(N["Content-Type"]="application/json",B=JSON.stringify(S)):S&&typeof S!="string"&&!(typeof Blob<"u"&&S instanceof Blob)&&!(S instanceof ArrayBuffer)&&!(typeof FormData<"u"&&S instanceof FormData)?B=JSON.stringify(S):B=S;let H=P;R&&(_=new AbortController,p=setTimeout(()=>_.abort(),R),P?(H=_.signal,P.addEventListener("abort",()=>_.abort())):H=_.signal);const Q=yield this.fetch(U.toString(),{method:v||"POST",headers:Object.assign(Object.assign(Object.assign({},N),this.headers),w),body:B,signal:H}).catch(Oe=>{throw new cm(Oe)}),Y=Q.headers.get("x-relay-error");if(Y&&Y==="true")throw new $d(Q);if(!Q.ok)throw new Fd(Q);let G=((h=Q.headers.get("Content-Type"))!==null&&h!==void 0?h:"text/plain").split(";")[0].trim(),ie;return G==="application/json"?ie=yield Q.json():G==="application/octet-stream"||G==="application/pdf"?ie=yield Q.blob():G==="text/event-stream"?ie=Q:G==="multipart/form-data"?ie=yield Q.formData():ie=yield Q.text(),{data:ie,error:null,response:Q}}catch(w){return{data:null,error:w,response:w instanceof Fd||w instanceof $d?w.context:void 0}}finally{p&&clearTimeout(p)}})}}var dm=class extends Error{constructor(a){super(a.message),this.name="PostgrestError",this.details=a.details,this.hint=a.hint,this.code=a.code}},fm=class{constructor(a){var r,s;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(r=a.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=a.signal,this.isMaybeSingle=(s=a.isMaybeSingle)!==null&&s!==void 0?s:!1,a.fetch?this.fetch=a.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,r){return this.headers=new Headers(this.headers),this.headers.set(a,r),this}then(a,r){var s=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const u=this.fetch;let h=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async p=>{let _=null,w=null,v=null,S=p.status,P=p.statusText;if(p.ok){var R,N;if(s.method!=="HEAD"){var M;const Q=await p.text();Q===""||(s.headers.get("Accept")==="text/csv"||s.headers.get("Accept")&&(!((M=s.headers.get("Accept"))===null||M===void 0)&&M.includes("application/vnd.pgrst.plan+text"))?w=Q:w=JSON.parse(Q))}const B=(R=s.headers.get("Prefer"))===null||R===void 0?void 0:R.match(/count=(exact|planned|estimated)/),H=(N=p.headers.get("content-range"))===null||N===void 0?void 0:N.split("/");B&&H&&H.length>1&&(v=parseInt(H[1])),s.isMaybeSingle&&s.method==="GET"&&Array.isArray(w)&&(w.length>1?(_={code:"PGRST116",details:`Results contain ${w.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},w=null,v=null,S=406,P="Not Acceptable"):w.length===1?w=w[0]:w=null)}else{var U;const B=await p.text();try{_=JSON.parse(B),Array.isArray(_)&&p.status===404&&(w=[],_=null,S=200,P="OK")}catch{p.status===404&&B===""?(S=204,P="No Content"):_={message:B}}if(_&&s.isMaybeSingle&&(!(_==null||(U=_.details)===null||U===void 0)&&U.includes("0 rows"))&&(_=null,S=200,P="OK"),_&&s.shouldThrowOnError)throw new dm(_)}return{error:_,data:w,count:v,status:S,statusText:P}});return this.shouldThrowOnError||(h=h.catch(p=>{var _;let w="";const v=p==null?void 0:p.cause;if(v){var S,P,R,N;const U=(S=v==null?void 0:v.message)!==null&&S!==void 0?S:"",B=(P=v==null?void 0:v.code)!==null&&P!==void 0?P:"";w=`${(R=p==null?void 0:p.name)!==null&&R!==void 0?R:"FetchError"}: ${p==null?void 0:p.message}`,w+=`

Caused by: ${(N=v==null?void 0:v.name)!==null&&N!==void 0?N:"Error"}: ${U}`,B&&(w+=` (${B})`),v!=null&&v.stack&&(w+=`
${v.stack}`)}else{var M;w=(M=p==null?void 0:p.stack)!==null&&M!==void 0?M:""}return{error:{message:`${(_=p==null?void 0:p.name)!==null&&_!==void 0?_:"FetchError"}: ${p==null?void 0:p.message}`,details:w,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),h.then(a,r)}returns(){return this}overrideTypes(){return this}},pm=class extends fm{select(a){let r=!1;const s=(a??"*").split("").map(u=>/\s/.test(u)&&!r?"":(u==='"'&&(r=!r),u)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:r=!0,nullsFirst:s,foreignTable:u,referencedTable:h=u}={}){const p=h?`${h}.order`:"order",_=this.url.searchParams.get(p);return this.url.searchParams.set(p,`${_?`${_},`:""}${a}.${r?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:r,referencedTable:s=r}={}){const u=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(u,`${a}`),this}range(a,r,{foreignTable:s,referencedTable:u=s}={}){const h=typeof u>"u"?"offset":`${u}.offset`,p=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(h,`${a}`),this.url.searchParams.set(p,`${r-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:r=!1,settings:s=!1,buffers:u=!1,wal:h=!1,format:p="text"}={}){var _;const w=[a?"analyze":null,r?"verbose":null,s?"settings":null,u?"buffers":null,h?"wal":null].filter(Boolean).join("|"),v=(_=this.headers.get("Accept"))!==null&&_!==void 0?_:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${p}; for="${v}"; options=${w};`),p==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}};const Wd=new RegExp("[,()]");var $s=class extends pm{eq(a,r){return this.url.searchParams.append(a,`eq.${r}`),this}neq(a,r){return this.url.searchParams.append(a,`neq.${r}`),this}gt(a,r){return this.url.searchParams.append(a,`gt.${r}`),this}gte(a,r){return this.url.searchParams.append(a,`gte.${r}`),this}lt(a,r){return this.url.searchParams.append(a,`lt.${r}`),this}lte(a,r){return this.url.searchParams.append(a,`lte.${r}`),this}like(a,r){return this.url.searchParams.append(a,`like.${r}`),this}likeAllOf(a,r){return this.url.searchParams.append(a,`like(all).{${r.join(",")}}`),this}likeAnyOf(a,r){return this.url.searchParams.append(a,`like(any).{${r.join(",")}}`),this}ilike(a,r){return this.url.searchParams.append(a,`ilike.${r}`),this}ilikeAllOf(a,r){return this.url.searchParams.append(a,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(a,r){return this.url.searchParams.append(a,`ilike(any).{${r.join(",")}}`),this}regexMatch(a,r){return this.url.searchParams.append(a,`match.${r}`),this}regexIMatch(a,r){return this.url.searchParams.append(a,`imatch.${r}`),this}is(a,r){return this.url.searchParams.append(a,`is.${r}`),this}isDistinct(a,r){return this.url.searchParams.append(a,`isdistinct.${r}`),this}in(a,r){const s=Array.from(new Set(r)).map(u=>typeof u=="string"&&Wd.test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(a,`in.(${s})`),this}notIn(a,r){const s=Array.from(new Set(r)).map(u=>typeof u=="string"&&Wd.test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(a,`not.in.(${s})`),this}contains(a,r){return typeof r=="string"?this.url.searchParams.append(a,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(a,`cs.{${r.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(r)}`),this}containedBy(a,r){return typeof r=="string"?this.url.searchParams.append(a,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(a,`cd.{${r.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(r)}`),this}rangeGt(a,r){return this.url.searchParams.append(a,`sr.${r}`),this}rangeGte(a,r){return this.url.searchParams.append(a,`nxl.${r}`),this}rangeLt(a,r){return this.url.searchParams.append(a,`sl.${r}`),this}rangeLte(a,r){return this.url.searchParams.append(a,`nxr.${r}`),this}rangeAdjacent(a,r){return this.url.searchParams.append(a,`adj.${r}`),this}overlaps(a,r){return typeof r=="string"?this.url.searchParams.append(a,`ov.${r}`):this.url.searchParams.append(a,`ov.{${r.join(",")}}`),this}textSearch(a,r,{config:s,type:u}={}){let h="";u==="plain"?h="pl":u==="phrase"?h="ph":u==="websearch"&&(h="w");const p=s===void 0?"":`(${s})`;return this.url.searchParams.append(a,`${h}fts${p}.${r}`),this}match(a){return Object.entries(a).forEach(([r,s])=>{this.url.searchParams.append(r,`eq.${s}`)}),this}not(a,r,s){return this.url.searchParams.append(a,`not.${r}.${s}`),this}or(a,{foreignTable:r,referencedTable:s=r}={}){const u=s?`${s}.or`:"or";return this.url.searchParams.append(u,`(${a})`),this}filter(a,r,s){return this.url.searchParams.append(a,`${r}.${s}`),this}},mm=class{constructor(a,{headers:r={},schema:s,fetch:u}){this.url=a,this.headers=new Headers(r),this.schema=s,this.fetch=u}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(a,r){const{head:s=!1,count:u}=r??{},h=s?"HEAD":"GET";let p=!1;const _=(a??"*").split("").map(S=>/\s/.test(S)&&!p?"":(S==='"'&&(p=!p),S)).join(""),{url:w,headers:v}=this.cloneRequestState();return w.searchParams.set("select",_),u&&v.append("Prefer",`count=${u}`),new $s({method:h,url:w,headers:v,schema:this.schema,fetch:this.fetch})}insert(a,{count:r,defaultToNull:s=!0}={}){var u;const h="POST",{url:p,headers:_}=this.cloneRequestState();if(r&&_.append("Prefer",`count=${r}`),s||_.append("Prefer","missing=default"),Array.isArray(a)){const w=a.reduce((v,S)=>v.concat(Object.keys(S)),[]);if(w.length>0){const v=[...new Set(w)].map(S=>`"${S}"`);p.searchParams.set("columns",v.join(","))}}return new $s({method:h,url:p,headers:_,schema:this.schema,body:a,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}upsert(a,{onConflict:r,ignoreDuplicates:s=!1,count:u,defaultToNull:h=!0}={}){var p;const _="POST",{url:w,headers:v}=this.cloneRequestState();if(v.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),r!==void 0&&w.searchParams.set("on_conflict",r),u&&v.append("Prefer",`count=${u}`),h||v.append("Prefer","missing=default"),Array.isArray(a)){const S=a.reduce((P,R)=>P.concat(Object.keys(R)),[]);if(S.length>0){const P=[...new Set(S)].map(R=>`"${R}"`);w.searchParams.set("columns",P.join(","))}}return new $s({method:_,url:w,headers:v,schema:this.schema,body:a,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}update(a,{count:r}={}){var s;const u="PATCH",{url:h,headers:p}=this.cloneRequestState();return r&&p.append("Prefer",`count=${r}`),new $s({method:u,url:h,headers:p,schema:this.schema,body:a,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}delete({count:a}={}){var r;const s="DELETE",{url:u,headers:h}=this.cloneRequestState();return a&&h.append("Prefer",`count=${a}`),new $s({method:s,url:u,headers:h,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}},_m=class yf{constructor(r,{headers:s={},schema:u,fetch:h}={}){this.url=r,this.headers=new Headers(s),this.schemaName=u,this.fetch=h}from(r){if(!r||typeof r!="string"||r.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new mm(new URL(`${this.url}/${r}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(r){return new yf(this.url,{headers:this.headers,schema:r,fetch:this.fetch})}rpc(r,s={},{head:u=!1,get:h=!1,count:p}={}){var _;let w;const v=new URL(`${this.url}/rpc/${r}`);let S;const P=M=>M!==null&&typeof M=="object"&&(!Array.isArray(M)||M.some(P)),R=u&&Object.values(s).some(P);R?(w="POST",S=s):u||h?(w=u?"HEAD":"GET",Object.entries(s).filter(([M,U])=>U!==void 0).map(([M,U])=>[M,Array.isArray(U)?`{${U.join(",")}}`:`${U}`]).forEach(([M,U])=>{v.searchParams.append(M,U)})):(w="POST",S=s);const N=new Headers(this.headers);return R?N.set("Prefer",p?`count=${p},return=minimal`:"return=minimal"):p&&N.set("Prefer",`count=${p}`),new $s({method:w,url:v,headers:N,schema:this.schemaName,body:S,fetch:(_=this.fetch)!==null&&_!==void 0?_:fetch})}};class gm{constructor(){}static detectEnvironment(){var r;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((r=navigator.userAgent)===null||r===void 0)&&r.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const s=globalThis.process;if(s){const u=s.versions;if(u&&u.node){const h=u.node,p=parseInt(h.replace(/^v/,"").split(".")[0]);return p>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${p} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${p} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const r=this.detectEnvironment();if(r.constructor)return r.constructor;let s=r.error||"WebSocket not supported in this environment.";throw r.workaround&&(s+=`

Suggested solution: ${r.workaround}`),new Error(s)}static createWebSocket(r,s){const u=this.getWebSocketConstructor();return new u(r,s)}static isWebSocketSupported(){try{const r=this.detectEnvironment();return r.type==="native"||r.type==="ws"}catch{return!1}}}const vm="2.91.1",ym=`realtime-js/${vm}`,wm="1.0.0",wf="2.0.0",Zd=wf,Oc=1e4,xm=1e3,Sm=100;var ri;(function(a){a[a.connecting=0]="connecting",a[a.open=1]="open",a[a.closing=2]="closing",a[a.closed=3]="closed"})(ri||(ri={}));var pt;(function(a){a.closed="closed",a.errored="errored",a.joined="joined",a.joining="joining",a.leaving="leaving"})(pt||(pt={}));var An;(function(a){a.close="phx_close",a.error="phx_error",a.join="phx_join",a.reply="phx_reply",a.leave="phx_leave",a.access_token="access_token"})(An||(An={}));var Rc;(function(a){a.websocket="websocket"})(Rc||(Rc={}));var Bi;(function(a){a.Connecting="connecting",a.Open="open",a.Closing="closing",a.Closed="closed"})(Bi||(Bi={}));class km{constructor(r){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=r??[]}encode(r,s){if(r.event===this.BROADCAST_EVENT&&!(r.payload instanceof ArrayBuffer)&&typeof r.payload.event=="string")return s(this._binaryEncodeUserBroadcastPush(r));let u=[r.join_ref,r.ref,r.topic,r.event,r.payload];return s(JSON.stringify(u))}_binaryEncodeUserBroadcastPush(r){var s;return this._isArrayBuffer((s=r.payload)===null||s===void 0?void 0:s.payload)?this._encodeBinaryUserBroadcastPush(r):this._encodeJsonUserBroadcastPush(r)}_encodeBinaryUserBroadcastPush(r){var s,u;const h=(u=(s=r.payload)===null||s===void 0?void 0:s.payload)!==null&&u!==void 0?u:new ArrayBuffer(0);return this._encodeUserBroadcastPush(r,this.BINARY_ENCODING,h)}_encodeJsonUserBroadcastPush(r){var s,u;const h=(u=(s=r.payload)===null||s===void 0?void 0:s.payload)!==null&&u!==void 0?u:{},_=new TextEncoder().encode(JSON.stringify(h)).buffer;return this._encodeUserBroadcastPush(r,this.JSON_ENCODING,_)}_encodeUserBroadcastPush(r,s,u){var h,p;const _=r.topic,w=(h=r.ref)!==null&&h!==void 0?h:"",v=(p=r.join_ref)!==null&&p!==void 0?p:"",S=r.payload.event,P=this.allowedMetadataKeys?this._pick(r.payload,this.allowedMetadataKeys):{},R=Object.keys(P).length===0?"":JSON.stringify(P);if(v.length>255)throw new Error(`joinRef length ${v.length} exceeds maximum of 255`);if(w.length>255)throw new Error(`ref length ${w.length} exceeds maximum of 255`);if(_.length>255)throw new Error(`topic length ${_.length} exceeds maximum of 255`);if(S.length>255)throw new Error(`userEvent length ${S.length} exceeds maximum of 255`);if(R.length>255)throw new Error(`metadata length ${R.length} exceeds maximum of 255`);const N=this.USER_BROADCAST_PUSH_META_LENGTH+v.length+w.length+_.length+S.length+R.length,M=new ArrayBuffer(this.HEADER_LENGTH+N);let U=new DataView(M),B=0;U.setUint8(B++,this.KINDS.userBroadcastPush),U.setUint8(B++,v.length),U.setUint8(B++,w.length),U.setUint8(B++,_.length),U.setUint8(B++,S.length),U.setUint8(B++,R.length),U.setUint8(B++,s),Array.from(v,Q=>U.setUint8(B++,Q.charCodeAt(0))),Array.from(w,Q=>U.setUint8(B++,Q.charCodeAt(0))),Array.from(_,Q=>U.setUint8(B++,Q.charCodeAt(0))),Array.from(S,Q=>U.setUint8(B++,Q.charCodeAt(0))),Array.from(R,Q=>U.setUint8(B++,Q.charCodeAt(0)));var H=new Uint8Array(M.byteLength+u.byteLength);return H.set(new Uint8Array(M),0),H.set(new Uint8Array(u),M.byteLength),H.buffer}decode(r,s){if(this._isArrayBuffer(r)){let u=this._binaryDecode(r);return s(u)}if(typeof r=="string"){const u=JSON.parse(r),[h,p,_,w,v]=u;return s({join_ref:h,ref:p,topic:_,event:w,payload:v})}return s({})}_binaryDecode(r){const s=new DataView(r),u=s.getUint8(0),h=new TextDecoder;switch(u){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(r,s,h)}}_decodeUserBroadcast(r,s,u){const h=s.getUint8(1),p=s.getUint8(2),_=s.getUint8(3),w=s.getUint8(4);let v=this.HEADER_LENGTH+4;const S=u.decode(r.slice(v,v+h));v=v+h;const P=u.decode(r.slice(v,v+p));v=v+p;const R=u.decode(r.slice(v,v+_));v=v+_;const N=r.slice(v,r.byteLength),M=w===this.JSON_ENCODING?JSON.parse(u.decode(N)):N,U={type:this.BROADCAST_EVENT,event:P,payload:M};return _>0&&(U.meta=JSON.parse(R)),{join_ref:null,ref:null,topic:S,event:this.BROADCAST_EVENT,payload:U}}_isArrayBuffer(r){var s;return r instanceof ArrayBuffer||((s=r==null?void 0:r.constructor)===null||s===void 0?void 0:s.name)==="ArrayBuffer"}_pick(r,s){return!r||typeof r!="object"?{}:Object.fromEntries(Object.entries(r).filter(([u])=>s.includes(u)))}}class xf{constructor(r,s){this.callback=r,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=r,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ve;(function(a){a.abstime="abstime",a.bool="bool",a.date="date",a.daterange="daterange",a.float4="float4",a.float8="float8",a.int2="int2",a.int4="int4",a.int4range="int4range",a.int8="int8",a.int8range="int8range",a.json="json",a.jsonb="jsonb",a.money="money",a.numeric="numeric",a.oid="oid",a.reltime="reltime",a.text="text",a.time="time",a.timestamp="timestamp",a.timestamptz="timestamptz",a.timetz="timetz",a.tsrange="tsrange",a.tstzrange="tstzrange"})(Ve||(Ve={}));const Hd=(a,r,s={})=>{var u;const h=(u=s.skipTypes)!==null&&u!==void 0?u:[];return r?Object.keys(r).reduce((p,_)=>(p[_]=bm(_,a,r,h),p),{}):{}},bm=(a,r,s,u)=>{const h=r.find(w=>w.name===a),p=h==null?void 0:h.type,_=s[a];return p&&!u.includes(p)?Sf(p,_):Ac(_)},Sf=(a,r)=>{if(a.charAt(0)==="_"){const s=a.slice(1,a.length);return Cm(r,s)}switch(a){case Ve.bool:return Em(r);case Ve.float4:case Ve.float8:case Ve.int2:case Ve.int4:case Ve.int8:case Ve.numeric:case Ve.oid:return Tm(r);case Ve.json:case Ve.jsonb:return Pm(r);case Ve.timestamp:return Lm(r);case Ve.abstime:case Ve.date:case Ve.daterange:case Ve.int4range:case Ve.int8range:case Ve.money:case Ve.reltime:case Ve.text:case Ve.time:case Ve.timestamptz:case Ve.timetz:case Ve.tsrange:case Ve.tstzrange:return Ac(r);default:return Ac(r)}},Ac=a=>a,Em=a=>{switch(a){case"t":return!0;case"f":return!1;default:return a}},Tm=a=>{if(typeof a=="string"){const r=parseFloat(a);if(!Number.isNaN(r))return r}return a},Pm=a=>{if(typeof a=="string")try{return JSON.parse(a)}catch{return a}return a},Cm=(a,r)=>{if(typeof a!="string")return a;const s=a.length-1,u=a[s];if(a[0]==="{"&&u==="}"){let p;const _=a.slice(1,s);try{p=JSON.parse("["+_+"]")}catch{p=_?_.split(","):[]}return p.map(w=>Sf(r,w))}return a},Lm=a=>typeof a=="string"?a.replace(" ","T"):a,kf=a=>{const r=new URL(a);return r.protocol=r.protocol.replace(/^ws/i,"http"),r.pathname=r.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),r.pathname===""||r.pathname==="/"?r.pathname="/api/broadcast":r.pathname=r.pathname+"/api/broadcast",r.href};class vc{constructor(r,s,u={},h=Oc){this.channel=r,this.event=s,this.payload=u,this.timeout=h,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(r){this.timeout=r,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(r){this.payload=Object.assign(Object.assign({},this.payload),r)}receive(r,s){var u;return this._hasReceived(r)&&s((u=this.receivedResp)===null||u===void 0?void 0:u.response),this.recHooks.push({status:r,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const r=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},r),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(r,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:r,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:r,response:s}){this.recHooks.filter(u=>u.status===r).forEach(u=>u.callback(s))}_hasReceived(r){return this.receivedResp&&this.receivedResp.status===r}}var Vd;(function(a){a.SYNC="sync",a.JOIN="join",a.LEAVE="leave"})(Vd||(Vd={}));class Yo{constructor(r,s){this.channel=r,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const u=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(u.state,{},h=>{const{onJoin:p,onLeave:_,onSync:w}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Yo.syncState(this.state,h,p,_),this.pendingDiffs.forEach(v=>{this.state=Yo.syncDiff(this.state,v,p,_)}),this.pendingDiffs=[],w()}),this.channel._on(u.diff,{},h=>{const{onJoin:p,onLeave:_,onSync:w}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(h):(this.state=Yo.syncDiff(this.state,h,p,_),w())}),this.onJoin((h,p,_)=>{this.channel._trigger("presence",{event:"join",key:h,currentPresences:p,newPresences:_})}),this.onLeave((h,p,_)=>{this.channel._trigger("presence",{event:"leave",key:h,currentPresences:p,leftPresences:_})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(r,s,u,h){const p=this.cloneDeep(r),_=this.transformState(s),w={},v={};return this.map(p,(S,P)=>{_[S]||(v[S]=P)}),this.map(_,(S,P)=>{const R=p[S];if(R){const N=P.map(H=>H.presence_ref),M=R.map(H=>H.presence_ref),U=P.filter(H=>M.indexOf(H.presence_ref)<0),B=R.filter(H=>N.indexOf(H.presence_ref)<0);U.length>0&&(w[S]=U),B.length>0&&(v[S]=B)}else w[S]=P}),this.syncDiff(p,{joins:w,leaves:v},u,h)}static syncDiff(r,s,u,h){const{joins:p,leaves:_}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return u||(u=()=>{}),h||(h=()=>{}),this.map(p,(w,v)=>{var S;const P=(S=r[w])!==null&&S!==void 0?S:[];if(r[w]=this.cloneDeep(v),P.length>0){const R=r[w].map(M=>M.presence_ref),N=P.filter(M=>R.indexOf(M.presence_ref)<0);r[w].unshift(...N)}u(w,P,v)}),this.map(_,(w,v)=>{let S=r[w];if(!S)return;const P=v.map(R=>R.presence_ref);S=S.filter(R=>P.indexOf(R.presence_ref)<0),r[w]=S,h(w,S,v),S.length===0&&delete r[w]}),r}static map(r,s){return Object.getOwnPropertyNames(r).map(u=>s(u,r[u]))}static transformState(r){return r=this.cloneDeep(r),Object.getOwnPropertyNames(r).reduce((s,u)=>{const h=r[u];return"metas"in h?s[u]=h.metas.map(p=>(p.presence_ref=p.phx_ref,delete p.phx_ref,delete p.phx_ref_prev,p)):s[u]=h,s},{})}static cloneDeep(r){return JSON.parse(JSON.stringify(r))}onJoin(r){this.caller.onJoin=r}onLeave(r){this.caller.onLeave=r}onSync(r){this.caller.onSync=r}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var qd;(function(a){a.ALL="*",a.INSERT="INSERT",a.UPDATE="UPDATE",a.DELETE="DELETE"})(qd||(qd={}));var Qo;(function(a){a.BROADCAST="broadcast",a.PRESENCE="presence",a.POSTGRES_CHANGES="postgres_changes",a.SYSTEM="system"})(Qo||(Qo={}));var _r;(function(a){a.SUBSCRIBED="SUBSCRIBED",a.TIMED_OUT="TIMED_OUT",a.CLOSED="CLOSED",a.CHANNEL_ERROR="CHANNEL_ERROR"})(_r||(_r={}));class Zs{constructor(r,s={config:{}},u){var h,p;if(this.topic=r,this.params=s,this.socket=u,this.bindings={},this.state=pt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=r.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new vc(this,An.join,this.params,this.timeout),this.rejoinTimer=new xf(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=pt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(_=>_.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=pt.closed,this.socket._remove(this)}),this._onError(_=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,_),this.state=pt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=pt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",_=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,_),this.state=pt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(An.reply,{},(_,w)=>{this._trigger(this._replyEventName(w),_)}),this.presence=new Yo(this),this.broadcastEndpointURL=kf(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((p=(h=this.params.config)===null||h===void 0?void 0:h.broadcast)===null||p===void 0)&&p.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(r,s=this.timeout){var u,h,p;if(this.socket.isConnected()||this.socket.connect(),this.state==pt.closed){const{config:{broadcast:_,presence:w,private:v}}=this.params,S=(h=(u=this.bindings.postgres_changes)===null||u===void 0?void 0:u.map(M=>M.filter))!==null&&h!==void 0?h:[],P=!!this.bindings[Qo.PRESENCE]&&this.bindings[Qo.PRESENCE].length>0||((p=this.params.config.presence)===null||p===void 0?void 0:p.enabled)===!0,R={},N={broadcast:_,presence:Object.assign(Object.assign({},w),{enabled:P}),postgres_changes:S,private:v};this.socket.accessTokenValue&&(R.access_token=this.socket.accessTokenValue),this._onError(M=>r==null?void 0:r(_r.CHANNEL_ERROR,M)),this._onClose(()=>r==null?void 0:r(_r.CLOSED)),this.updateJoinPayload(Object.assign({config:N},R)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:M})=>{var U;if(this.socket._isManualToken()||this.socket.setAuth(),M===void 0){r==null||r(_r.SUBSCRIBED);return}else{const B=this.bindings.postgres_changes,H=(U=B==null?void 0:B.length)!==null&&U!==void 0?U:0,Q=[];for(let Y=0;Y<H;Y++){const G=B[Y],{filter:{event:ie,schema:Oe,table:he,filter:ke}}=G,Fe=M&&M[Y];if(Fe&&Fe.event===ie&&Zs.isFilterValueEqual(Fe.schema,Oe)&&Zs.isFilterValueEqual(Fe.table,he)&&Zs.isFilterValueEqual(Fe.filter,ke))Q.push(Object.assign(Object.assign({},G),{id:Fe.id}));else{this.unsubscribe(),this.state=pt.errored,r==null||r(_r.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=Q,r&&r(_r.SUBSCRIBED);return}}).receive("error",M=>{this.state=pt.errored,r==null||r(_r.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(M).join(", ")||"error")))}).receive("timeout",()=>{r==null||r(_r.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(r,s={}){return await this.send({type:"presence",event:"track",payload:r},s.timeout||this.timeout)}async untrack(r={}){return await this.send({type:"presence",event:"untrack"},r)}on(r,s,u){return this.state===pt.joined&&r===Qo.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(r,s,u)}async httpSend(r,s,u={}){var h;if(s==null)return Promise.reject("Payload is required for httpSend()");const p={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(p.Authorization=`Bearer ${this.socket.accessTokenValue}`);const _={method:"POST",headers:p,body:JSON.stringify({messages:[{topic:this.subTopic,event:r,payload:s,private:this.private}]})},w=await this._fetchWithTimeout(this.broadcastEndpointURL,_,(h=u.timeout)!==null&&h!==void 0?h:this.timeout);if(w.status===202)return{success:!0};let v=w.statusText;try{const S=await w.json();v=S.error||S.message||v}catch{}return Promise.reject(new Error(v))}async send(r,s={}){var u,h;if(!this._canPush()&&r.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:p,payload:_}=r,w={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(w.Authorization=`Bearer ${this.socket.accessTokenValue}`);const v={method:"POST",headers:w,body:JSON.stringify({messages:[{topic:this.subTopic,event:p,payload:_,private:this.private}]})};try{const S=await this._fetchWithTimeout(this.broadcastEndpointURL,v,(u=s.timeout)!==null&&u!==void 0?u:this.timeout);return await((h=S.body)===null||h===void 0?void 0:h.cancel()),S.ok?"ok":"error"}catch(S){return S.name==="AbortError"?"timed out":"error"}}else return new Promise(p=>{var _,w,v;const S=this._push(r.type,r,s.timeout||this.timeout);r.type==="broadcast"&&!(!((v=(w=(_=this.params)===null||_===void 0?void 0:_.config)===null||w===void 0?void 0:w.broadcast)===null||v===void 0)&&v.ack)&&p("ok"),S.receive("ok",()=>p("ok")),S.receive("error",()=>p("error")),S.receive("timeout",()=>p("timed out"))})}updateJoinPayload(r){this.joinPush.updatePayload(r)}unsubscribe(r=this.timeout){this.state=pt.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(An.close,"leave",this._joinRef())};this.joinPush.destroy();let u=null;return new Promise(h=>{u=new vc(this,An.leave,{},r),u.receive("ok",()=>{s(),h("ok")}).receive("timeout",()=>{s(),h("timed out")}).receive("error",()=>{h("error")}),u.send(),this._canPush()||u.trigger("ok",{})}).finally(()=>{u==null||u.destroy()})}teardown(){this.pushBuffer.forEach(r=>r.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=pt.closed,this.bindings={}}async _fetchWithTimeout(r,s,u){const h=new AbortController,p=setTimeout(()=>h.abort(),u),_=await this.socket.fetch(r,Object.assign(Object.assign({},s),{signal:h.signal}));return clearTimeout(p),_}_push(r,s,u=this.timeout){if(!this.joinedOnce)throw`tried to push '${r}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let h=new vc(this,r,s,u);return this._canPush()?h.send():this._addToPushBuffer(h),h}_addToPushBuffer(r){if(r.startTimeout(),this.pushBuffer.push(r),this.pushBuffer.length>Sm){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(r,s,u){return s}_isMember(r){return this.topic===r}_joinRef(){return this.joinPush.ref}_trigger(r,s,u){var h,p;const _=r.toLocaleLowerCase(),{close:w,error:v,leave:S,join:P}=An;if(u&&[w,v,S,P].indexOf(_)>=0&&u!==this._joinRef())return;let N=this._onMessage(_,s,u);if(s&&!N)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(_)?(h=this.bindings.postgres_changes)===null||h===void 0||h.filter(M=>{var U,B,H;return((U=M.filter)===null||U===void 0?void 0:U.event)==="*"||((H=(B=M.filter)===null||B===void 0?void 0:B.event)===null||H===void 0?void 0:H.toLocaleLowerCase())===_}).map(M=>M.callback(N,u)):(p=this.bindings[_])===null||p===void 0||p.filter(M=>{var U,B,H,Q,Y,G,ie,Oe;if(["broadcast","presence","postgres_changes"].includes(_))if("id"in M){const he=M.id,ke=(U=M.filter)===null||U===void 0?void 0:U.event;return he&&((B=s.ids)===null||B===void 0?void 0:B.includes(he))&&(ke==="*"||(ke==null?void 0:ke.toLocaleLowerCase())===((H=s.data)===null||H===void 0?void 0:H.type.toLocaleLowerCase()))&&(!(!((Q=M.filter)===null||Q===void 0)&&Q.table)||M.filter.table===((Y=s.data)===null||Y===void 0?void 0:Y.table))}else{const he=(ie=(G=M==null?void 0:M.filter)===null||G===void 0?void 0:G.event)===null||ie===void 0?void 0:ie.toLocaleLowerCase();return he==="*"||he===((Oe=s==null?void 0:s.event)===null||Oe===void 0?void 0:Oe.toLocaleLowerCase())}else return M.type.toLocaleLowerCase()===_}).map(M=>{if(typeof N=="object"&&"ids"in N){const U=N.data,{schema:B,table:H,commit_timestamp:Q,type:Y,errors:G}=U;N=Object.assign(Object.assign({},{schema:B,table:H,commit_timestamp:Q,eventType:Y,new:{},old:{},errors:G}),this._getPayloadRecords(U))}M.callback(N,u)})}_isClosed(){return this.state===pt.closed}_isJoined(){return this.state===pt.joined}_isJoining(){return this.state===pt.joining}_isLeaving(){return this.state===pt.leaving}_replyEventName(r){return`chan_reply_${r}`}_on(r,s,u){const h=r.toLocaleLowerCase(),p={type:h,filter:s,callback:u};return this.bindings[h]?this.bindings[h].push(p):this.bindings[h]=[p],this}_off(r,s){const u=r.toLocaleLowerCase();return this.bindings[u]&&(this.bindings[u]=this.bindings[u].filter(h=>{var p;return!(((p=h.type)===null||p===void 0?void 0:p.toLocaleLowerCase())===u&&Zs.isEqual(h.filter,s))})),this}static isEqual(r,s){if(Object.keys(r).length!==Object.keys(s).length)return!1;for(const u in r)if(r[u]!==s[u])return!1;return!0}static isFilterValueEqual(r,s){return(r??void 0)===(s??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(r){this._on(An.close,{},r)}_onError(r){this._on(An.error,{},s=>r(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(r=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=pt.joining,this.joinPush.resend(r))}_getPayloadRecords(r){const s={new:{},old:{}};return(r.type==="INSERT"||r.type==="UPDATE")&&(s.new=Hd(r.columns,r.record)),(r.type==="UPDATE"||r.type==="DELETE")&&(s.old=Hd(r.columns,r.old_record)),s}}const yc=()=>{},Rl={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Om=[1e3,2e3,5e3,1e4],Rm=1e4,Am=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Nm{constructor(r,s){var u;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Oc,this.transport=null,this.heartbeatIntervalMs=Rl.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=yc,this.ref=0,this.reconnectTimer=null,this.vsn=Zd,this.logger=yc,this.conn=null,this.sendBuffer=[],this.serializer=new km,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=h=>h?(...p)=>h(...p):(...p)=>fetch(...p),!(!((u=s==null?void 0:s.params)===null||u===void 0)&&u.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${r}/${Rc.websocket}`,this.httpEndpoint=kf(r),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s==null?void 0:s.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=gm.createWebSocket(this.endpointURL())}catch(r){this._setConnectionState("disconnected");const s=r.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(r,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const u=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(u),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(r?this.conn.close(r,s??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(r){const s=await r.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const r=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),r}log(r,s,u){this.logger(r,s,u)}connectionState(){switch(this.conn&&this.conn.readyState){case ri.connecting:return Bi.Connecting;case ri.open:return Bi.Open;case ri.closing:return Bi.Closing;default:return Bi.Closed}}isConnected(){return this.connectionState()===Bi.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(r,s={config:{}}){const u=`realtime:${r}`,h=this.getChannels().find(p=>p.topic===u);if(h)return h;{const p=new Zs(`realtime:${r}`,s,this);return this.channels.push(p),p}}push(r){const{topic:s,event:u,payload:h,ref:p}=r,_=()=>{this.encode(r,w=>{var v;(v=this.conn)===null||v===void 0||v.send(w)})};this.log("push",`${s} ${u} (${p})`,h),this.isConnected()?_():this.sendBuffer.push(_)}async setAuth(r=null){this._authPromise=this._performAuth(r);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var r;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(s){this.log("error","error in heartbeat callback",s)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(s){this.log("error","error in heartbeat callback",s)}this._wasManualDisconnect=!1,(r=this.conn)===null||r===void 0||r.close(xm,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},Rl.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(s){this.log("error","error in heartbeat callback",s)}this._setAuthSafely("heartbeat")}onHeartbeat(r){this.heartbeatCallback=r}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(r=>r()),this.sendBuffer=[])}_makeRef(){let r=this.ref+1;return r===this.ref?this.ref=0:this.ref=r,this.ref.toString()}_leaveOpenTopic(r){let s=this.channels.find(u=>u.topic===r&&(u._isJoined()||u._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${r}"`),s.unsubscribe())}_remove(r){this.channels=this.channels.filter(s=>s.topic!==r.topic)}_onConnMessage(r){this.decode(r.data,s=>{if(s.topic==="phoenix"&&s.event==="phx_reply"&&s.ref&&s.ref===this.pendingHeartbeatRef){const S=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(s.payload.status==="ok"?"ok":"error",S)}catch(P){this.log("error","error in heartbeat callback",P)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:u,event:h,payload:p,ref:_}=s,w=_?`(${_})`:"",v=p.status||"";this.log("receive",`${v} ${u} ${h} ${w}`.trim(),p),this.channels.filter(S=>S._isMember(u)).forEach(S=>S._trigger(h,p,_)),this._triggerStateCallbacks("message",s)})}_clearTimer(r){var s;r==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):r==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=r=>this._onConnError(r),this.conn.onmessage=r=>this._onConnMessage(r),this.conn.onclose=r=>this._onConnClose(r),this.conn.readyState===ri.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===ri.open||this.conn.readyState===ri.connecting)try{this.conn.close()}catch(r){this.log("error","Error closing connection",r)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(r=>r.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(s=>{this.log("error","error waiting for auth on connect",s),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const r=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(r),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this._terminateWorker()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(r){var s;this._setConnectionState("disconnected"),this.log("transport","close",r),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",r)}_onConnError(r){this._setConnectionState("disconnected"),this.log("transport",`${r}`),this._triggerChanError(),this._triggerStateCallbacks("error",r)}_triggerChanError(){this.channels.forEach(r=>r._trigger(An.error))}_appendParams(r,s){if(Object.keys(s).length===0)return r;const u=r.match(/\?/)?"&":"?",h=new URLSearchParams(s);return`${r}${u}${h}`}_workerObjectUrl(r){let s;if(r)s=r;else{const u=new Blob([Am],{type:"application/javascript"});s=URL.createObjectURL(u)}return s}_setConnectionState(r,s=!1){this._connectionState=r,r==="connecting"?this._wasManualDisconnect=!1:r==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(r=null){let s,u=!1;if(r)s=r,u=!0;else if(this.accessToken)try{s=await this.accessToken()}catch(h){this.log("error","Error fetching access token from callback",h),s=this.accessTokenValue}else s=this.accessTokenValue;u?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(h=>{const p={access_token:s,version:ym};s&&h.updateJoinPayload(p),h.joinedOnce&&h._isJoined()&&h._push(An.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(r="general"){this._isManualToken()||this.setAuth().catch(s=>{this.log("error",`Error setting auth in ${r}`,s)})}_triggerStateCallbacks(r,s){try{this.stateChangeCallbacks[r].forEach(u=>{try{u(s)}catch(h){this.log("error",`error in ${r} callback`,h)}})}catch(u){this.log("error",`error triggering ${r} callbacks`,u)}}_setupReconnectionTimer(){this.reconnectTimer=new xf(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Rl.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(r){var s,u,h,p,_,w,v,S,P,R,N,M;switch(this.transport=(s=r==null?void 0:r.transport)!==null&&s!==void 0?s:null,this.timeout=(u=r==null?void 0:r.timeout)!==null&&u!==void 0?u:Oc,this.heartbeatIntervalMs=(h=r==null?void 0:r.heartbeatIntervalMs)!==null&&h!==void 0?h:Rl.HEARTBEAT_INTERVAL,this.worker=(p=r==null?void 0:r.worker)!==null&&p!==void 0?p:!1,this.accessToken=(_=r==null?void 0:r.accessToken)!==null&&_!==void 0?_:null,this.heartbeatCallback=(w=r==null?void 0:r.heartbeatCallback)!==null&&w!==void 0?w:yc,this.vsn=(v=r==null?void 0:r.vsn)!==null&&v!==void 0?v:Zd,r!=null&&r.params&&(this.params=r.params),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(S=r==null?void 0:r.reconnectAfterMs)!==null&&S!==void 0?S:(U=>Om[U-1]||Rm),this.vsn){case wm:this.encode=(P=r==null?void 0:r.encode)!==null&&P!==void 0?P:((U,B)=>B(JSON.stringify(U))),this.decode=(R=r==null?void 0:r.decode)!==null&&R!==void 0?R:((U,B)=>B(JSON.parse(U)));break;case wf:this.encode=(N=r==null?void 0:r.encode)!==null&&N!==void 0?N:this.serializer.encode.bind(this.serializer),this.decode=(M=r==null?void 0:r.decode)!==null&&M!==void 0?M:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=r==null?void 0:r.workerUrl}}}var ea=class extends Error{constructor(a,r){var s;super(a),this.name="IcebergError",this.status=r.status,this.icebergType=r.icebergType,this.icebergCode=r.icebergCode,this.details=r.details,this.isCommitStateUnknown=r.icebergType==="CommitStateUnknownException"||[500,502,504].includes(r.status)&&((s=r.icebergType)==null?void 0:s.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Im(a,r,s){const u=new URL(r,a);if(s)for(const[h,p]of Object.entries(s))p!==void 0&&u.searchParams.set(h,p);return u.toString()}async function jm(a){return!a||a.type==="none"?{}:a.type==="bearer"?{Authorization:`Bearer ${a.token}`}:a.type==="header"?{[a.name]:a.value}:a.type==="custom"?await a.getHeaders():{}}function Mm(a){const r=a.fetchImpl??globalThis.fetch;return{async request({method:s,path:u,query:h,body:p,headers:_}){const w=Im(a.baseUrl,u,h),v=await jm(a.auth),S=await r(w,{method:s,headers:{...p?{"Content-Type":"application/json"}:{},...v,..._},body:p?JSON.stringify(p):void 0}),P=await S.text(),R=(S.headers.get("content-type")||"").includes("application/json"),N=R&&P?JSON.parse(P):P;if(!S.ok){const M=R?N:void 0,U=M==null?void 0:M.error;throw new ea((U==null?void 0:U.message)??`Request failed with status ${S.status}`,{status:S.status,icebergType:U==null?void 0:U.type,icebergCode:U==null?void 0:U.code,details:M})}return{status:S.status,headers:S.headers,data:N}}}}function Al(a){return a.join("")}var zm=class{constructor(a,r=""){this.client=a,this.prefix=r}async listNamespaces(a){const r=a?{parent:Al(a.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:r})).data.namespaces.map(u=>({namespace:u}))}async createNamespace(a,r){const s={namespace:a.namespace,properties:r==null?void 0:r.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:s})).data}async dropNamespace(a){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Al(a.namespace)}`})}async loadNamespaceMetadata(a){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Al(a.namespace)}`})).data.properties}}async namespaceExists(a){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Al(a.namespace)}`}),!0}catch(r){if(r instanceof ea&&r.status===404)return!1;throw r}}async createNamespaceIfNotExists(a,r){try{return await this.createNamespace(a,r)}catch(s){if(s instanceof ea&&s.status===409)return;throw s}}};function js(a){return a.join("")}var Dm=class{constructor(a,r="",s){this.client=a,this.prefix=r,this.accessDelegation=s}async listTables(a){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${js(a.namespace)}/tables`})).data.identifiers}async createTable(a,r){const s={};return this.accessDelegation&&(s["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${js(a.namespace)}/tables`,body:r,headers:s})).data.metadata}async updateTable(a,r){const s=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${js(a.namespace)}/tables/${a.name}`,body:r});return{"metadata-location":s.data["metadata-location"],metadata:s.data.metadata}}async dropTable(a,r){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${js(a.namespace)}/tables/${a.name}`,query:{purgeRequested:String((r==null?void 0:r.purge)??!1)}})}async loadTable(a){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${js(a.namespace)}/tables/${a.name}`,headers:r})).data.metadata}async tableExists(a){const r={};this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${js(a.namespace)}/tables/${a.name}`,headers:r}),!0}catch(s){if(s instanceof ea&&s.status===404)return!1;throw s}}async createTableIfNotExists(a,r){try{return await this.createTable(a,r)}catch(s){if(s instanceof ea&&s.status===409)return await this.loadTable({namespace:a.namespace,name:r.name});throw s}}},Bm=class{constructor(a){var u;let r="v1";a.catalogName&&(r+=`/${a.catalogName}`);const s=a.baseUrl.endsWith("/")?a.baseUrl:`${a.baseUrl}/`;this.client=Mm({baseUrl:s,auth:a.auth,fetchImpl:a.fetch}),this.accessDelegation=(u=a.accessDelegation)==null?void 0:u.join(","),this.namespaceOps=new zm(this.client,r),this.tableOps=new Dm(this.client,r,this.accessDelegation)}async listNamespaces(a){return this.namespaceOps.listNamespaces(a)}async createNamespace(a,r){return this.namespaceOps.createNamespace(a,r)}async dropNamespace(a){await this.namespaceOps.dropNamespace(a)}async loadNamespaceMetadata(a){return this.namespaceOps.loadNamespaceMetadata(a)}async listTables(a){return this.tableOps.listTables(a)}async createTable(a,r){return this.tableOps.createTable(a,r)}async updateTable(a,r){return this.tableOps.updateTable(a,r)}async dropTable(a,r){await this.tableOps.dropTable(a,r)}async loadTable(a){return this.tableOps.loadTable(a)}async namespaceExists(a){return this.namespaceOps.namespaceExists(a)}async tableExists(a){return this.tableOps.tableExists(a)}async createNamespaceIfNotExists(a,r){return this.namespaceOps.createNamespaceIfNotExists(a,r)}async createTableIfNotExists(a,r){return this.tableOps.createTableIfNotExists(a,r)}},$l=class extends Error{constructor(a){super(a),this.__isStorageError=!0,this.name="StorageError"}};function tt(a){return typeof a=="object"&&a!==null&&"__isStorageError"in a}var Um=class extends $l{constructor(a,r,s){super(a),this.name="StorageApiError",this.status=r,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Nc=class extends $l{constructor(a,r){super(a),this.name="StorageUnknownError",this.originalError=r}};const qc=a=>a?(...r)=>a(...r):(...r)=>fetch(...r),$m=()=>Response,Ic=a=>{if(Array.isArray(a))return a.map(s=>Ic(s));if(typeof a=="function"||a!==Object(a))return a;const r={};return Object.entries(a).forEach(([s,u])=>{const h=s.replace(/([-_][a-z])/gi,p=>p.toUpperCase().replace(/[-_]/g,""));r[h]=Ic(u)}),r},Fm=a=>{if(typeof a!="object"||a===null)return!1;const r=Object.getPrototypeOf(a);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in a)&&!(Symbol.iterator in a)},Wm=a=>!a||typeof a!="string"||a.length===0||a.length>100||a.trim()!==a||a.includes("/")||a.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(a);function ta(a){"@babel/helpers - typeof";return ta=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ta(a)}function Zm(a,r){if(ta(a)!="object"||!a)return a;var s=a[Symbol.toPrimitive];if(s!==void 0){var u=s.call(a,r);if(ta(u)!="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(a)}function Hm(a){var r=Zm(a,"string");return ta(r)=="symbol"?r:r+""}function Vm(a,r,s){return(r=Hm(r))in a?Object.defineProperty(a,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[r]=s,a}function Kd(a,r){var s=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);r&&(u=u.filter(function(h){return Object.getOwnPropertyDescriptor(a,h).enumerable})),s.push.apply(s,u)}return s}function ye(a){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?Kd(Object(s),!0).forEach(function(u){Vm(a,u,s[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(s)):Kd(Object(s)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(s,u))})}return a}const wc=a=>{var r;return a.msg||a.message||a.error_description||(typeof a.error=="string"?a.error:(r=a.error)===null||r===void 0?void 0:r.message)||JSON.stringify(a)},qm=async(a,r,s)=>{a instanceof await $m()&&!(s!=null&&s.noResolveJson)?a.json().then(u=>{const h=a.status||500,p=(u==null?void 0:u.statusCode)||h+"";r(new Um(wc(u),h,p))}).catch(u=>{r(new Nc(wc(u),u))}):r(new Nc(wc(a),a))},Km=(a,r,s,u)=>{const h={method:a,headers:(r==null?void 0:r.headers)||{}};return a==="GET"||!u?h:(Fm(u)?(h.headers=ye({"Content-Type":"application/json"},r==null?void 0:r.headers),h.body=JSON.stringify(u)):h.body=u,r!=null&&r.duplex&&(h.duplex=r.duplex),ye(ye({},h),s))};async function aa(a,r,s,u,h,p){return new Promise((_,w)=>{a(s,Km(r,u,h,p)).then(v=>{if(!v.ok)throw v;return u!=null&&u.noResolveJson?v:v.json()}).then(v=>_(v)).catch(v=>qm(v,w,u))})}async function na(a,r,s,u){return aa(a,"GET",r,s,u)}async function Rn(a,r,s,u,h){return aa(a,"POST",r,u,h,s)}async function jc(a,r,s,u,h){return aa(a,"PUT",r,u,h,s)}async function Gm(a,r,s,u){return aa(a,"HEAD",r,ye(ye({},s),{},{noResolveJson:!0}),u)}async function Kc(a,r,s,u,h){return aa(a,"DELETE",r,u,h,s)}var Jm=class{constructor(a,r){this.downloadFn=a,this.shouldThrowOnError=r}then(a,r){return this.execute().then(a,r)}async execute(){var a=this;try{return{data:(await a.downloadFn()).body,error:null}}catch(r){if(a.shouldThrowOnError)throw r;if(tt(r))return{data:null,error:r};throw r}}};let bf;bf=Symbol.toStringTag;var Ym=class{constructor(a,r){this.downloadFn=a,this.shouldThrowOnError=r,this[bf]="BlobDownloadBuilder",this.promise=null}asStream(){return new Jm(this.downloadFn,this.shouldThrowOnError)}then(a,r){return this.getPromise().then(a,r)}catch(a){return this.getPromise().catch(a)}finally(a){return this.getPromise().finally(a)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var a=this;try{return{data:await(await a.downloadFn()).blob(),error:null}}catch(r){if(a.shouldThrowOnError)throw r;if(tt(r))return{data:null,error:r};throw r}}};const Qm={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Gd={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Xm=class{constructor(a,r={},s,u){this.shouldThrowOnError=!1,this.url=a,this.headers=r,this.bucketId=s,this.fetch=qc(u)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(a,r,s,u){var h=this;try{let p;const _=ye(ye({},Gd),u);let w=ye(ye({},h.headers),a==="POST"&&{"x-upsert":String(_.upsert)});const v=_.metadata;typeof Blob<"u"&&s instanceof Blob?(p=new FormData,p.append("cacheControl",_.cacheControl),v&&p.append("metadata",h.encodeMetadata(v)),p.append("",s)):typeof FormData<"u"&&s instanceof FormData?(p=s,p.has("cacheControl")||p.append("cacheControl",_.cacheControl),v&&!p.has("metadata")&&p.append("metadata",h.encodeMetadata(v))):(p=s,w["cache-control"]=`max-age=${_.cacheControl}`,w["content-type"]=_.contentType,v&&(w["x-metadata"]=h.toBase64(h.encodeMetadata(v))),(typeof ReadableStream<"u"&&p instanceof ReadableStream||p&&typeof p=="object"&&"pipe"in p&&typeof p.pipe=="function")&&!_.duplex&&(_.duplex="half")),u!=null&&u.headers&&(w=ye(ye({},w),u.headers));const S=h._removeEmptyFolders(r),P=h._getFinalPath(S),R=await(a=="PUT"?jc:Rn)(h.fetch,`${h.url}/object/${P}`,p,ye({headers:w},_!=null&&_.duplex?{duplex:_.duplex}:{}));return{data:{path:S,id:R.Id,fullPath:R.Key},error:null}}catch(p){if(h.shouldThrowOnError)throw p;if(tt(p))return{data:null,error:p};throw p}}async upload(a,r,s){return this.uploadOrUpdate("POST",a,r,s)}async uploadToSignedUrl(a,r,s,u){var h=this;const p=h._removeEmptyFolders(a),_=h._getFinalPath(p),w=new URL(h.url+`/object/upload/sign/${_}`);w.searchParams.set("token",r);try{let v;const S=ye({upsert:Gd.upsert},u),P=ye(ye({},h.headers),{"x-upsert":String(S.upsert)});return typeof Blob<"u"&&s instanceof Blob?(v=new FormData,v.append("cacheControl",S.cacheControl),v.append("",s)):typeof FormData<"u"&&s instanceof FormData?(v=s,v.append("cacheControl",S.cacheControl)):(v=s,P["cache-control"]=`max-age=${S.cacheControl}`,P["content-type"]=S.contentType),{data:{path:p,fullPath:(await jc(h.fetch,w.toString(),v,{headers:P})).Key},error:null}}catch(v){if(h.shouldThrowOnError)throw v;if(tt(v))return{data:null,error:v};throw v}}async createSignedUploadUrl(a,r){var s=this;try{let u=s._getFinalPath(a);const h=ye({},s.headers);r!=null&&r.upsert&&(h["x-upsert"]="true");const p=await Rn(s.fetch,`${s.url}/object/upload/sign/${u}`,{},{headers:h}),_=new URL(s.url+p.url),w=_.searchParams.get("token");if(!w)throw new $l("No token returned by API");return{data:{signedUrl:_.toString(),path:a,token:w},error:null}}catch(u){if(s.shouldThrowOnError)throw u;if(tt(u))return{data:null,error:u};throw u}}async update(a,r,s){return this.uploadOrUpdate("PUT",a,r,s)}async move(a,r,s){var u=this;try{return{data:await Rn(u.fetch,`${u.url}/object/move`,{bucketId:u.bucketId,sourceKey:a,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:u.headers}),error:null}}catch(h){if(u.shouldThrowOnError)throw h;if(tt(h))return{data:null,error:h};throw h}}async copy(a,r,s){var u=this;try{return{data:{path:(await Rn(u.fetch,`${u.url}/object/copy`,{bucketId:u.bucketId,sourceKey:a,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:u.headers})).Key},error:null}}catch(h){if(u.shouldThrowOnError)throw h;if(tt(h))return{data:null,error:h};throw h}}async createSignedUrl(a,r,s){var u=this;try{let h=u._getFinalPath(a),p=await Rn(u.fetch,`${u.url}/object/sign/${h}`,ye({expiresIn:r},s!=null&&s.transform?{transform:s.transform}:{}),{headers:u.headers});const _=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return p={signedUrl:encodeURI(`${u.url}${p.signedURL}${_}`)},{data:p,error:null}}catch(h){if(u.shouldThrowOnError)throw h;if(tt(h))return{data:null,error:h};throw h}}async createSignedUrls(a,r,s){var u=this;try{const h=await Rn(u.fetch,`${u.url}/object/sign/${u.bucketId}`,{expiresIn:r,paths:a},{headers:u.headers}),p=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:h.map(_=>ye(ye({},_),{},{signedUrl:_.signedURL?encodeURI(`${u.url}${_.signedURL}${p}`):null})),error:null}}catch(h){if(u.shouldThrowOnError)throw h;if(tt(h))return{data:null,error:h};throw h}}download(a,r){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",u=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),h=u?`?${u}`:"",p=this._getFinalPath(a),_=()=>na(this.fetch,`${this.url}/${s}/${p}${h}`,{headers:this.headers,noResolveJson:!0});return new Ym(_,this.shouldThrowOnError)}async info(a){var r=this;const s=r._getFinalPath(a);try{return{data:Ic(await na(r.fetch,`${r.url}/object/info/${s}`,{headers:r.headers})),error:null}}catch(u){if(r.shouldThrowOnError)throw u;if(tt(u))return{data:null,error:u};throw u}}async exists(a){var r=this;const s=r._getFinalPath(a);try{return await Gm(r.fetch,`${r.url}/object/${s}`,{headers:r.headers}),{data:!0,error:null}}catch(u){if(r.shouldThrowOnError)throw u;if(tt(u)&&u instanceof Nc){const h=u.originalError;if([400,404].includes(h==null?void 0:h.status))return{data:!1,error:u}}throw u}}getPublicUrl(a,r){const s=this._getFinalPath(a),u=[],h=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";h!==""&&u.push(h);const p=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",_=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});_!==""&&u.push(_);let w=u.join("&");return w!==""&&(w=`?${w}`),{data:{publicUrl:encodeURI(`${this.url}/${p}/public/${s}${w}`)}}}async remove(a){var r=this;try{return{data:await Kc(r.fetch,`${r.url}/object/${r.bucketId}`,{prefixes:a},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(tt(s))return{data:null,error:s};throw s}}async list(a,r,s){var u=this;try{const h=ye(ye(ye({},Qm),r),{},{prefix:a||""});return{data:await Rn(u.fetch,`${u.url}/object/list/${u.bucketId}`,h,{headers:u.headers},s),error:null}}catch(h){if(u.shouldThrowOnError)throw h;if(tt(h))return{data:null,error:h};throw h}}async listV2(a,r){var s=this;try{const u=ye({},a);return{data:await Rn(s.fetch,`${s.url}/object/list-v2/${s.bucketId}`,u,{headers:s.headers},r),error:null}}catch(u){if(s.shouldThrowOnError)throw u;if(tt(u))return{data:null,error:u};throw u}}encodeMetadata(a){return JSON.stringify(a)}toBase64(a){return typeof Buffer<"u"?Buffer.from(a).toString("base64"):btoa(a)}_getFinalPath(a){return`${this.bucketId}/${a.replace(/^\/+/,"")}`}_removeEmptyFolders(a){return a.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(a){const r=[];return a.width&&r.push(`width=${a.width}`),a.height&&r.push(`height=${a.height}`),a.resize&&r.push(`resize=${a.resize}`),a.format&&r.push(`format=${a.format}`),a.quality&&r.push(`quality=${a.quality}`),r.join("&")}};const Ef="2.91.1",Tf={"X-Client-Info":`storage-js/${Ef}`};var e_=class{constructor(a,r={},s,u){this.shouldThrowOnError=!1;const h=new URL(a);u!=null&&u.useNewHostname&&/supabase\.(co|in|red)$/.test(h.hostname)&&!h.hostname.includes("storage.supabase.")&&(h.hostname=h.hostname.replace("supabase.","storage.supabase.")),this.url=h.href.replace(/\/$/,""),this.headers=ye(ye({},Tf),r),this.fetch=qc(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(a){var r=this;try{const s=r.listBucketOptionsToQueryString(a);return{data:await na(r.fetch,`${r.url}/bucket${s}`,{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(tt(s))return{data:null,error:s};throw s}}async getBucket(a){var r=this;try{return{data:await na(r.fetch,`${r.url}/bucket/${a}`,{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(tt(s))return{data:null,error:s};throw s}}async createBucket(a,r={public:!1}){var s=this;try{return{data:await Rn(s.fetch,`${s.url}/bucket`,{id:a,name:a,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:s.headers}),error:null}}catch(u){if(s.shouldThrowOnError)throw u;if(tt(u))return{data:null,error:u};throw u}}async updateBucket(a,r){var s=this;try{return{data:await jc(s.fetch,`${s.url}/bucket/${a}`,{id:a,name:a,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:s.headers}),error:null}}catch(u){if(s.shouldThrowOnError)throw u;if(tt(u))return{data:null,error:u};throw u}}async emptyBucket(a){var r=this;try{return{data:await Rn(r.fetch,`${r.url}/bucket/${a}/empty`,{},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(tt(s))return{data:null,error:s};throw s}}async deleteBucket(a){var r=this;try{return{data:await Kc(r.fetch,`${r.url}/bucket/${a}`,{},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(tt(s))return{data:null,error:s};throw s}}listBucketOptionsToQueryString(a){const r={};return a&&("limit"in a&&(r.limit=String(a.limit)),"offset"in a&&(r.offset=String(a.offset)),a.search&&(r.search=a.search),a.sortColumn&&(r.sortColumn=a.sortColumn),a.sortOrder&&(r.sortOrder=a.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}},t_=class{constructor(a,r={},s){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=ye(ye({},Tf),r),this.fetch=qc(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(a){var r=this;try{return{data:await Rn(r.fetch,`${r.url}/bucket`,{name:a},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(tt(s))return{data:null,error:s};throw s}}async listBuckets(a){var r=this;try{const s=new URLSearchParams;(a==null?void 0:a.limit)!==void 0&&s.set("limit",a.limit.toString()),(a==null?void 0:a.offset)!==void 0&&s.set("offset",a.offset.toString()),a!=null&&a.sortColumn&&s.set("sortColumn",a.sortColumn),a!=null&&a.sortOrder&&s.set("sortOrder",a.sortOrder),a!=null&&a.search&&s.set("search",a.search);const u=s.toString(),h=u?`${r.url}/bucket?${u}`:`${r.url}/bucket`;return{data:await na(r.fetch,h,{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(tt(s))return{data:null,error:s};throw s}}async deleteBucket(a){var r=this;try{return{data:await Kc(r.fetch,`${r.url}/bucket/${a}`,{},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(tt(s))return{data:null,error:s};throw s}}from(a){var r=this;if(!Wm(a))throw new $l("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const s=new Bm({baseUrl:this.url,catalogName:a,auth:{type:"custom",getHeaders:async()=>r.headers},fetch:this.fetch}),u=this.shouldThrowOnError;return new Proxy(s,{get(h,p){const _=h[p];return typeof _!="function"?_:async(...w)=>{try{return{data:await _.apply(h,w),error:null}}catch(v){if(u)throw v;return{data:null,error:v}}}}})}};const Gc={"X-Client-Info":`storage-js/${Ef}`,"Content-Type":"application/json"};var Pf=class extends Error{constructor(a){super(a),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function rn(a){return typeof a=="object"&&a!==null&&"__isStorageVectorsError"in a}var xc=class extends Pf{constructor(a,r,s){super(a),this.name="StorageVectorsApiError",this.status=r,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},n_=class extends Pf{constructor(a,r){super(a),this.name="StorageVectorsUnknownError",this.originalError=r}};const Jc=a=>a?(...r)=>a(...r):(...r)=>fetch(...r),r_=a=>{if(typeof a!="object"||a===null)return!1;const r=Object.getPrototypeOf(a);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in a)&&!(Symbol.iterator in a)},Jd=a=>a.msg||a.message||a.error_description||a.error||JSON.stringify(a),i_=async(a,r,s)=>{if(a&&typeof a=="object"&&"status"in a&&"ok"in a&&typeof a.status=="number"&&!(s!=null&&s.noResolveJson)){const u=a.status||500,h=a;if(typeof h.json=="function")h.json().then(p=>{const _=(p==null?void 0:p.statusCode)||(p==null?void 0:p.code)||u+"";r(new xc(Jd(p),u,_))}).catch(()=>{const p=u+"";r(new xc(h.statusText||`HTTP ${u} error`,u,p))});else{const p=u+"";r(new xc(h.statusText||`HTTP ${u} error`,u,p))}}else r(new n_(Jd(a),a))},s_=(a,r,s,u)=>{const h={method:a,headers:(r==null?void 0:r.headers)||{}};return u?(r_(u)?(h.headers=ye({"Content-Type":"application/json"},r==null?void 0:r.headers),h.body=JSON.stringify(u)):h.body=u,ye(ye({},h),s)):h};async function o_(a,r,s,u,h,p){return new Promise((_,w)=>{a(s,s_(r,u,h,p)).then(v=>{if(!v.ok)throw v;if(u!=null&&u.noResolveJson)return v;const S=v.headers.get("content-type");return!S||!S.includes("application/json")?{}:v.json()}).then(v=>_(v)).catch(v=>i_(v,w,u))})}async function sn(a,r,s,u,h){return o_(a,"POST",r,u,h,s)}var a_=class{constructor(a,r={},s){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=ye(ye({},Gc),r),this.fetch=Jc(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(a){var r=this;try{return{data:await sn(r.fetch,`${r.url}/CreateIndex`,a,{headers:r.headers})||{},error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(rn(s))return{data:null,error:s};throw s}}async getIndex(a,r){var s=this;try{return{data:await sn(s.fetch,`${s.url}/GetIndex`,{vectorBucketName:a,indexName:r},{headers:s.headers}),error:null}}catch(u){if(s.shouldThrowOnError)throw u;if(rn(u))return{data:null,error:u};throw u}}async listIndexes(a){var r=this;try{return{data:await sn(r.fetch,`${r.url}/ListIndexes`,a,{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(rn(s))return{data:null,error:s};throw s}}async deleteIndex(a,r){var s=this;try{return{data:await sn(s.fetch,`${s.url}/DeleteIndex`,{vectorBucketName:a,indexName:r},{headers:s.headers})||{},error:null}}catch(u){if(s.shouldThrowOnError)throw u;if(rn(u))return{data:null,error:u};throw u}}},l_=class{constructor(a,r={},s){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=ye(ye({},Gc),r),this.fetch=Jc(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(a){var r=this;try{if(a.vectors.length<1||a.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await sn(r.fetch,`${r.url}/PutVectors`,a,{headers:r.headers})||{},error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(rn(s))return{data:null,error:s};throw s}}async getVectors(a){var r=this;try{return{data:await sn(r.fetch,`${r.url}/GetVectors`,a,{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(rn(s))return{data:null,error:s};throw s}}async listVectors(a){var r=this;try{if(a.segmentCount!==void 0){if(a.segmentCount<1||a.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(a.segmentIndex!==void 0&&(a.segmentIndex<0||a.segmentIndex>=a.segmentCount))throw new Error(`segmentIndex must be between 0 and ${a.segmentCount-1}`)}return{data:await sn(r.fetch,`${r.url}/ListVectors`,a,{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(rn(s))return{data:null,error:s};throw s}}async queryVectors(a){var r=this;try{return{data:await sn(r.fetch,`${r.url}/QueryVectors`,a,{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(rn(s))return{data:null,error:s};throw s}}async deleteVectors(a){var r=this;try{if(a.keys.length<1||a.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await sn(r.fetch,`${r.url}/DeleteVectors`,a,{headers:r.headers})||{},error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(rn(s))return{data:null,error:s};throw s}}},u_=class{constructor(a,r={},s){this.shouldThrowOnError=!1,this.url=a.replace(/\/$/,""),this.headers=ye(ye({},Gc),r),this.fetch=Jc(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(a){var r=this;try{return{data:await sn(r.fetch,`${r.url}/CreateVectorBucket`,{vectorBucketName:a},{headers:r.headers})||{},error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(rn(s))return{data:null,error:s};throw s}}async getBucket(a){var r=this;try{return{data:await sn(r.fetch,`${r.url}/GetVectorBucket`,{vectorBucketName:a},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(rn(s))return{data:null,error:s};throw s}}async listBuckets(a={}){var r=this;try{return{data:await sn(r.fetch,`${r.url}/ListVectorBuckets`,a,{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(rn(s))return{data:null,error:s};throw s}}async deleteBucket(a){var r=this;try{return{data:await sn(r.fetch,`${r.url}/DeleteVectorBucket`,{vectorBucketName:a},{headers:r.headers})||{},error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(rn(s))return{data:null,error:s};throw s}}},c_=class extends u_{constructor(a,r={}){super(a,r.headers||{},r.fetch)}from(a){return new h_(this.url,this.headers,a,this.fetch)}async createBucket(a){var r=()=>super.createBucket,s=this;return r().call(s,a)}async getBucket(a){var r=()=>super.getBucket,s=this;return r().call(s,a)}async listBuckets(a={}){var r=()=>super.listBuckets,s=this;return r().call(s,a)}async deleteBucket(a){var r=()=>super.deleteBucket,s=this;return r().call(s,a)}},h_=class extends a_{constructor(a,r,s,u){super(a,r,u),this.vectorBucketName=s}async createIndex(a){var r=()=>super.createIndex,s=this;return r().call(s,ye(ye({},a),{},{vectorBucketName:s.vectorBucketName}))}async listIndexes(a={}){var r=()=>super.listIndexes,s=this;return r().call(s,ye(ye({},a),{},{vectorBucketName:s.vectorBucketName}))}async getIndex(a){var r=()=>super.getIndex,s=this;return r().call(s,s.vectorBucketName,a)}async deleteIndex(a){var r=()=>super.deleteIndex,s=this;return r().call(s,s.vectorBucketName,a)}index(a){return new d_(this.url,this.headers,this.vectorBucketName,a,this.fetch)}},d_=class extends l_{constructor(a,r,s,u,h){super(a,r,h),this.vectorBucketName=s,this.indexName=u}async putVectors(a){var r=()=>super.putVectors,s=this;return r().call(s,ye(ye({},a),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async getVectors(a){var r=()=>super.getVectors,s=this;return r().call(s,ye(ye({},a),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async listVectors(a={}){var r=()=>super.listVectors,s=this;return r().call(s,ye(ye({},a),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async queryVectors(a){var r=()=>super.queryVectors,s=this;return r().call(s,ye(ye({},a),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async deleteVectors(a){var r=()=>super.deleteVectors,s=this;return r().call(s,ye(ye({},a),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}},f_=class extends e_{constructor(a,r={},s,u){super(a,r,s,u)}from(a){return new Xm(this.url,this.headers,a,this.fetch)}get vectors(){return new c_(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new t_(this.url+"/iceberg",this.headers,this.fetch)}};const Cf="2.91.1",Fs=30*1e3,Mc=3,Sc=Mc*Fs,p_="http://localhost:9999",m_="supabase.auth.token",__={"X-Client-Info":`gotrue-js/${Cf}`},zc="X-Supabase-Api-Version",Lf={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},g_=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,v_=600*1e3;class ra extends Error{constructor(r,s,u){super(r),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=u}}function ce(a){return typeof a=="object"&&a!==null&&"__isAuthError"in a}class y_ extends ra{constructor(r,s,u){super(r,s,u),this.name="AuthApiError",this.status=s,this.code=u}}function w_(a){return ce(a)&&a.name==="AuthApiError"}class Ui extends ra{constructor(r,s){super(r),this.name="AuthUnknownError",this.originalError=s}}class gr extends ra{constructor(r,s,u,h){super(r,u,h),this.name=s,this.status=u}}class nn extends gr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function x_(a){return ce(a)&&a.name==="AuthSessionMissingError"}class Ms extends gr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Nl extends gr{constructor(r){super(r,"AuthInvalidCredentialsError",400,void 0)}}class Il extends gr{constructor(r,s=null){super(r,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function S_(a){return ce(a)&&a.name==="AuthImplicitGrantRedirectError"}class Yd extends gr{constructor(r,s=null){super(r,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class k_ extends gr{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Dc extends gr{constructor(r,s){super(r,"AuthRetryableFetchError",s,void 0)}}function kc(a){return ce(a)&&a.name==="AuthRetryableFetchError"}class Qd extends gr{constructor(r,s,u){super(r,"AuthWeakPasswordError",s,"weak_password"),this.reasons=u}}class Bc extends gr{constructor(r){super(r,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ml="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Xd=` 	
\r=`.split(""),b_=(()=>{const a=new Array(128);for(let r=0;r<a.length;r+=1)a[r]=-1;for(let r=0;r<Xd.length;r+=1)a[Xd[r].charCodeAt(0)]=-2;for(let r=0;r<Ml.length;r+=1)a[Ml[r].charCodeAt(0)]=r;return a})();function ef(a,r,s){if(a!==null)for(r.queue=r.queue<<8|a,r.queuedBits+=8;r.queuedBits>=6;){const u=r.queue>>r.queuedBits-6&63;s(Ml[u]),r.queuedBits-=6}else if(r.queuedBits>0)for(r.queue=r.queue<<6-r.queuedBits,r.queuedBits=6;r.queuedBits>=6;){const u=r.queue>>r.queuedBits-6&63;s(Ml[u]),r.queuedBits-=6}}function Of(a,r,s){const u=b_[a];if(u>-1)for(r.queue=r.queue<<6|u,r.queuedBits+=6;r.queuedBits>=8;)s(r.queue>>r.queuedBits-8&255),r.queuedBits-=8;else{if(u===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(a)}"`)}}function tf(a){const r=[],s=_=>{r.push(String.fromCodePoint(_))},u={utf8seq:0,codepoint:0},h={queue:0,queuedBits:0},p=_=>{P_(_,u,s)};for(let _=0;_<a.length;_+=1)Of(a.charCodeAt(_),h,p);return r.join("")}function E_(a,r){if(a<=127){r(a);return}else if(a<=2047){r(192|a>>6),r(128|a&63);return}else if(a<=65535){r(224|a>>12),r(128|a>>6&63),r(128|a&63);return}else if(a<=1114111){r(240|a>>18),r(128|a>>12&63),r(128|a>>6&63),r(128|a&63);return}throw new Error(`Unrecognized Unicode codepoint: ${a.toString(16)}`)}function T_(a,r){for(let s=0;s<a.length;s+=1){let u=a.charCodeAt(s);if(u>55295&&u<=56319){const h=(u-55296)*1024&65535;u=(a.charCodeAt(s+1)-56320&65535|h)+65536,s+=1}E_(u,r)}}function P_(a,r,s){if(r.utf8seq===0){if(a<=127){s(a);return}for(let u=1;u<6;u+=1)if((a>>7-u&1)===0){r.utf8seq=u;break}if(r.utf8seq===2)r.codepoint=a&31;else if(r.utf8seq===3)r.codepoint=a&15;else if(r.utf8seq===4)r.codepoint=a&7;else throw new Error("Invalid UTF-8 sequence");r.utf8seq-=1}else if(r.utf8seq>0){if(a<=127)throw new Error("Invalid UTF-8 sequence");r.codepoint=r.codepoint<<6|a&63,r.utf8seq-=1,r.utf8seq===0&&s(r.codepoint)}}function Hs(a){const r=[],s={queue:0,queuedBits:0},u=h=>{r.push(h)};for(let h=0;h<a.length;h+=1)Of(a.charCodeAt(h),s,u);return new Uint8Array(r)}function C_(a){const r=[];return T_(a,s=>r.push(s)),new Uint8Array(r)}function $i(a){const r=[],s={queue:0,queuedBits:0},u=h=>{r.push(h)};return a.forEach(h=>ef(h,s,u)),ef(null,s,u),r.join("")}function L_(a){return Math.round(Date.now()/1e3)+a}function O_(){return Symbol("auth-callback")}const St=()=>typeof window<"u"&&typeof document<"u",Mi={tested:!1,writable:!1},Rf=()=>{if(!St())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Mi.tested)return Mi.writable;const a=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(a,a),globalThis.localStorage.removeItem(a),Mi.tested=!0,Mi.writable=!0}catch{Mi.tested=!0,Mi.writable=!1}return Mi.writable};function R_(a){const r={},s=new URL(a);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((h,p)=>{r[p]=h})}catch{}return s.searchParams.forEach((u,h)=>{r[h]=u}),r}const Af=a=>a?(...r)=>a(...r):(...r)=>fetch(...r),A_=a=>typeof a=="object"&&a!==null&&"status"in a&&"ok"in a&&"json"in a&&typeof a.json=="function",Ws=async(a,r,s)=>{await a.setItem(r,JSON.stringify(s))},zi=async(a,r)=>{const s=await a.getItem(r);if(!s)return null;try{return JSON.parse(s)}catch{return s}},xt=async(a,r)=>{await a.removeItem(r)};class Fl{constructor(){this.promise=new Fl.promiseConstructor((r,s)=>{this.resolve=r,this.reject=s})}}Fl.promiseConstructor=Promise;function bc(a){const r=a.split(".");if(r.length!==3)throw new Bc("Invalid JWT structure");for(let u=0;u<r.length;u++)if(!g_.test(r[u]))throw new Bc("JWT not in base64url format");return{header:JSON.parse(tf(r[0])),payload:JSON.parse(tf(r[1])),signature:Hs(r[2]),raw:{header:r[0],payload:r[1]}}}async function N_(a){return await new Promise(r=>{setTimeout(()=>r(null),a)})}function I_(a,r){return new Promise((u,h)=>{(async()=>{for(let p=0;p<1/0;p++)try{const _=await a(p);if(!r(p,null,_)){u(_);return}}catch(_){if(!r(p,_)){h(_);return}}})()})}function j_(a){return("0"+a.toString(16)).substr(-2)}function M_(){const r=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",u=s.length;let h="";for(let p=0;p<56;p++)h+=s.charAt(Math.floor(Math.random()*u));return h}return crypto.getRandomValues(r),Array.from(r,j_).join("")}async function z_(a){const s=new TextEncoder().encode(a),u=await crypto.subtle.digest("SHA-256",s),h=new Uint8Array(u);return Array.from(h).map(p=>String.fromCharCode(p)).join("")}async function D_(a){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),a;const s=await z_(a);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function zs(a,r,s=!1){const u=M_();let h=u;s&&(h+="/PASSWORD_RECOVERY"),await Ws(a,`${r}-code-verifier`,h);const p=await D_(u);return[p,u===p?"plain":"s256"]}const B_=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function U_(a){const r=a.headers.get(zc);if(!r||!r.match(B_))return null;try{return new Date(`${r}T00:00:00.0Z`)}catch{return null}}function $_(a){if(!a)throw new Error("Missing exp claim");const r=Math.floor(Date.now()/1e3);if(a<=r)throw new Error("JWT has expired")}function F_(a){switch(a){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const W_=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ds(a){if(!W_.test(a))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ec(){const a={};return new Proxy(a,{get:(r,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const u=s.toString();if(u==="Symbol(Symbol.toPrimitive)"||u==="Symbol(Symbol.toStringTag)"||u==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(r,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(r,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Z_(a,r){return new Proxy(a,{get:(s,u,h)=>{if(u==="__isInsecureUserWarningProxy")return!0;if(typeof u=="symbol"){const p=u.toString();if(p==="Symbol(Symbol.toPrimitive)"||p==="Symbol(Symbol.toStringTag)"||p==="Symbol(util.inspect.custom)"||p==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(s,u,h)}return!r.value&&typeof u=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),r.value=!0),Reflect.get(s,u,h)}})}function nf(a){return JSON.parse(JSON.stringify(a))}const Di=a=>a.msg||a.message||a.error_description||a.error||JSON.stringify(a),H_=[502,503,504];async function rf(a){var r;if(!A_(a))throw new Dc(Di(a),0);if(H_.includes(a.status))throw new Dc(Di(a),a.status);let s;try{s=await a.json()}catch(p){throw new Ui(Di(p),p)}let u;const h=U_(a);if(h&&h.getTime()>=Lf["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?u=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(u=s.error_code),u){if(u==="weak_password")throw new Qd(Di(s),a.status,((r=s.weak_password)===null||r===void 0?void 0:r.reasons)||[]);if(u==="session_not_found")throw new nn}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((p,_)=>p&&typeof _=="string",!0))throw new Qd(Di(s),a.status,s.weak_password.reasons);throw new y_(Di(s),a.status||500,u)}const V_=(a,r,s,u)=>{const h={method:a,headers:(r==null?void 0:r.headers)||{}};return a==="GET"?h:(h.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},r==null?void 0:r.headers),h.body=JSON.stringify(u),Object.assign(Object.assign({},h),s))};async function ve(a,r,s,u){var h;const p=Object.assign({},u==null?void 0:u.headers);p[zc]||(p[zc]=Lf["2024-01-01"].name),u!=null&&u.jwt&&(p.Authorization=`Bearer ${u.jwt}`);const _=(h=u==null?void 0:u.query)!==null&&h!==void 0?h:{};u!=null&&u.redirectTo&&(_.redirect_to=u.redirectTo);const w=Object.keys(_).length?"?"+new URLSearchParams(_).toString():"",v=await q_(a,r,s+w,{headers:p,noResolveJson:u==null?void 0:u.noResolveJson},{},u==null?void 0:u.body);return u!=null&&u.xform?u==null?void 0:u.xform(v):{data:Object.assign({},v),error:null}}async function q_(a,r,s,u,h,p){const _=V_(r,u,h,p);let w;try{w=await a(s,Object.assign({},_))}catch(v){throw console.error(v),new Dc(Di(v),0)}if(w.ok||await rf(w),u!=null&&u.noResolveJson)return w;try{return await w.json()}catch(v){await rf(v)}}function On(a){var r;let s=null;J_(a)&&(s=Object.assign({},a),a.expires_at||(s.expires_at=L_(a.expires_in)));const u=(r=a.user)!==null&&r!==void 0?r:a;return{data:{session:s,user:u},error:null}}function sf(a){const r=On(a);return!r.error&&a.weak_password&&typeof a.weak_password=="object"&&Array.isArray(a.weak_password.reasons)&&a.weak_password.reasons.length&&a.weak_password.message&&typeof a.weak_password.message=="string"&&a.weak_password.reasons.reduce((s,u)=>s&&typeof u=="string",!0)&&(r.data.weak_password=a.weak_password),r}function ii(a){var r;return{data:{user:(r=a.user)!==null&&r!==void 0?r:a},error:null}}function K_(a){return{data:a,error:null}}function G_(a){const{action_link:r,email_otp:s,hashed_token:u,redirect_to:h,verification_type:p}=a,_=Ul(a,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),w={action_link:r,email_otp:s,hashed_token:u,redirect_to:h,verification_type:p},v=Object.assign({},_);return{data:{properties:w,user:v},error:null}}function of(a){return a}function J_(a){return a.access_token&&a.refresh_token&&a.expires_in}const Tc=["global","local","others"];class Y_{constructor({url:r="",headers:s={},fetch:u}){this.url=r,this.headers=s,this.fetch=Af(u),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(r,s=Tc[0]){if(Tc.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Tc.join(", ")}`);try{return await ve(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:r,noResolveJson:!0}),{data:null,error:null}}catch(u){if(ce(u))return{data:null,error:u};throw u}}async inviteUserByEmail(r,s={}){try{return await ve(this.fetch,"POST",`${this.url}/invite`,{body:{email:r,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:ii})}catch(u){if(ce(u))return{data:{user:null},error:u};throw u}}async generateLink(r){try{const{options:s}=r,u=Ul(r,["options"]),h=Object.assign(Object.assign({},u),s);return"newEmail"in u&&(h.new_email=u==null?void 0:u.newEmail,delete h.newEmail),await ve(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:h,headers:this.headers,xform:G_,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(ce(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(r){try{return await ve(this.fetch,"POST",`${this.url}/admin/users`,{body:r,headers:this.headers,xform:ii})}catch(s){if(ce(s))return{data:{user:null},error:s};throw s}}async listUsers(r){var s,u,h,p,_,w,v;try{const S={nextPage:null,lastPage:0,total:0},P=await ve(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(u=(s=r==null?void 0:r.page)===null||s===void 0?void 0:s.toString())!==null&&u!==void 0?u:"",per_page:(p=(h=r==null?void 0:r.perPage)===null||h===void 0?void 0:h.toString())!==null&&p!==void 0?p:""},xform:of});if(P.error)throw P.error;const R=await P.json(),N=(_=P.headers.get("x-total-count"))!==null&&_!==void 0?_:0,M=(v=(w=P.headers.get("link"))===null||w===void 0?void 0:w.split(","))!==null&&v!==void 0?v:[];return M.length>0&&(M.forEach(U=>{const B=parseInt(U.split(";")[0].split("=")[1].substring(0,1)),H=JSON.parse(U.split(";")[1].split("=")[1]);S[`${H}Page`]=B}),S.total=parseInt(N)),{data:Object.assign(Object.assign({},R),S),error:null}}catch(S){if(ce(S))return{data:{users:[]},error:S};throw S}}async getUserById(r){Ds(r);try{return await ve(this.fetch,"GET",`${this.url}/admin/users/${r}`,{headers:this.headers,xform:ii})}catch(s){if(ce(s))return{data:{user:null},error:s};throw s}}async updateUserById(r,s){Ds(r);try{return await ve(this.fetch,"PUT",`${this.url}/admin/users/${r}`,{body:s,headers:this.headers,xform:ii})}catch(u){if(ce(u))return{data:{user:null},error:u};throw u}}async deleteUser(r,s=!1){Ds(r);try{return await ve(this.fetch,"DELETE",`${this.url}/admin/users/${r}`,{headers:this.headers,body:{should_soft_delete:s},xform:ii})}catch(u){if(ce(u))return{data:{user:null},error:u};throw u}}async _listFactors(r){Ds(r.userId);try{const{data:s,error:u}=await ve(this.fetch,"GET",`${this.url}/admin/users/${r.userId}/factors`,{headers:this.headers,xform:h=>({data:{factors:h},error:null})});return{data:s,error:u}}catch(s){if(ce(s))return{data:null,error:s};throw s}}async _deleteFactor(r){Ds(r.userId),Ds(r.id);try{return{data:await ve(this.fetch,"DELETE",`${this.url}/admin/users/${r.userId}/factors/${r.id}`,{headers:this.headers}),error:null}}catch(s){if(ce(s))return{data:null,error:s};throw s}}async _listOAuthClients(r){var s,u,h,p,_,w,v;try{const S={nextPage:null,lastPage:0,total:0},P=await ve(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(u=(s=r==null?void 0:r.page)===null||s===void 0?void 0:s.toString())!==null&&u!==void 0?u:"",per_page:(p=(h=r==null?void 0:r.perPage)===null||h===void 0?void 0:h.toString())!==null&&p!==void 0?p:""},xform:of});if(P.error)throw P.error;const R=await P.json(),N=(_=P.headers.get("x-total-count"))!==null&&_!==void 0?_:0,M=(v=(w=P.headers.get("link"))===null||w===void 0?void 0:w.split(","))!==null&&v!==void 0?v:[];return M.length>0&&(M.forEach(U=>{const B=parseInt(U.split(";")[0].split("=")[1].substring(0,1)),H=JSON.parse(U.split(";")[1].split("=")[1]);S[`${H}Page`]=B}),S.total=parseInt(N)),{data:Object.assign(Object.assign({},R),S),error:null}}catch(S){if(ce(S))return{data:{clients:[]},error:S};throw S}}async _createOAuthClient(r){try{return await ve(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:r,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(ce(s))return{data:null,error:s};throw s}}async _getOAuthClient(r){try{return await ve(this.fetch,"GET",`${this.url}/admin/oauth/clients/${r}`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(ce(s))return{data:null,error:s};throw s}}async _updateOAuthClient(r,s){try{return await ve(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${r}`,{body:s,headers:this.headers,xform:u=>({data:u,error:null})})}catch(u){if(ce(u))return{data:null,error:u};throw u}}async _deleteOAuthClient(r){try{return await ve(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${r}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(s){if(ce(s))return{data:null,error:s};throw s}}async _regenerateOAuthClientSecret(r){try{return await ve(this.fetch,"POST",`${this.url}/admin/oauth/clients/${r}/regenerate_secret`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(ce(s))return{data:null,error:s};throw s}}}function af(a={}){return{getItem:r=>a[r]||null,setItem:(r,s)=>{a[r]=s},removeItem:r=>{delete a[r]}}}const Bs={debug:!!(globalThis&&Rf()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Nf extends Error{constructor(r){super(r),this.isAcquireTimeout=!0}}class Q_ extends Nf{}async function X_(a,r,s){Bs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",a,r);const u=new globalThis.AbortController;return r>0&&setTimeout(()=>{u.abort(),Bs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",a)},r),await Promise.resolve().then(()=>globalThis.navigator.locks.request(a,r===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:u.signal},async h=>{if(h){Bs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",a,h.name);try{return await s()}finally{Bs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",a,h.name)}}else{if(r===0)throw Bs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",a),new Q_(`Acquiring an exclusive Navigator LockManager lock "${a}" immediately failed`);if(Bs.debug)try{const p=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(p,null,"  "))}catch(p){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",p)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}function eg(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function If(a){if(!/^0x[a-fA-F0-9]{40}$/.test(a))throw new Error(`@supabase/auth-js: Address "${a}" is invalid.`);return a.toLowerCase()}function tg(a){return parseInt(a,16)}function ng(a){const r=new TextEncoder().encode(a);return"0x"+Array.from(r,u=>u.toString(16).padStart(2,"0")).join("")}function rg(a){var r;const{chainId:s,domain:u,expirationTime:h,issuedAt:p=new Date,nonce:_,notBefore:w,requestId:v,resources:S,scheme:P,uri:R,version:N}=a;{if(!Number.isInteger(s))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${s}`);if(!u)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(_&&_.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${_}`);if(!R)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(N!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${N}`);if(!((r=a.statement)===null||r===void 0)&&r.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${a.statement}`)}const M=If(a.address),U=P?`${P}://${u}`:u,B=a.statement?`${a.statement}
`:"",H=`${U} wants you to sign in with your Ethereum account:
${M}

${B}`;let Q=`URI: ${R}
Version: ${N}
Chain ID: ${s}${_?`
Nonce: ${_}`:""}
Issued At: ${p.toISOString()}`;if(h&&(Q+=`
Expiration Time: ${h.toISOString()}`),w&&(Q+=`
Not Before: ${w.toISOString()}`),v&&(Q+=`
Request ID: ${v}`),S){let Y=`
Resources:`;for(const G of S){if(!G||typeof G!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${G}`);Y+=`
- ${G}`}Q+=Y}return`${H}
${Q}`}class ut extends Error{constructor({message:r,code:s,cause:u,name:h}){var p;super(r,{cause:u}),this.__isWebAuthnError=!0,this.name=(p=h??(u instanceof Error?u.name:void 0))!==null&&p!==void 0?p:"Unknown Error",this.code=s}}class zl extends ut{constructor(r,s){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s,message:r}),this.name="WebAuthnUnknownError",this.originalError=s}}function ig({error:a,options:r}){var s,u,h;const{publicKey:p}=r;if(!p)throw Error("options was missing required publicKey property");if(a.name==="AbortError"){if(r.signal instanceof AbortSignal)return new ut({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:a})}else if(a.name==="ConstraintError"){if(((s=p.authenticatorSelection)===null||s===void 0?void 0:s.requireResidentKey)===!0)return new ut({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:a});if(r.mediation==="conditional"&&((u=p.authenticatorSelection)===null||u===void 0?void 0:u.userVerification)==="required")return new ut({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:a});if(((h=p.authenticatorSelection)===null||h===void 0?void 0:h.userVerification)==="required")return new ut({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:a})}else{if(a.name==="InvalidStateError")return new ut({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:a});if(a.name==="NotAllowedError")return new ut({message:a.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a});if(a.name==="NotSupportedError")return p.pubKeyCredParams.filter(w=>w.type==="public-key").length===0?new ut({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:a}):new ut({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:a});if(a.name==="SecurityError"){const _=window.location.hostname;if(jf(_)){if(p.rp.id!==_)return new ut({message:`The RP ID "${p.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:a})}else return new ut({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:a})}else if(a.name==="TypeError"){if(p.user.id.byteLength<1||p.user.id.byteLength>64)return new ut({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:a})}else if(a.name==="UnknownError")return new ut({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:a})}return new ut({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a})}function sg({error:a,options:r}){const{publicKey:s}=r;if(!s)throw Error("options was missing required publicKey property");if(a.name==="AbortError"){if(r.signal instanceof AbortSignal)return new ut({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:a})}else{if(a.name==="NotAllowedError")return new ut({message:a.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a});if(a.name==="SecurityError"){const u=window.location.hostname;if(jf(u)){if(s.rpId!==u)return new ut({message:`The RP ID "${s.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:a})}else return new ut({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:a})}else if(a.name==="UnknownError")return new ut({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:a})}return new ut({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a})}class og{createNewAbortSignal(){if(this.controller){const s=new Error("Cancelling existing WebAuthn API call for new one");s.name="AbortError",this.controller.abort(s)}const r=new AbortController;return this.controller=r,r.signal}cancelCeremony(){if(this.controller){const r=new Error("Manually cancelling existing WebAuthn API call");r.name="AbortError",this.controller.abort(r),this.controller=void 0}}}const ag=new og;function lg(a){if(!a)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(a);const{challenge:r,user:s,excludeCredentials:u}=a,h=Ul(a,["challenge","user","excludeCredentials"]),p=Hs(r).buffer,_=Object.assign(Object.assign({},s),{id:Hs(s.id).buffer}),w=Object.assign(Object.assign({},h),{challenge:p,user:_});if(u&&u.length>0){w.excludeCredentials=new Array(u.length);for(let v=0;v<u.length;v++){const S=u[v];w.excludeCredentials[v]=Object.assign(Object.assign({},S),{id:Hs(S.id).buffer,type:S.type||"public-key",transports:S.transports})}}return w}function ug(a){if(!a)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(a);const{challenge:r,allowCredentials:s}=a,u=Ul(a,["challenge","allowCredentials"]),h=Hs(r).buffer,p=Object.assign(Object.assign({},u),{challenge:h});if(s&&s.length>0){p.allowCredentials=new Array(s.length);for(let _=0;_<s.length;_++){const w=s[_];p.allowCredentials[_]=Object.assign(Object.assign({},w),{id:Hs(w.id).buffer,type:w.type||"public-key",transports:w.transports})}}return p}function cg(a){var r;if("toJSON"in a&&typeof a.toJSON=="function")return a.toJSON();const s=a;return{id:a.id,rawId:a.id,response:{attestationObject:$i(new Uint8Array(a.response.attestationObject)),clientDataJSON:$i(new Uint8Array(a.response.clientDataJSON))},type:"public-key",clientExtensionResults:a.getClientExtensionResults(),authenticatorAttachment:(r=s.authenticatorAttachment)!==null&&r!==void 0?r:void 0}}function hg(a){var r;if("toJSON"in a&&typeof a.toJSON=="function")return a.toJSON();const s=a,u=a.getClientExtensionResults(),h=a.response;return{id:a.id,rawId:a.id,response:{authenticatorData:$i(new Uint8Array(h.authenticatorData)),clientDataJSON:$i(new Uint8Array(h.clientDataJSON)),signature:$i(new Uint8Array(h.signature)),userHandle:h.userHandle?$i(new Uint8Array(h.userHandle)):void 0},type:"public-key",clientExtensionResults:u,authenticatorAttachment:(r=s.authenticatorAttachment)!==null&&r!==void 0?r:void 0}}function jf(a){return a==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(a)}function lf(){var a,r;return!!(St()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((a=navigator==null?void 0:navigator.credentials)===null||a===void 0?void 0:a.create)=="function"&&typeof((r=navigator==null?void 0:navigator.credentials)===null||r===void 0?void 0:r.get)=="function")}async function dg(a){try{const r=await navigator.credentials.create(a);return r?r instanceof PublicKeyCredential?{data:r,error:null}:{data:null,error:new zl("Browser returned unexpected credential type",r)}:{data:null,error:new zl("Empty credential response",r)}}catch(r){return{data:null,error:ig({error:r,options:a})}}}async function fg(a){try{const r=await navigator.credentials.get(a);return r?r instanceof PublicKeyCredential?{data:r,error:null}:{data:null,error:new zl("Browser returned unexpected credential type",r)}:{data:null,error:new zl("Empty credential response",r)}}catch(r){return{data:null,error:sg({error:r,options:a})}}}const pg={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},mg={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Dl(...a){const r=h=>h!==null&&typeof h=="object"&&!Array.isArray(h),s=h=>h instanceof ArrayBuffer||ArrayBuffer.isView(h),u={};for(const h of a)if(h)for(const p in h){const _=h[p];if(_!==void 0)if(Array.isArray(_))u[p]=_;else if(s(_))u[p]=_;else if(r(_)){const w=u[p];r(w)?u[p]=Dl(w,_):u[p]=Dl(_)}else u[p]=_}return u}function _g(a,r){return Dl(pg,a,r||{})}function gg(a,r){return Dl(mg,a,r||{})}class vg{constructor(r){this.client=r,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(r){return this.client.mfa.enroll(Object.assign(Object.assign({},r),{factorType:"webauthn"}))}async _challenge({factorId:r,webauthn:s,friendlyName:u,signal:h},p){try{const{data:_,error:w}=await this.client.mfa.challenge({factorId:r,webauthn:s});if(!_)return{data:null,error:w};const v=h??ag.createNewAbortSignal();if(_.webauthn.type==="create"){const{user:S}=_.webauthn.credential_options.publicKey;S.name||(S.name=`${S.id}:${u}`),S.displayName||(S.displayName=S.name)}switch(_.webauthn.type){case"create":{const S=_g(_.webauthn.credential_options.publicKey,p==null?void 0:p.create),{data:P,error:R}=await dg({publicKey:S,signal:v});return P?{data:{factorId:r,challengeId:_.id,webauthn:{type:_.webauthn.type,credential_response:P}},error:null}:{data:null,error:R}}case"request":{const S=gg(_.webauthn.credential_options.publicKey,p==null?void 0:p.request),{data:P,error:R}=await fg(Object.assign(Object.assign({},_.webauthn.credential_options),{publicKey:S,signal:v}));return P?{data:{factorId:r,challengeId:_.id,webauthn:{type:_.webauthn.type,credential_response:P}},error:null}:{data:null,error:R}}}}catch(_){return ce(_)?{data:null,error:_}:{data:null,error:new Ui("Unexpected error in challenge",_)}}}async _verify({challengeId:r,factorId:s,webauthn:u}){return this.client.mfa.verify({factorId:s,challengeId:r,webauthn:u})}async _authenticate({factorId:r,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:u=typeof window<"u"?[window.location.origin]:void 0,signal:h}={}},p){if(!s)return{data:null,error:new ra("rpId is required for WebAuthn authentication")};try{if(!lf())return{data:null,error:new Ui("Browser does not support WebAuthn",null)};const{data:_,error:w}=await this.challenge({factorId:r,webauthn:{rpId:s,rpOrigins:u},signal:h},{request:p});if(!_)return{data:null,error:w};const{webauthn:v}=_;return this._verify({factorId:r,challengeId:_.challengeId,webauthn:{type:v.type,rpId:s,rpOrigins:u,credential_response:v.credential_response}})}catch(_){return ce(_)?{data:null,error:_}:{data:null,error:new Ui("Unexpected error in authenticate",_)}}}async _register({friendlyName:r,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:u=typeof window<"u"?[window.location.origin]:void 0,signal:h}={}},p){if(!s)return{data:null,error:new ra("rpId is required for WebAuthn registration")};try{if(!lf())return{data:null,error:new Ui("Browser does not support WebAuthn",null)};const{data:_,error:w}=await this._enroll({friendlyName:r});if(!_)return await this.client.mfa.listFactors().then(P=>{var R;return(R=P.data)===null||R===void 0?void 0:R.all.find(N=>N.factor_type==="webauthn"&&N.friendly_name===r&&N.status!=="unverified")}).then(P=>P?this.client.mfa.unenroll({factorId:P==null?void 0:P.id}):void 0),{data:null,error:w};const{data:v,error:S}=await this._challenge({factorId:_.id,friendlyName:_.friendly_name,webauthn:{rpId:s,rpOrigins:u},signal:h},{create:p});return v?this._verify({factorId:_.id,challengeId:v.challengeId,webauthn:{rpId:s,rpOrigins:u,type:v.webauthn.type,credential_response:v.webauthn.credential_response}}):{data:null,error:S}}catch(_){return ce(_)?{data:null,error:_}:{data:null,error:new Ui("Unexpected error in register",_)}}}}eg();const yg={url:p_,storageKey:m_,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:__,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function uf(a,r,s){return await s()}const Us={};class ia{get jwks(){var r,s;return(s=(r=Us[this.storageKey])===null||r===void 0?void 0:r.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(r){Us[this.storageKey]=Object.assign(Object.assign({},Us[this.storageKey]),{jwks:r})}get jwks_cached_at(){var r,s;return(s=(r=Us[this.storageKey])===null||r===void 0?void 0:r.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(r){Us[this.storageKey]=Object.assign(Object.assign({},Us[this.storageKey]),{cachedAt:r})}constructor(r){var s,u,h;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const p=Object.assign(Object.assign({},yg),r);if(this.storageKey=p.storageKey,this.instanceID=(s=ia.nextInstanceID[this.storageKey])!==null&&s!==void 0?s:0,ia.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!p.debug,typeof p.debug=="function"&&(this.logger=p.debug),this.instanceID>0&&St()){const _=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(_),this.logDebugMessages&&console.trace(_)}if(this.persistSession=p.persistSession,this.autoRefreshToken=p.autoRefreshToken,this.admin=new Y_({url:p.url,headers:p.headers,fetch:p.fetch}),this.url=p.url,this.headers=p.headers,this.fetch=Af(p.fetch),this.lock=p.lock||uf,this.detectSessionInUrl=p.detectSessionInUrl,this.flowType=p.flowType,this.hasCustomAuthorizationHeader=p.hasCustomAuthorizationHeader,this.throwOnError=p.throwOnError,this.lockAcquireTimeout=p.lockAcquireTimeout,p.lock?this.lock=p.lock:this.persistSession&&St()&&(!((u=globalThis==null?void 0:globalThis.navigator)===null||u===void 0)&&u.locks)?this.lock=X_:this.lock=uf,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new vg(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(p.storage?this.storage=p.storage:Rf()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=af(this.memoryStorage)),p.userStorage&&(this.userStorage=p.userStorage)):(this.memoryStorage={},this.storage=af(this.memoryStorage)),St()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(_){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",_)}(h=this.broadcastChannel)===null||h===void 0||h.addEventListener("message",async _=>{this._debug("received broadcast notification from other tab or client",_),await this._notifyAllSubscribers(_.data.event,_.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(r){if(this.throwOnError&&r&&r.error)throw r.error;return r}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Cf}) ${new Date().toISOString()}`}_debug(...r){return this.logDebugMessages&&this.logger(this._logPrefix(),...r),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var r;try{let s={},u="none";if(St()&&(s=R_(window.location.href),this._isImplicitGrantCallback(s)?u="implicit":await this._isPKCECallback(s)&&(u="pkce")),St()&&this.detectSessionInUrl&&u!=="none"){const{data:h,error:p}=await this._getSessionFromURL(s,u);if(p){if(this._debug("#_initialize()","error detecting session from URL",p),S_(p)){const v=(r=p.details)===null||r===void 0?void 0:r.code;if(v==="identity_already_exists"||v==="identity_not_found"||v==="single_identity_not_deletable")return{error:p}}return{error:p}}const{session:_,redirectType:w}=h;return this._debug("#_initialize()","detected session in URL",_,"redirect type",w),await this._saveSession(_),setTimeout(async()=>{w==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",_):await this._notifyAllSubscribers("SIGNED_IN",_)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return ce(s)?this._returnResult({error:s}):this._returnResult({error:new Ui("Unexpected error during initialization",s)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(r){var s,u,h;try{const p=await ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(u=(s=r==null?void 0:r.options)===null||s===void 0?void 0:s.data)!==null&&u!==void 0?u:{},gotrue_meta_security:{captcha_token:(h=r==null?void 0:r.options)===null||h===void 0?void 0:h.captchaToken}},xform:On}),{data:_,error:w}=p;if(w||!_)return this._returnResult({data:{user:null,session:null},error:w});const v=_.session,S=_.user;return _.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",v)),this._returnResult({data:{user:S,session:v},error:null})}catch(p){if(ce(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}}async signUp(r){var s,u,h;try{let p;if("email"in r){const{email:P,password:R,options:N}=r;let M=null,U=null;this.flowType==="pkce"&&([M,U]=await zs(this.storage,this.storageKey)),p=await ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:N==null?void 0:N.emailRedirectTo,body:{email:P,password:R,data:(s=N==null?void 0:N.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:N==null?void 0:N.captchaToken},code_challenge:M,code_challenge_method:U},xform:On})}else if("phone"in r){const{phone:P,password:R,options:N}=r;p=await ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:P,password:R,data:(u=N==null?void 0:N.data)!==null&&u!==void 0?u:{},channel:(h=N==null?void 0:N.channel)!==null&&h!==void 0?h:"sms",gotrue_meta_security:{captcha_token:N==null?void 0:N.captchaToken}},xform:On})}else throw new Nl("You must provide either an email or phone number and a password");const{data:_,error:w}=p;if(w||!_)return await xt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:w});const v=_.session,S=_.user;return _.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",v)),this._returnResult({data:{user:S,session:v},error:null})}catch(p){if(await xt(this.storage,`${this.storageKey}-code-verifier`),ce(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}}async signInWithPassword(r){try{let s;if("email"in r){const{email:p,password:_,options:w}=r;s=await ve(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:p,password:_,gotrue_meta_security:{captcha_token:w==null?void 0:w.captchaToken}},xform:sf})}else if("phone"in r){const{phone:p,password:_,options:w}=r;s=await ve(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:p,password:_,gotrue_meta_security:{captcha_token:w==null?void 0:w.captchaToken}},xform:sf})}else throw new Nl("You must provide either an email or phone number and a password");const{data:u,error:h}=s;if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!u||!u.session||!u.user){const p=new Ms;return this._returnResult({data:{user:null,session:null},error:p})}return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:Object.assign({user:u.user,session:u.session},u.weak_password?{weakPassword:u.weak_password}:null),error:h})}catch(s){if(ce(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOAuth(r){var s,u,h,p;return await this._handleProviderSignIn(r.provider,{redirectTo:(s=r.options)===null||s===void 0?void 0:s.redirectTo,scopes:(u=r.options)===null||u===void 0?void 0:u.scopes,queryParams:(h=r.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:(p=r.options)===null||p===void 0?void 0:p.skipBrowserRedirect})}async exchangeCodeForSession(r){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(r))}async signInWithWeb3(r){const{chain:s}=r;switch(s){case"ethereum":return await this.signInWithEthereum(r);case"solana":return await this.signInWithSolana(r);default:throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}}async signInWithEthereum(r){var s,u,h,p,_,w,v,S,P,R,N;let M,U;if("message"in r)M=r.message,U=r.signature;else{const{chain:B,wallet:H,statement:Q,options:Y}=r;let G;if(St())if(typeof H=="object")G=H;else{const ze=window;if("ethereum"in ze&&typeof ze.ethereum=="object"&&"request"in ze.ethereum&&typeof ze.ethereum.request=="function")G=ze.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof H!="object"||!(Y!=null&&Y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");G=H}const ie=new URL((s=Y==null?void 0:Y.url)!==null&&s!==void 0?s:window.location.href),Oe=await G.request({method:"eth_requestAccounts"}).then(ze=>ze).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!Oe||Oe.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const he=If(Oe[0]);let ke=(u=Y==null?void 0:Y.signInWithEthereum)===null||u===void 0?void 0:u.chainId;if(!ke){const ze=await G.request({method:"eth_chainId"});ke=tg(ze)}const Fe={domain:ie.host,address:he,statement:Q,uri:ie.href,version:"1",chainId:ke,nonce:(h=Y==null?void 0:Y.signInWithEthereum)===null||h===void 0?void 0:h.nonce,issuedAt:(_=(p=Y==null?void 0:Y.signInWithEthereum)===null||p===void 0?void 0:p.issuedAt)!==null&&_!==void 0?_:new Date,expirationTime:(w=Y==null?void 0:Y.signInWithEthereum)===null||w===void 0?void 0:w.expirationTime,notBefore:(v=Y==null?void 0:Y.signInWithEthereum)===null||v===void 0?void 0:v.notBefore,requestId:(S=Y==null?void 0:Y.signInWithEthereum)===null||S===void 0?void 0:S.requestId,resources:(P=Y==null?void 0:Y.signInWithEthereum)===null||P===void 0?void 0:P.resources};M=rg(Fe),U=await G.request({method:"personal_sign",params:[ng(M),he]})}try{const{data:B,error:H}=await ve(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:M,signature:U},!((R=r.options)===null||R===void 0)&&R.captchaToken?{gotrue_meta_security:{captcha_token:(N=r.options)===null||N===void 0?void 0:N.captchaToken}}:null),xform:On});if(H)throw H;if(!B||!B.session||!B.user){const Q=new Ms;return this._returnResult({data:{user:null,session:null},error:Q})}return B.session&&(await this._saveSession(B.session),await this._notifyAllSubscribers("SIGNED_IN",B.session)),this._returnResult({data:Object.assign({},B),error:H})}catch(B){if(ce(B))return this._returnResult({data:{user:null,session:null},error:B});throw B}}async signInWithSolana(r){var s,u,h,p,_,w,v,S,P,R,N,M;let U,B;if("message"in r)U=r.message,B=r.signature;else{const{chain:H,wallet:Q,statement:Y,options:G}=r;let ie;if(St())if(typeof Q=="object")ie=Q;else{const he=window;if("solana"in he&&typeof he.solana=="object"&&("signIn"in he.solana&&typeof he.solana.signIn=="function"||"signMessage"in he.solana&&typeof he.solana.signMessage=="function"))ie=he.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof Q!="object"||!(G!=null&&G.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");ie=Q}const Oe=new URL((s=G==null?void 0:G.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in ie&&ie.signIn){const he=await ie.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},G==null?void 0:G.signInWithSolana),{version:"1",domain:Oe.host,uri:Oe.href}),Y?{statement:Y}:null));let ke;if(Array.isArray(he)&&he[0]&&typeof he[0]=="object")ke=he[0];else if(he&&typeof he=="object"&&"signedMessage"in he&&"signature"in he)ke=he;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in ke&&"signature"in ke&&(typeof ke.signedMessage=="string"||ke.signedMessage instanceof Uint8Array)&&ke.signature instanceof Uint8Array)U=typeof ke.signedMessage=="string"?ke.signedMessage:new TextDecoder().decode(ke.signedMessage),B=ke.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in ie)||typeof ie.signMessage!="function"||!("publicKey"in ie)||typeof ie!="object"||!ie.publicKey||!("toBase58"in ie.publicKey)||typeof ie.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");U=[`${Oe.host} wants you to sign in with your Solana account:`,ie.publicKey.toBase58(),...Y?["",Y,""]:[""],"Version: 1",`URI: ${Oe.href}`,`Issued At: ${(h=(u=G==null?void 0:G.signInWithSolana)===null||u===void 0?void 0:u.issuedAt)!==null&&h!==void 0?h:new Date().toISOString()}`,...!((p=G==null?void 0:G.signInWithSolana)===null||p===void 0)&&p.notBefore?[`Not Before: ${G.signInWithSolana.notBefore}`]:[],...!((_=G==null?void 0:G.signInWithSolana)===null||_===void 0)&&_.expirationTime?[`Expiration Time: ${G.signInWithSolana.expirationTime}`]:[],...!((w=G==null?void 0:G.signInWithSolana)===null||w===void 0)&&w.chainId?[`Chain ID: ${G.signInWithSolana.chainId}`]:[],...!((v=G==null?void 0:G.signInWithSolana)===null||v===void 0)&&v.nonce?[`Nonce: ${G.signInWithSolana.nonce}`]:[],...!((S=G==null?void 0:G.signInWithSolana)===null||S===void 0)&&S.requestId?[`Request ID: ${G.signInWithSolana.requestId}`]:[],...!((R=(P=G==null?void 0:G.signInWithSolana)===null||P===void 0?void 0:P.resources)===null||R===void 0)&&R.length?["Resources",...G.signInWithSolana.resources.map(ke=>`- ${ke}`)]:[]].join(`
`);const he=await ie.signMessage(new TextEncoder().encode(U),"utf8");if(!he||!(he instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");B=he}}try{const{data:H,error:Q}=await ve(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:U,signature:$i(B)},!((N=r.options)===null||N===void 0)&&N.captchaToken?{gotrue_meta_security:{captcha_token:(M=r.options)===null||M===void 0?void 0:M.captchaToken}}:null),xform:On});if(Q)throw Q;if(!H||!H.session||!H.user){const Y=new Ms;return this._returnResult({data:{user:null,session:null},error:Y})}return H.session&&(await this._saveSession(H.session),await this._notifyAllSubscribers("SIGNED_IN",H.session)),this._returnResult({data:Object.assign({},H),error:Q})}catch(H){if(ce(H))return this._returnResult({data:{user:null,session:null},error:H});throw H}}async _exchangeCodeForSession(r){const s=await zi(this.storage,`${this.storageKey}-code-verifier`),[u,h]=(s??"").split("/");try{if(!u&&this.flowType==="pkce")throw new k_;const{data:p,error:_}=await ve(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:r,code_verifier:u},xform:On});if(await xt(this.storage,`${this.storageKey}-code-verifier`),_)throw _;if(!p||!p.session||!p.user){const w=new Ms;return this._returnResult({data:{user:null,session:null,redirectType:null},error:w})}return p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),this._returnResult({data:Object.assign(Object.assign({},p),{redirectType:h??null}),error:_})}catch(p){if(await xt(this.storage,`${this.storageKey}-code-verifier`),ce(p))return this._returnResult({data:{user:null,session:null,redirectType:null},error:p});throw p}}async signInWithIdToken(r){try{const{options:s,provider:u,token:h,access_token:p,nonce:_}=r,w=await ve(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:u,id_token:h,access_token:p,nonce:_,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:On}),{data:v,error:S}=w;if(S)return this._returnResult({data:{user:null,session:null},error:S});if(!v||!v.session||!v.user){const P=new Ms;return this._returnResult({data:{user:null,session:null},error:P})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:v,error:S})}catch(s){if(ce(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOtp(r){var s,u,h,p,_;try{if("email"in r){const{email:w,options:v}=r;let S=null,P=null;this.flowType==="pkce"&&([S,P]=await zs(this.storage,this.storageKey));const{error:R}=await ve(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:w,data:(s=v==null?void 0:v.data)!==null&&s!==void 0?s:{},create_user:(u=v==null?void 0:v.shouldCreateUser)!==null&&u!==void 0?u:!0,gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken},code_challenge:S,code_challenge_method:P},redirectTo:v==null?void 0:v.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:R})}if("phone"in r){const{phone:w,options:v}=r,{data:S,error:P}=await ve(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:w,data:(h=v==null?void 0:v.data)!==null&&h!==void 0?h:{},create_user:(p=v==null?void 0:v.shouldCreateUser)!==null&&p!==void 0?p:!0,gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken},channel:(_=v==null?void 0:v.channel)!==null&&_!==void 0?_:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:S==null?void 0:S.message_id},error:P})}throw new Nl("You must provide either an email or phone number.")}catch(w){if(await xt(this.storage,`${this.storageKey}-code-verifier`),ce(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async verifyOtp(r){var s,u;try{let h,p;"options"in r&&(h=(s=r.options)===null||s===void 0?void 0:s.redirectTo,p=(u=r.options)===null||u===void 0?void 0:u.captchaToken);const{data:_,error:w}=await ve(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},r),{gotrue_meta_security:{captcha_token:p}}),redirectTo:h,xform:On});if(w)throw w;if(!_)throw new Error("An error occurred on token verification.");const v=_.session,S=_.user;return v!=null&&v.access_token&&(await this._saveSession(v),await this._notifyAllSubscribers(r.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",v)),this._returnResult({data:{user:S,session:v},error:null})}catch(h){if(ce(h))return this._returnResult({data:{user:null,session:null},error:h});throw h}}async signInWithSSO(r){var s,u,h,p,_;try{let w=null,v=null;this.flowType==="pkce"&&([w,v]=await zs(this.storage,this.storageKey));const S=await ve(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in r?{provider_id:r.providerId}:null),"domain"in r?{domain:r.domain}:null),{redirect_to:(u=(s=r.options)===null||s===void 0?void 0:s.redirectTo)!==null&&u!==void 0?u:void 0}),!((h=r==null?void 0:r.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:r.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:w,code_challenge_method:v}),headers:this.headers,xform:K_});return!((p=S.data)===null||p===void 0)&&p.url&&St()&&!(!((_=r.options)===null||_===void 0)&&_.skipBrowserRedirect)&&window.location.assign(S.data.url),this._returnResult(S)}catch(w){if(await xt(this.storage,`${this.storageKey}-code-verifier`),ce(w))return this._returnResult({data:null,error:w});throw w}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async r=>{const{data:{session:s},error:u}=r;if(u)throw u;if(!s)throw new nn;const{error:h}=await ve(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return this._returnResult({data:{user:null,session:null},error:h})})}catch(r){if(ce(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async resend(r){try{const s=`${this.url}/resend`;if("email"in r){const{email:u,type:h,options:p}=r,{error:_}=await ve(this.fetch,"POST",s,{headers:this.headers,body:{email:u,type:h,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},redirectTo:p==null?void 0:p.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:_})}else if("phone"in r){const{phone:u,type:h,options:p}=r,{data:_,error:w}=await ve(this.fetch,"POST",s,{headers:this.headers,body:{phone:u,type:h,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:_==null?void 0:_.message_id},error:w})}throw new Nl("You must provide either an email or phone number and a type")}catch(s){if(ce(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async s=>s))}async _acquireLock(r,s){this._debug("#_acquireLock","begin",r);try{if(this.lockAcquired){const u=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),h=(async()=>(await u,await s()))();return this.pendingInLock.push((async()=>{try{await h}catch{}})()),h}return await this.lock(`lock:${this.storageKey}`,r,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const u=s();for(this.pendingInLock.push((async()=>{try{await u}catch{}})()),await u;this.pendingInLock.length;){const h=[...this.pendingInLock];await Promise.all(h),this.pendingInLock.splice(0,h.length)}return await u}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(r){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await r(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let r=null;const s=await zi(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?r=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!r)return{data:{session:null},error:null};const u=r.expires_at?r.expires_at*1e3-Date.now()<Sc:!1;if(this._debug("#__loadSession()",`session has${u?"":" not"} expired`,"expires_at",r.expires_at),!u){if(this.userStorage){const _=await zi(this.userStorage,this.storageKey+"-user");_!=null&&_.user?r.user=_.user:r.user=Ec()}if(this.storage.isServer&&r.user&&!r.user.__isUserNotAvailableProxy){const _={value:this.suppressGetSessionWarning};r.user=Z_(r.user,_),_.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:r},error:null}}const{data:h,error:p}=await this._callRefreshToken(r.refresh_token);return p?this._returnResult({data:{session:null},error:p}):this._returnResult({data:{session:h},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(r){if(r)return await this._getUser(r);await this.initializePromise;const s=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return s.data.user&&(this.suppressGetSessionWarning=!0),s}async _getUser(r){try{return r?await ve(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:r,xform:ii}):await this._useSession(async s=>{var u,h,p;const{data:_,error:w}=s;if(w)throw w;return!(!((u=_.session)===null||u===void 0)&&u.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new nn}:await ve(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(p=(h=_.session)===null||h===void 0?void 0:h.access_token)!==null&&p!==void 0?p:void 0,xform:ii})})}catch(s){if(ce(s))return x_(s)&&(await this._removeSession(),await xt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:s});throw s}}async updateUser(r,s={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(r,s))}async _updateUser(r,s={}){try{return await this._useSession(async u=>{const{data:h,error:p}=u;if(p)throw p;if(!h.session)throw new nn;const _=h.session;let w=null,v=null;this.flowType==="pkce"&&r.email!=null&&([w,v]=await zs(this.storage,this.storageKey));const{data:S,error:P}=await ve(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},r),{code_challenge:w,code_challenge_method:v}),jwt:_.access_token,xform:ii});if(P)throw P;return _.user=S.user,await this._saveSession(_),await this._notifyAllSubscribers("USER_UPDATED",_),this._returnResult({data:{user:_.user},error:null})})}catch(u){if(await xt(this.storage,`${this.storageKey}-code-verifier`),ce(u))return this._returnResult({data:{user:null},error:u});throw u}}async setSession(r){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(r))}async _setSession(r){try{if(!r.access_token||!r.refresh_token)throw new nn;const s=Date.now()/1e3;let u=s,h=!0,p=null;const{payload:_}=bc(r.access_token);if(_.exp&&(u=_.exp,h=u<=s),h){const{data:w,error:v}=await this._callRefreshToken(r.refresh_token);if(v)return this._returnResult({data:{user:null,session:null},error:v});if(!w)return{data:{user:null,session:null},error:null};p=w}else{const{data:w,error:v}=await this._getUser(r.access_token);if(v)throw v;p={access_token:r.access_token,refresh_token:r.refresh_token,user:w.user,token_type:"bearer",expires_in:u-s,expires_at:u},await this._saveSession(p),await this._notifyAllSubscribers("SIGNED_IN",p)}return this._returnResult({data:{user:p.user,session:p},error:null})}catch(s){if(ce(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}}async refreshSession(r){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(r))}async _refreshSession(r){try{return await this._useSession(async s=>{var u;if(!r){const{data:_,error:w}=s;if(w)throw w;r=(u=_.session)!==null&&u!==void 0?u:void 0}if(!(r!=null&&r.refresh_token))throw new nn;const{data:h,error:p}=await this._callRefreshToken(r.refresh_token);return p?this._returnResult({data:{user:null,session:null},error:p}):h?this._returnResult({data:{user:h.user,session:h},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(s){if(ce(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async _getSessionFromURL(r,s){try{if(!St())throw new Il("No browser detected.");if(r.error||r.error_description||r.error_code)throw new Il(r.error_description||"Error in URL with unspecified error_description",{error:r.error||"unspecified_error",code:r.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new Yd("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Il("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!r.code)throw new Yd("No code detected.");const{data:Y,error:G}=await this._exchangeCodeForSession(r.code);if(G)throw G;const ie=new URL(window.location.href);return ie.searchParams.delete("code"),window.history.replaceState(window.history.state,"",ie.toString()),{data:{session:Y.session,redirectType:null},error:null}}const{provider_token:u,provider_refresh_token:h,access_token:p,refresh_token:_,expires_in:w,expires_at:v,token_type:S}=r;if(!p||!w||!_||!S)throw new Il("No session defined in URL");const P=Math.round(Date.now()/1e3),R=parseInt(w);let N=P+R;v&&(N=parseInt(v));const M=N-P;M*1e3<=Fs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${M}s, should have been closer to ${R}s`);const U=N-R;P-U>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",U,N,P):P-U<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",U,N,P);const{data:B,error:H}=await this._getUser(p);if(H)throw H;const Q={provider_token:u,provider_refresh_token:h,access_token:p,expires_in:R,expires_at:N,refresh_token:_,token_type:S,user:B.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:Q,redirectType:r.type},error:null})}catch(u){if(ce(u))return this._returnResult({data:{session:null,redirectType:null},error:u});throw u}}_isImplicitGrantCallback(r){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),r):!!(r.access_token||r.error_description)}async _isPKCECallback(r){const s=await zi(this.storage,`${this.storageKey}-code-verifier`);return!!(r.code&&s)}async signOut(r={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(r))}async _signOut({scope:r}={scope:"global"}){return await this._useSession(async s=>{var u;const{data:h,error:p}=s;if(p)return this._returnResult({error:p});const _=(u=h.session)===null||u===void 0?void 0:u.access_token;if(_){const{error:w}=await this.admin.signOut(_,r);if(w&&!(w_(w)&&(w.status===404||w.status===401||w.status===403)))return this._returnResult({error:w})}return r!=="others"&&(await this._removeSession(),await xt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(r){const s=O_(),u={id:s,callback:r,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,u),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:u}}}async _emitInitialSession(r){return await this._useSession(async s=>{var u,h;try{const{data:{session:p},error:_}=s;if(_)throw _;await((u=this.stateChangeEmitters.get(r))===null||u===void 0?void 0:u.callback("INITIAL_SESSION",p)),this._debug("INITIAL_SESSION","callback id",r,"session",p)}catch(p){await((h=this.stateChangeEmitters.get(r))===null||h===void 0?void 0:h.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",r,"error",p),console.error(p)}})}async resetPasswordForEmail(r,s={}){let u=null,h=null;this.flowType==="pkce"&&([u,h]=await zs(this.storage,this.storageKey,!0));try{return await ve(this.fetch,"POST",`${this.url}/recover`,{body:{email:r,code_challenge:u,code_challenge_method:h,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(p){if(await xt(this.storage,`${this.storageKey}-code-verifier`),ce(p))return this._returnResult({data:null,error:p});throw p}}async getUserIdentities(){var r;try{const{data:s,error:u}=await this.getUser();if(u)throw u;return this._returnResult({data:{identities:(r=s.user.identities)!==null&&r!==void 0?r:[]},error:null})}catch(s){if(ce(s))return this._returnResult({data:null,error:s});throw s}}async linkIdentity(r){return"token"in r?this.linkIdentityIdToken(r):this.linkIdentityOAuth(r)}async linkIdentityOAuth(r){var s;try{const{data:u,error:h}=await this._useSession(async p=>{var _,w,v,S,P;const{data:R,error:N}=p;if(N)throw N;const M=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,r.provider,{redirectTo:(_=r.options)===null||_===void 0?void 0:_.redirectTo,scopes:(w=r.options)===null||w===void 0?void 0:w.scopes,queryParams:(v=r.options)===null||v===void 0?void 0:v.queryParams,skipBrowserRedirect:!0});return await ve(this.fetch,"GET",M,{headers:this.headers,jwt:(P=(S=R.session)===null||S===void 0?void 0:S.access_token)!==null&&P!==void 0?P:void 0})});if(h)throw h;return St()&&!(!((s=r.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(u==null?void 0:u.url),this._returnResult({data:{provider:r.provider,url:u==null?void 0:u.url},error:null})}catch(u){if(ce(u))return this._returnResult({data:{provider:r.provider,url:null},error:u});throw u}}async linkIdentityIdToken(r){return await this._useSession(async s=>{var u;try{const{error:h,data:{session:p}}=s;if(h)throw h;const{options:_,provider:w,token:v,access_token:S,nonce:P}=r,R=await ve(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(u=p==null?void 0:p.access_token)!==null&&u!==void 0?u:void 0,body:{provider:w,id_token:v,access_token:S,nonce:P,link_identity:!0,gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken}},xform:On}),{data:N,error:M}=R;return M?this._returnResult({data:{user:null,session:null},error:M}):!N||!N.session||!N.user?this._returnResult({data:{user:null,session:null},error:new Ms}):(N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("USER_UPDATED",N.session)),this._returnResult({data:N,error:M}))}catch(h){if(await xt(this.storage,`${this.storageKey}-code-verifier`),ce(h))return this._returnResult({data:{user:null,session:null},error:h});throw h}})}async unlinkIdentity(r){try{return await this._useSession(async s=>{var u,h;const{data:p,error:_}=s;if(_)throw _;return await ve(this.fetch,"DELETE",`${this.url}/user/identities/${r.identity_id}`,{headers:this.headers,jwt:(h=(u=p.session)===null||u===void 0?void 0:u.access_token)!==null&&h!==void 0?h:void 0})})}catch(s){if(ce(s))return this._returnResult({data:null,error:s});throw s}}async _refreshAccessToken(r){const s=`#_refreshAccessToken(${r.substring(0,5)}...)`;this._debug(s,"begin");try{const u=Date.now();return await I_(async h=>(h>0&&await N_(200*Math.pow(2,h-1)),this._debug(s,"refreshing attempt",h),await ve(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:r},headers:this.headers,xform:On})),(h,p)=>{const _=200*Math.pow(2,h);return p&&kc(p)&&Date.now()+_-u<Fs})}catch(u){if(this._debug(s,"error",u),ce(u))return this._returnResult({data:{session:null,user:null},error:u});throw u}finally{this._debug(s,"end")}}_isValidSession(r){return typeof r=="object"&&r!==null&&"access_token"in r&&"refresh_token"in r&&"expires_at"in r}async _handleProviderSignIn(r,s){const u=await this._getUrlForProvider(`${this.url}/authorize`,r,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",r,"options",s,"url",u),St()&&!s.skipBrowserRedirect&&window.location.assign(u),{data:{provider:r,url:u},error:null}}async _recoverAndRefresh(){var r,s;const u="#_recoverAndRefresh()";this._debug(u,"begin");try{const h=await zi(this.storage,this.storageKey);if(h&&this.userStorage){let _=await zi(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!_&&(_={user:h.user},await Ws(this.userStorage,this.storageKey+"-user",_)),h.user=(r=_==null?void 0:_.user)!==null&&r!==void 0?r:Ec()}else if(h&&!h.user&&!h.user){const _=await zi(this.storage,this.storageKey+"-user");_&&(_!=null&&_.user)?(h.user=_.user,await xt(this.storage,this.storageKey+"-user"),await Ws(this.storage,this.storageKey,h)):h.user=Ec()}if(this._debug(u,"session from storage",h),!this._isValidSession(h)){this._debug(u,"session is not valid"),h!==null&&await this._removeSession();return}const p=((s=h.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<Sc;if(this._debug(u,`session has${p?"":" not"} expired with margin of ${Sc}s`),p){if(this.autoRefreshToken&&h.refresh_token){const{error:_}=await this._callRefreshToken(h.refresh_token);_&&(console.error(_),kc(_)||(this._debug(u,"refresh failed with a non-retryable error, removing the session",_),await this._removeSession()))}}else if(h.user&&h.user.__isUserNotAvailableProxy===!0)try{const{data:_,error:w}=await this._getUser(h.access_token);!w&&(_!=null&&_.user)?(h.user=_.user,await this._saveSession(h),await this._notifyAllSubscribers("SIGNED_IN",h)):this._debug(u,"could not get user data, skipping SIGNED_IN notification")}catch(_){console.error("Error getting user data:",_),this._debug(u,"error getting user data, skipping SIGNED_IN notification",_)}else await this._notifyAllSubscribers("SIGNED_IN",h)}catch(h){this._debug(u,"error",h),console.error(h);return}finally{this._debug(u,"end")}}async _callRefreshToken(r){var s,u;if(!r)throw new nn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const h=`#_callRefreshToken(${r.substring(0,5)}...)`;this._debug(h,"begin");try{this.refreshingDeferred=new Fl;const{data:p,error:_}=await this._refreshAccessToken(r);if(_)throw _;if(!p.session)throw new nn;await this._saveSession(p.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",p.session);const w={data:p.session,error:null};return this.refreshingDeferred.resolve(w),w}catch(p){if(this._debug(h,"error",p),ce(p)){const _={data:null,error:p};return kc(p)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(_),_}throw(u=this.refreshingDeferred)===null||u===void 0||u.reject(p),p}finally{this.refreshingDeferred=null,this._debug(h,"end")}}async _notifyAllSubscribers(r,s,u=!0){const h=`#_notifyAllSubscribers(${r})`;this._debug(h,"begin",s,`broadcast = ${u}`);try{this.broadcastChannel&&u&&this.broadcastChannel.postMessage({event:r,session:s});const p=[],_=Array.from(this.stateChangeEmitters.values()).map(async w=>{try{await w.callback(r,s)}catch(v){p.push(v)}});if(await Promise.all(_),p.length>0){for(let w=0;w<p.length;w+=1)console.error(p[w]);throw p[0]}}finally{this._debug(h,"end")}}async _saveSession(r){this._debug("#_saveSession()",r),this.suppressGetSessionWarning=!0,await xt(this.storage,`${this.storageKey}-code-verifier`);const s=Object.assign({},r),u=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!u&&s.user&&await Ws(this.userStorage,this.storageKey+"-user",{user:s.user});const h=Object.assign({},s);delete h.user;const p=nf(h);await Ws(this.storage,this.storageKey,p)}else{const h=nf(s);await Ws(this.storage,this.storageKey,h)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await xt(this.storage,this.storageKey),await xt(this.storage,this.storageKey+"-code-verifier"),await xt(this.storage,this.storageKey+"-user"),this.userStorage&&await xt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const r=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{r&&St()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",r)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const r=setInterval(()=>this._autoRefreshTokenTick(),Fs);this.autoRefreshTicker=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r);const s=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=s,s&&typeof s=="object"&&typeof s.unref=="function"?s.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(s)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const r=this.autoRefreshTicker;this.autoRefreshTicker=null,r&&clearInterval(r);const s=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,s&&clearTimeout(s)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const r=Date.now();try{return await this._useSession(async s=>{const{data:{session:u}}=s;if(!u||!u.refresh_token||!u.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const h=Math.floor((u.expires_at*1e3-r)/Fs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${h} ticks, a tick lasts ${Fs}ms, refresh threshold is ${Mc} ticks`),h<=Mc&&await this._callRefreshToken(u.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(r){if(r.isAcquireTimeout||r instanceof Nf)this._debug("auto refresh token tick lock not available");else throw r}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!St()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(r){console.error("_handleVisibilityChange",r)}}async _onVisibilityChanged(r){const s=`#_onVisibilityChanged(${r})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),r||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(r,s,u){const h=[`provider=${encodeURIComponent(s)}`];if(u!=null&&u.redirectTo&&h.push(`redirect_to=${encodeURIComponent(u.redirectTo)}`),u!=null&&u.scopes&&h.push(`scopes=${encodeURIComponent(u.scopes)}`),this.flowType==="pkce"){const[p,_]=await zs(this.storage,this.storageKey),w=new URLSearchParams({code_challenge:`${encodeURIComponent(p)}`,code_challenge_method:`${encodeURIComponent(_)}`});h.push(w.toString())}if(u!=null&&u.queryParams){const p=new URLSearchParams(u.queryParams);h.push(p.toString())}return u!=null&&u.skipBrowserRedirect&&h.push(`skip_http_redirect=${u.skipBrowserRedirect}`),`${r}?${h.join("&")}`}async _unenroll(r){try{return await this._useSession(async s=>{var u;const{data:h,error:p}=s;return p?this._returnResult({data:null,error:p}):await ve(this.fetch,"DELETE",`${this.url}/factors/${r.factorId}`,{headers:this.headers,jwt:(u=h==null?void 0:h.session)===null||u===void 0?void 0:u.access_token})})}catch(s){if(ce(s))return this._returnResult({data:null,error:s});throw s}}async _enroll(r){try{return await this._useSession(async s=>{var u,h;const{data:p,error:_}=s;if(_)return this._returnResult({data:null,error:_});const w=Object.assign({friendly_name:r.friendlyName,factor_type:r.factorType},r.factorType==="phone"?{phone:r.phone}:r.factorType==="totp"?{issuer:r.issuer}:{}),{data:v,error:S}=await ve(this.fetch,"POST",`${this.url}/factors`,{body:w,headers:this.headers,jwt:(u=p==null?void 0:p.session)===null||u===void 0?void 0:u.access_token});return S?this._returnResult({data:null,error:S}):(r.factorType==="totp"&&v.type==="totp"&&(!((h=v==null?void 0:v.totp)===null||h===void 0)&&h.qr_code)&&(v.totp.qr_code=`data:image/svg+xml;utf-8,${v.totp.qr_code}`),this._returnResult({data:v,error:null}))})}catch(s){if(ce(s))return this._returnResult({data:null,error:s});throw s}}async _verify(r){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async s=>{var u;const{data:h,error:p}=s;if(p)return this._returnResult({data:null,error:p});const _=Object.assign({challenge_id:r.challengeId},"webauthn"in r?{webauthn:Object.assign(Object.assign({},r.webauthn),{credential_response:r.webauthn.type==="create"?cg(r.webauthn.credential_response):hg(r.webauthn.credential_response)})}:{code:r.code}),{data:w,error:v}=await ve(this.fetch,"POST",`${this.url}/factors/${r.factorId}/verify`,{body:_,headers:this.headers,jwt:(u=h==null?void 0:h.session)===null||u===void 0?void 0:u.access_token});return v?this._returnResult({data:null,error:v}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+w.expires_in},w)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",w),this._returnResult({data:w,error:v}))})}catch(s){if(ce(s))return this._returnResult({data:null,error:s});throw s}})}async _challenge(r){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async s=>{var u;const{data:h,error:p}=s;if(p)return this._returnResult({data:null,error:p});const _=await ve(this.fetch,"POST",`${this.url}/factors/${r.factorId}/challenge`,{body:r,headers:this.headers,jwt:(u=h==null?void 0:h.session)===null||u===void 0?void 0:u.access_token});if(_.error)return _;const{data:w}=_;if(w.type!=="webauthn")return{data:w,error:null};switch(w.webauthn.type){case"create":return{data:Object.assign(Object.assign({},w),{webauthn:Object.assign(Object.assign({},w.webauthn),{credential_options:Object.assign(Object.assign({},w.webauthn.credential_options),{publicKey:lg(w.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},w),{webauthn:Object.assign(Object.assign({},w.webauthn),{credential_options:Object.assign(Object.assign({},w.webauthn.credential_options),{publicKey:ug(w.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(s){if(ce(s))return this._returnResult({data:null,error:s});throw s}})}async _challengeAndVerify(r){const{data:s,error:u}=await this._challenge({factorId:r.factorId});return u?this._returnResult({data:null,error:u}):await this._verify({factorId:r.factorId,challengeId:s.id,code:r.code})}async _listFactors(){var r;const{data:{user:s},error:u}=await this.getUser();if(u)return{data:null,error:u};const h={all:[],phone:[],totp:[],webauthn:[]};for(const p of(r=s==null?void 0:s.factors)!==null&&r!==void 0?r:[])h.all.push(p),p.status==="verified"&&h[p.factor_type].push(p);return{data:h,error:null}}async _getAuthenticatorAssuranceLevel(){var r,s;const{data:{session:u},error:h}=await this.getSession();if(h)return this._returnResult({data:null,error:h});if(!u)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:p}=bc(u.access_token);let _=null;p.aal&&(_=p.aal);let w=_;((s=(r=u.user.factors)===null||r===void 0?void 0:r.filter(P=>P.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(w="aal2");const S=p.amr||[];return{data:{currentLevel:_,nextLevel:w,currentAuthenticationMethods:S},error:null}}async _getAuthorizationDetails(r){try{return await this._useSession(async s=>{const{data:{session:u},error:h}=s;return h?this._returnResult({data:null,error:h}):u?await ve(this.fetch,"GET",`${this.url}/oauth/authorizations/${r}`,{headers:this.headers,jwt:u.access_token,xform:p=>({data:p,error:null})}):this._returnResult({data:null,error:new nn})})}catch(s){if(ce(s))return this._returnResult({data:null,error:s});throw s}}async _approveAuthorization(r,s){try{return await this._useSession(async u=>{const{data:{session:h},error:p}=u;if(p)return this._returnResult({data:null,error:p});if(!h)return this._returnResult({data:null,error:new nn});const _=await ve(this.fetch,"POST",`${this.url}/oauth/authorizations/${r}/consent`,{headers:this.headers,jwt:h.access_token,body:{action:"approve"},xform:w=>({data:w,error:null})});return _.data&&_.data.redirect_url&&St()&&!(s!=null&&s.skipBrowserRedirect)&&window.location.assign(_.data.redirect_url),_})}catch(u){if(ce(u))return this._returnResult({data:null,error:u});throw u}}async _denyAuthorization(r,s){try{return await this._useSession(async u=>{const{data:{session:h},error:p}=u;if(p)return this._returnResult({data:null,error:p});if(!h)return this._returnResult({data:null,error:new nn});const _=await ve(this.fetch,"POST",`${this.url}/oauth/authorizations/${r}/consent`,{headers:this.headers,jwt:h.access_token,body:{action:"deny"},xform:w=>({data:w,error:null})});return _.data&&_.data.redirect_url&&St()&&!(s!=null&&s.skipBrowserRedirect)&&window.location.assign(_.data.redirect_url),_})}catch(u){if(ce(u))return this._returnResult({data:null,error:u});throw u}}async _listOAuthGrants(){try{return await this._useSession(async r=>{const{data:{session:s},error:u}=r;return u?this._returnResult({data:null,error:u}):s?await ve(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,xform:h=>({data:h,error:null})}):this._returnResult({data:null,error:new nn})})}catch(r){if(ce(r))return this._returnResult({data:null,error:r});throw r}}async _revokeOAuthGrant(r){try{return await this._useSession(async s=>{const{data:{session:u},error:h}=s;return h?this._returnResult({data:null,error:h}):u?(await ve(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:u.access_token,query:{client_id:r.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new nn})})}catch(s){if(ce(s))return this._returnResult({data:null,error:s});throw s}}async fetchJwk(r,s={keys:[]}){let u=s.keys.find(w=>w.kid===r);if(u)return u;const h=Date.now();if(u=this.jwks.keys.find(w=>w.kid===r),u&&this.jwks_cached_at+v_>h)return u;const{data:p,error:_}=await ve(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(_)throw _;return!p.keys||p.keys.length===0||(this.jwks=p,this.jwks_cached_at=h,u=p.keys.find(w=>w.kid===r),!u)?null:u}async getClaims(r,s={}){try{let u=r;if(!u){const{data:M,error:U}=await this.getSession();if(U||!M.session)return this._returnResult({data:null,error:U});u=M.session.access_token}const{header:h,payload:p,signature:_,raw:{header:w,payload:v}}=bc(u);s!=null&&s.allowExpired||$_(p.exp);const S=!h.alg||h.alg.startsWith("HS")||!h.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(h.kid,s!=null&&s.keys?{keys:s.keys}:s==null?void 0:s.jwks);if(!S){const{error:M}=await this.getUser(u);if(M)throw M;return{data:{claims:p,header:h,signature:_},error:null}}const P=F_(h.alg),R=await crypto.subtle.importKey("jwk",S,P,!0,["verify"]);if(!await crypto.subtle.verify(P,R,_,C_(`${w}.${v}`)))throw new Bc("Invalid JWT signature");return{data:{claims:p,header:h,signature:_},error:null}}catch(u){if(ce(u))return this._returnResult({data:null,error:u});throw u}}}ia.nextInstanceID={};const wg=ia,xg="2.91.1";let Jo="";typeof Deno<"u"?Jo="deno":typeof document<"u"?Jo="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Jo="react-native":Jo="node";const Sg={"X-Client-Info":`supabase-js-${Jo}/${xg}`},kg={headers:Sg},bg={schema:"public"},Eg={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Tg={};function sa(a){"@babel/helpers - typeof";return sa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},sa(a)}function Pg(a,r){if(sa(a)!="object"||!a)return a;var s=a[Symbol.toPrimitive];if(s!==void 0){var u=s.call(a,r);if(sa(u)!="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(a)}function Cg(a){var r=Pg(a,"string");return sa(r)=="symbol"?r:r+""}function Lg(a,r,s){return(r=Cg(r))in a?Object.defineProperty(a,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[r]=s,a}function cf(a,r){var s=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);r&&(u=u.filter(function(h){return Object.getOwnPropertyDescriptor(a,h).enumerable})),s.push.apply(s,u)}return s}function it(a){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?cf(Object(s),!0).forEach(function(u){Lg(a,u,s[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(s)):cf(Object(s)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(s,u))})}return a}const Og=a=>a?(...r)=>a(...r):(...r)=>fetch(...r),Rg=()=>Headers,Ag=(a,r,s)=>{const u=Og(s),h=Rg();return async(p,_)=>{var w;const v=(w=await r())!==null&&w!==void 0?w:a;let S=new h(_==null?void 0:_.headers);return S.has("apikey")||S.set("apikey",a),S.has("Authorization")||S.set("Authorization",`Bearer ${v}`),u(p,it(it({},_),{},{headers:S}))}};function Ng(a){return a.endsWith("/")?a:a+"/"}function Ig(a,r){var s,u;const{db:h,auth:p,realtime:_,global:w}=a,{db:v,auth:S,realtime:P,global:R}=r,N={db:it(it({},v),h),auth:it(it({},S),p),realtime:it(it({},P),_),storage:{},global:it(it(it({},R),w),{},{headers:it(it({},(s=R==null?void 0:R.headers)!==null&&s!==void 0?s:{}),(u=w==null?void 0:w.headers)!==null&&u!==void 0?u:{})}),accessToken:async()=>""};return a.accessToken?N.accessToken=a.accessToken:delete N.accessToken,N}function jg(a){const r=a==null?void 0:a.trim();if(!r)throw new Error("supabaseUrl is required.");if(!r.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Ng(r))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Mg=class extends wg{constructor(a){super(a)}},zg=class{constructor(a,r,s){var u,h;this.supabaseUrl=a,this.supabaseKey=r;const p=jg(a);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",p),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",p),this.storageUrl=new URL("storage/v1",p),this.functionsUrl=new URL("functions/v1",p);const _=`sb-${p.hostname.split(".")[0]}-auth-token`,w={db:bg,realtime:Tg,auth:it(it({},Eg),{},{storageKey:_}),global:kg},v=Ig(s??{},w);if(this.storageKey=(u=v.auth.storageKey)!==null&&u!==void 0?u:"",this.headers=(h=v.global.headers)!==null&&h!==void 0?h:{},v.accessToken)this.accessToken=v.accessToken,this.auth=new Proxy({},{get:(P,R)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(R)} is not possible`)}});else{var S;this.auth=this._initSupabaseAuthClient((S=v.auth)!==null&&S!==void 0?S:{},this.headers,v.global.fetch)}this.fetch=Ag(r,this._getAccessToken.bind(this),v.global.fetch),this.realtime=this._initRealtimeClient(it({headers:this.headers,accessToken:this._getAccessToken.bind(this)},v.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(P=>this.realtime.setAuth(P)).catch(P=>console.warn("Failed to set initial Realtime auth token:",P)),this.rest=new _m(new URL("rest/v1",p).href,{headers:this.headers,schema:v.db.schema,fetch:this.fetch}),this.storage=new f_(this.storageUrl.href,this.headers,this.fetch,s==null?void 0:s.storage),v.accessToken||this._listenForAuthEvents()}get functions(){return new hm(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(a){return this.rest.from(a)}schema(a){return this.rest.schema(a)}rpc(a,r={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(a,r,s)}channel(a,r={config:{}}){return this.realtime.channel(a,r)}getChannels(){return this.realtime.getChannels()}removeChannel(a){return this.realtime.removeChannel(a)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var a=this,r,s;if(a.accessToken)return await a.accessToken();const{data:u}=await a.auth.getSession();return(r=(s=u.session)===null||s===void 0?void 0:s.access_token)!==null&&r!==void 0?r:a.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:a,persistSession:r,detectSessionInUrl:s,storage:u,userStorage:h,storageKey:p,flowType:_,lock:w,debug:v,throwOnError:S},P,R){const N={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Mg({url:this.authUrl.href,headers:it(it({},N),P),storageKey:p,autoRefreshToken:a,persistSession:r,detectSessionInUrl:s,storage:u,userStorage:h,flowType:_,lock:w,debug:v,throwOnError:S,fetch:R,hasCustomAuthorizationHeader:Object.keys(this.headers).some(M=>M.toLowerCase()==="authorization")})}_initRealtimeClient(a){return new Nm(this.realtimeUrl.href,it(it({},a),{},{params:it(it({},{apikey:this.supabaseKey}),a==null?void 0:a.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((a,r)=>{this._handleTokenChanged(a,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(a,r,s){(a==="TOKEN_REFRESHED"||a==="SIGNED_IN")&&this.changedAccessToken!==s?(this.changedAccessToken=s,this.realtime.setAuth(s)):a==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Dg=(a,r,s)=>new zg(a,r,s);function Bg(){if(typeof window<"u")return!1;const a=globalThis.process;if(!a)return!1;const r=a.version;if(r==null)return!1;const s=r.match(/^v(\d+)\./);return s?parseInt(s[1],10)<=18:!1}Bg()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Ug="https://xlxnyeqzcsktfeisdpgx.supabase.co",$g="sb_publishable_mnIMWGwfQdQL1RvrZK1xQA_eiRWifi0",Nn=Dg(Ug,$g);function Mf(a){const r=[...a];for(let s=r.length-1;s>0;s--){const u=Math.floor(Math.random()*(s+1));[r[s],r[u]]=[r[u],r[s]]}return r}const Fg=async()=>{const a=new Date().toISOString().split("T")[0],{data:r,error:s}=await Nn.from("daily_challenges").select("*").eq("date",a).single();if(r&&!s)return r;const{data:u,error:h}=await Nn.from("locations").select("id").eq("is_active",!0).limit(500);if(h||!u||u.length<5)return console.error("Error fetching locations for challenge:",h),null;const p=Mf(u).slice(0,5).map(S=>S.id),{data:_}=await Nn.from("locations").select("id, usage_count").in("id",p);if(_)for(const S of _)await Nn.from("locations").update({usage_count:(S.usage_count||0)+1}).eq("id",S.id);const{data:w,error:v}=await Nn.from("daily_challenges").insert({date:a,location_ids:p}).select().single();return v?(console.error("Error creating challenge:",v),null):w},Wg=async a=>{const{data:r,error:s}=await Nn.from("locations").select("*").in("id",a.location_ids);if(s)return console.error("Error fetching challenge locations:",s),[];const u=a.location_ids.map(h=>r.find(p=>p.id===h)).filter(h=>h!==void 0);return Mf(u)},Zg=async(a,r,s)=>{const{data:u,error:h}=await Nn.from("leaderboard").insert({player_name:a,score:r,challenge_date:s}).select().single();return h?(console.error("Error submitting score:",h),null):u},Hg=async(a="all-time",r=100)=>{let s=Nn.from("leaderboard").select("*").order("score",{ascending:!1}).limit(r);if(a==="daily"){const p=new Date().toISOString().split("T")[0];s=s.eq("challenge_date",p)}else if(a==="weekly"){const p=new Date;p.setDate(p.getDate()-7),s=s.gte("created_at",p.toISOString())}const{data:u,error:h}=await s;return h?(console.error("Error fetching leaderboard:",h),[]):u||[]},Vg=[43.0096,-81.2737],Ko=5,qg=({onComplete:a,onExit:r})=>{const[s,u]=fe.useState(0),[h,p]=fe.useState([]),[_,w]=fe.useState(null),[v,S]=fe.useState(null),[P,R]=fe.useState(!1),[N,M]=fe.useState(0),[U,B]=fe.useState(!0),[H,Q]=fe.useState(""),[Y,G]=fe.useState(!1);fe.useEffect(()=>{ie()},[]);const ie=async()=>{try{const Re=await Fg();if(!Re){alert("Failed to load today's challenge. Check: 1) .env has VITE_SUPABASE_URL and VITE_SUPABASE_ANON_KEY 2) You ran supabase-fix-policies.sql 3) You have 5+ locations with is_active=ON. Open browser Console (F12) for details."),r();return}const Ie=await Wg(Re);if(Ie.length<Ko){alert("Not enough locations. Need 5 with is_active=ON. You have "+Ie.length+"."),r();return}p(Ie),B(!1)}catch(Re){console.error("Error loading challenge:",Re);const Ie=Re instanceof Error?Re.message:String(Re);alert("Error: "+Ie+`

Check .env and run supabase-fix-policies.sql. Open Console (F12) for more.`),r()}},Oe=(Re,Ie)=>{P||w({lat:Re,lng:Ie})},he=()=>{if(!_||!h[s])return;const Re=am(_.lat,_.lng,h[s]);S(Re),M(Ie=>Ie+Re.score),R(!0)},ke=async()=>{s<Ko-1?(u(Re=>Re+1),w(null),S(null),R(!1)):G(!0)},Fe=async()=>{if(!H.trim())return;const Re=new Date().toISOString().split("T")[0];await Zg(H.trim(),N,Re),a(N)};if(U)return T.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-pink-50 p-4 flex items-center justify-center",children:T.jsxs("div",{className:"text-center",children:[T.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-900 mx-auto mb-4"}),T.jsx("p",{className:"text-gray-600",children:"Loading challenge..."})]})});if(Y)return T.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-pink-50 p-4 flex items-center justify-center",children:T.jsxs("div",{className:"bg-white rounded-xl p-8 shadow-lg max-w-md w-full",children:[T.jsx(Xo,{className:"mx-auto mb-4 text-yellow-500",size:64}),T.jsx("h2",{className:"text-3xl font-bold mb-2 text-center",children:"Great Job!"}),T.jsx("p",{className:"text-5xl font-bold text-purple-900 mb-6 text-center",children:N.toLocaleString()}),T.jsx("p",{className:"text-gray-600 mb-6 text-center",children:"Total Points"}),T.jsxs("div",{className:"mb-6",children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Enter your name for the leaderboard:"}),T.jsx("input",{type:"text",value:H,onChange:Re=>Q(Re.target.value),onKeyPress:Re=>Re.key==="Enter"&&Fe(),placeholder:"Your name",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-900 focus:border-transparent",maxLength:20,autoFocus:!0})]}),T.jsx("button",{onClick:Fe,disabled:!H.trim(),className:`w-full py-3 rounded-lg font-semibold transition mb-3 ${H.trim()?"bg-purple-900 text-white hover:bg-purple-800":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:"Save to Leaderboard"}),T.jsx("button",{onClick:()=>a(N),className:"w-full text-gray-600 hover:text-gray-800 font-medium",children:"Skip"})]})});if(h.length===0||s>=h.length)return null;const ze=h[s];return T.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-pink-50 p-4",children:T.jsxs("div",{className:"max-w-6xl mx-auto",children:[T.jsxs("div",{className:"mb-4 bg-white rounded-lg p-2 shadow",children:[T.jsxs("div",{className:"flex justify-between items-center mb-2",children:[T.jsxs("span",{className:"text-sm font-semibold text-gray-700",children:["Round ",s+1," / ",Ko]}),T.jsxs("span",{className:"text-sm font-semibold text-purple-900",children:["Score: ",N.toLocaleString()]})]}),T.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:T.jsx("div",{className:"bg-purple-900 h-2 rounded-full transition-all",style:{width:`${(s+1)/Ko*100}%`}})})]}),T.jsx("div",{className:"bg-white rounded-xl overflow-hidden shadow-lg mb-4",children:T.jsxs("div",{className:"aspect-video bg-gray-900 relative",children:[T.jsx("img",{src:ze.image_url,alt:ze.name,className:"w-full h-full object-cover",onError:Re=>{Re.target.src="https://via.placeholder.com/800x450?text=Campus+Photo"}}),!P&&T.jsx("div",{className:"absolute bottom-4 left-4 bg-black bg-opacity-60 text-white px-4 py-2 rounded-lg",children:T.jsx("p",{className:"text-sm font-medium",children:"Where is this on campus?"})})]})}),T.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg",children:[T.jsx("h3",{className:"font-bold text-lg mb-4",children:P?"Results":"Drop your guess on the map"}),T.jsx("div",{className:"relative w-full h-96 rounded-lg overflow-hidden border-2 border-gray-300 mb-4",children:T.jsx(vf,{center:Vg,zoom:15,onMapClick:Oe,guessLocation:_,actualLocation:P?ze:null,showResult:P,disabled:P})}),P&&v?T.jsxs("div",{className:"text-center space-y-4",children:[T.jsxs("div",{className:"bg-purple-50 rounded-lg p-6",children:[T.jsxs("p",{className:"text-4xl font-bold text-purple-900 mb-2",children:[v.score.toLocaleString()," points"]}),T.jsx("p",{className:"text-gray-600 mb-1",children:T.jsx("strong",{children:ze.name})}),ze.description&&T.jsx("p",{className:"text-sm text-gray-500",children:ze.description}),T.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Distance: ",Math.round(v.distance),"m away"]}),T.jsxs("div",{className:"mt-4 flex gap-2 items-center justify-center",children:[T.jsxs("div",{className:"flex items-center gap-2 bg-white px-3 py-1 rounded-full",children:[T.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),T.jsx("span",{className:"text-sm",children:"Your Guess"})]}),T.jsxs("div",{className:"flex items-center gap-2 bg-white px-3 py-1 rounded-full",children:[T.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),T.jsx("span",{className:"text-sm",children:"Actual Location"})]})]})]}),T.jsx("button",{onClick:ke,className:"w-full bg-purple-900 text-white px-8 py-3 rounded-lg font-semibold hover:bg-purple-800 transition",children:s<Ko-1?"Next Round ":"See Final Score"})]}):T.jsxs("div",{children:[T.jsx("p",{className:"text-sm text-gray-600 mb-4",children:_?" Pin dropped! Click Submit when ready.":"Click anywhere on the map to place your guess."}),T.jsx("button",{onClick:he,disabled:!_,className:`w-full py-3 rounded-lg font-semibold transition ${_?"bg-purple-900 text-white hover:bg-purple-800 cursor-pointer":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:"Submit Guess"})]})]})]})})},Kg=()=>{const[a,r]=fe.useState([]),[s,u]=fe.useState("all-time"),[h,p]=fe.useState(!0);fe.useEffect(()=>{_()},[s]);const _=async()=>{p(!0);const w=await Hg(s);r(w),p(!1)};return T.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-pink-50 p-4",children:T.jsxs("div",{className:"max-w-2xl mx-auto",children:[T.jsxs("h2",{className:"text-3xl font-bold mb-6 flex items-center gap-3",children:[T.jsx(Xo,{className:"text-yellow-500",size:36}),"Leaderboard"]}),T.jsxs("div",{className:"mb-6 flex gap-2",children:[T.jsx("button",{onClick:()=>u("daily"),className:`px-4 py-2 rounded-lg font-medium transition ${s==="daily"?"bg-purple-900 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"Today"}),T.jsx("button",{onClick:()=>u("weekly"),className:`px-4 py-2 rounded-lg font-medium transition ${s==="weekly"?"bg-purple-900 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"This Week"}),T.jsx("button",{onClick:()=>u("all-time"),className:`px-4 py-2 rounded-lg font-medium transition ${s==="all-time"?"bg-purple-900 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"All Time"})]}),T.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:h?T.jsxs("div",{className:"p-12 text-center",children:[T.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-900 mx-auto mb-4"}),T.jsx("p",{className:"text-gray-600",children:"Loading leaderboard..."})]}):a.length===0?T.jsxs("div",{className:"p-12 text-center text-gray-500",children:[T.jsx(Xo,{className:"mx-auto mb-4 text-gray-300",size:48}),T.jsx("p",{className:"text-lg",children:"No scores yet!"}),T.jsx("p",{className:"text-sm",children:"Be the first to play and set a record."})]}):a.map((w,v)=>T.jsxs("div",{className:`flex justify-between items-center p-4 border-b last:border-b-0 ${v===0?"bg-yellow-50":v===1?"bg-gray-50":v===2?"bg-orange-50":""}`,children:[T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsx("span",{className:`text-xl font-bold ${v===0?"text-yellow-600":v===1?"text-gray-600":v===2?"text-orange-600":"text-gray-400"}`,children:v+1}),T.jsxs("div",{children:[T.jsx("span",{className:"font-medium",children:w.player_name}),T.jsx("p",{className:"text-xs text-gray-500",children:new Date(w.created_at).toLocaleDateString()})]})]}),T.jsxs("span",{className:"font-bold text-purple-900",children:[w.score.toLocaleString()," pts"]})]},w.id))})]})})},Gg=async(a,r=1920,s=1080,u=.8)=>new Promise((h,p)=>{const _=new FileReader;_.onload=w=>{var S;const v=new Image;v.onload=()=>{const P=document.createElement("canvas");let R=v.width,N=v.height;R>N?R>r&&(N=N*r/R,R=r):N>s&&(R=R*s/N,N=s),P.width=R,P.height=N;const M=P.getContext("2d");if(!M){p(new Error("Could not get canvas context"));return}M.drawImage(v,0,0,R,N),P.toBlob(U=>{U?h(U):p(new Error("Failed to compress image"))},"image/jpeg",u)},v.onerror=()=>p(new Error("Failed to load image")),v.src=(S=w.target)==null?void 0:S.result},_.onerror=()=>p(new Error("Failed to read file")),_.readAsDataURL(a)}),Jg=async(a,r,s,u,h,p)=>{try{const _=await Gg(a),w=new File([_],a.name,{type:"image/jpeg"}),S=`submissions/${`${Date.now()}_${Math.random().toString(36).substring(7)}.jpg`}`,{error:P}=await Nn.storage.from("images").upload(S,w,{cacheControl:"3600",upsert:!1});if(P)throw console.error("Error uploading image:",P),new Error('Image upload failed. In Supabase: Storage  create an "images" bucket (public) and add an INSERT policy for it. Error: '+P.message);const{data:{publicUrl:R}}=Nn.storage.from("images").getPublicUrl(S),{data:N,error:M}=await Nn.from("submissions").insert({image_url:R,latitude:r,longitude:s,name:u,description:h,submitted_by:p,status:"pending"}).select().single();if(M)throw console.error("Error creating submission:",M),new Error("Could not save submission. Error: "+M.message);return N}catch(_){throw _ instanceof Error&&(_.message.startsWith("Image upload failed")||_.message.startsWith("Could not save submission"))?_:(console.error("Error in submitLocation:",_),_ instanceof Error?_:new Error(String(_)))}},Yg=[43.0096,-81.2737],Qg=()=>{const[a,r]=fe.useState(null),[s,u]=fe.useState(null),[h,p]=fe.useState(""),[_,w]=fe.useState(""),[v,S]=fe.useState(null),[P,R]=fe.useState(!1),[N,M]=fe.useState(!1),U=Q=>{var G;const Y=(G=Q.target.files)==null?void 0:G[0];if(Y){r(Y);const ie=new FileReader;ie.onloadend=()=>{u(ie.result)},ie.readAsDataURL(Y)}},B=(Q,Y)=>{S({lat:Q,lng:Y})},H=async Q=>{if(Q.preventDefault(),!a||!v||!h.trim()){alert("Please fill in all required fields and select a location on the map.");return}R(!0);try{await Jg(a,v.lat,v.lng,h.trim(),_.trim()||void 0),M(!0),r(null),u(null),p(""),w(""),S(null)}catch(Y){console.error("Error submitting:",Y),alert(Y instanceof Error?Y.message:"An error occurred. Please try again.")}finally{R(!1)}};return N?T.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-pink-50 p-4 flex items-center justify-center",children:T.jsxs("div",{className:"bg-white rounded-xl p-8 shadow-lg max-w-md w-full text-center",children:[T.jsx(Op,{className:"mx-auto mb-4 text-green-500",size:64}),T.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Thank You!"}),T.jsx("p",{className:"text-gray-600 mb-6",children:"Your submission has been received and will be reviewed before being added to the game."}),T.jsx("button",{onClick:()=>M(!1),className:"bg-purple-900 text-white px-8 py-3 rounded-lg font-semibold hover:bg-purple-800 transition",children:"Submit Another"})]})}):T.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-pink-50 p-4",children:T.jsxs("div",{className:"max-w-4xl mx-auto",children:[T.jsxs("h2",{className:"text-3xl font-bold mb-6 flex items-center gap-3",children:[T.jsx(Pc,{className:"text-purple-900",size:36}),"Contribute a Location"]}),T.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg",children:[T.jsxs("p",{className:"text-gray-600 mb-6",children:["Upload a campus photo, drop a pin on the map for ",T.jsx("strong",{children:"latitude & longitude"}),", and add a name. After you submit, it gets reviewedthen your image and coordinates go into the game."]}),T.jsxs("form",{onSubmit:H,className:"space-y-6",children:[T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"1. Your photo *"}),T.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:s?T.jsxs("div",{className:"space-y-4",children:[T.jsx("img",{src:s,alt:"Preview",className:"max-h-64 mx-auto rounded-lg"}),T.jsx("button",{type:"button",onClick:()=>{r(null),u(null)},className:"text-sm text-red-600 hover:text-red-700",children:"Remove"})]}):T.jsxs("div",{children:[T.jsx(Pc,{className:"mx-auto mb-2 text-gray-400",size:32}),T.jsxs("label",{className:"cursor-pointer",children:[T.jsx("span",{className:"text-purple-900 font-medium",children:"Click to upload"}),T.jsx("span",{className:"text-gray-600",children:" or drag and drop"}),T.jsx("input",{type:"file",accept:"image/*",onChange:U,className:"hidden"})]}),T.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"PNG, JPG. Compressed automatically."})]})})]}),T.jsxs("div",{children:[T.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["2. Where was it taken? * ",T.jsx("span",{className:"text-gray-500 font-normal",children:"(click the map to set latitude & longitude)"})]}),T.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Click the exact spot on the map. That pin sets the ",T.jsx("strong",{children:"latitude and longitude"})," used in the game."]}),T.jsx("div",{className:"w-full h-96 rounded-lg overflow-hidden border-2 border-gray-300",children:T.jsx(vf,{center:Yg,zoom:15,onMapClick:B,guessLocation:v?{lat:v.lat,lng:v.lng}:null,disabled:!1})}),v?T.jsxs("p",{className:"text-sm text-green-600 mt-2 flex items-center gap-1",children:[T.jsx(df,{size:16}),"Coordinates set: lat ",T.jsx("strong",{children:v.lat.toFixed(6)}),", lng ",T.jsx("strong",{children:v.lng.toFixed(6)})]}):T.jsx("p",{className:"text-sm text-amber-600 mt-2",children:"Click the map to set coordinates."})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"3. Location name *"}),T.jsx("input",{type:"text",value:h,onChange:Q=>p(Q.target.value),placeholder:"e.g., UC Courtyard, Weldon Library entrance",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-900 focus:border-transparent",required:!0})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"4. Description (optional)"}),T.jsx("textarea",{value:_,onChange:Q=>w(Q.target.value),placeholder:"e.g. Main lawn in front of the building",rows:2,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-900 focus:border-transparent"})]}),T.jsx("button",{type:"submit",disabled:!a||!v||!h.trim()||P,className:`w-full py-3 rounded-lg font-semibold transition ${a&&v&&h.trim()&&!P?"bg-purple-900 text-white hover:bg-purple-800":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:P?"Submitting...":"Submit for Review"})]})]})]})})},Xg=()=>T.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-pink-50 p-4",children:T.jsxs("div",{className:"max-w-3xl mx-auto space-y-6",children:[T.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[T.jsxs("h2",{className:"text-2xl font-bold text-purple-900 mb-4",children:["About ",T.jsx("span",{className:"text-gray-700",children:"WesternGuessr"})]}),T.jsxs("p",{className:"text-gray-700 leading-relaxed mb-4",children:[T.jsx("strong",{children:"WesternGuessr"})," is a campus geography game for Western University. You'll see random photos taken somewhere on campus, drop a pin on the map where you think it was shot, and gain points based on how close you are."]}),T.jsx("p",{className:"text-gray-600 text-sm",children:"Inspired by GeoGuessr. Built by students, for students "})]}),T.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[T.jsx("h3",{className:"text-xl font-bold text-purple-900 mb-3",children:"How to Play"}),T.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-gray-700",children:[T.jsx("li",{children:"Start the daily challenge - you'll get 5 random campus locations"}),T.jsx("li",{children:"Look at each photo and click on the map where you think it was taken"}),T.jsx("li",{children:"Get points based on how close you are - closer guesses = more points!"}),T.jsx("li",{children:"Complete all 5 rounds and see your total score"}),T.jsx("li",{children:"Submit your score to compete on the leaderboard"})]})]}),T.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[T.jsx("h3",{className:"text-xl font-bold text-purple-900 mb-3",children:"Technology"}),T.jsx("p",{className:"text-gray-700 leading-relaxed",children:"Built with React, TypeScript, Tailwind CSS, Mapbox GL, and Supabase. This is a student project created to help Western students explore and learn about their campus in a fun way."})]}),T.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[T.jsx("h3",{className:"text-xl font-bold text-purple-900 mb-3",children:"Contribute"}),T.jsx("p",{className:"text-gray-700 leading-relaxed",children:"Have a great photo of campus? Submit it through our contribution page! All submissions are reviewed before being added to the game to ensure quality."})]}),T.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[T.jsx("h3",{className:"text-xl font-bold text-purple-900 mb-3",children:"Disclaimer"}),T.jsx("p",{className:"text-gray-700 leading-relaxed",children:"This is an unofficial, student-made project and is not affiliated with or endorsed by Western University. Any use of campus names, buildings, or landmarks is for identification and educational context only."})]})]})});function ev(){const[a,r]=fe.useState("home"),[s,u]=fe.useState(null),h=()=>{r("game"),u(null)},p=v=>{u(v),r("results")},_=()=>{r("home"),u(null)},w=v=>{v!=="game"&&v!=="results"&&r(v)};return T.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-pink-50",children:[a!=="game"&&a!=="results"&&T.jsx(Ip,{currentView:a,onNavigate:w}),a==="home"&&T.jsx(jp,{onStartGame:h}),a==="game"&&T.jsx(qg,{onComplete:p,onExit:_}),a==="leaderboard"&&T.jsx(Kg,{}),a==="contribute"&&T.jsx(Qg,{}),a==="about"&&T.jsx(Xg,{}),a==="results"&&T.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-pink-50 p-4 flex items-center justify-center",children:T.jsxs("div",{className:"bg-white rounded-xl p-8 shadow-lg max-w-md w-full text-center",children:[T.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Game Complete!"}),s!==null&&T.jsxs(T.Fragment,{children:[T.jsx("p",{className:"text-5xl font-bold text-purple-900 mb-2",children:s.toLocaleString()}),T.jsx("p",{className:"text-gray-600 mb-8",children:"Total Points"})]}),T.jsx("button",{onClick:()=>r("home"),className:"bg-purple-900 text-white px-8 py-3 rounded-lg font-semibold hover:bg-purple-800 transition w-full mb-3",children:"Back to Home"}),T.jsx("button",{onClick:()=>r("leaderboard"),className:"text-purple-900 hover:text-purple-700 font-medium",children:"View Leaderboard"})]})})]})}Tp.createRoot(document.getElementById("root")).render(T.jsx(jl.StrictMode,{children:T.jsx(ev,{})}));
